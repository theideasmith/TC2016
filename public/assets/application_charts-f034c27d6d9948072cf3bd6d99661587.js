!function(){function t(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t}function e(){var t,e,i=arguments,n={},r=function(t,e){var i,n;"object"!=typeof t&&(t={});for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?r(t[n]||{},i):e[n]);return t};for(i[0]===!0&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;e>t;t++)n=r(n,i[t]);return n}function i(){for(var t=0,e=arguments,i=e.length,n={};i>t;t++)n[e[t++]]=e[t];return n}function n(t,e){return parseInt(t,e||10)}function r(t){return"string"==typeof t}function o(t){return"object"==typeof t}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"number"==typeof t}function l(t){return me.log(t)/me.LN10}function h(t){return me.pow(10,t)}function c(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function u(t){return t!==X&&null!==t}function d(t,e,i){var n,s,a="setAttribute";if(r(e))u(i)?t[a](e,i):t&&t.getAttribute&&(s=t.getAttribute(e));else if(u(e)&&o(e))for(n in e)t[a](n,e[n]);return s}function p(t){return s(t)?t:[t]}function f(){var t,e,i=arguments,n=i.length;for(t=0;n>t;t++)if(e=i[t],"undefined"!=typeof e&&null!==e)return e}function g(e,i){Le&&!Oe&&i&&i.opacity!==X&&(i.filter="alpha(opacity="+100*i.opacity+")"),t(e.style,i)}function m(e,i,n,r,o){var s=fe.createElement(e);return i&&t(s,i),o&&g(s,{padding:0,border:Ze,margin:0}),n&&g(s,n),r&&r.appendChild(s),s}function v(e,i){var n=function(){};return n.prototype=new e,t(n.prototype,i),n}function b(t,e,i,r,o){var s=U.lang,a=+t||0,l=-1===e?(a.toString().split(".")[1]||"").length:isNaN(e=ke(e))?2:e,h=void 0===i?s.decimalPoint:i,c=void 0===r?s.thousandsSep:r,u=0>a?"-":"",d=String(n(a=ke(a).toFixed(l))),p=d.length>3?d.length%3:0,f=o?"$":"";return u+f+(p?d.substr(0,p)+c:"")+d.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+c)+(l?h+ke(a-d).toFixed(l).slice(2):"")}function y(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function x(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}}function w(t,e){if(!t)return 0;for(var i=0,n=t.length;n>i;){var r=i+n>>1;t[r]<e?i=r+1:n=r}return i}function k(t,e){var i,n=/f$/,r=/\.([0-9])/,o=U.lang;return n.test(t)?(i=t.match(r),i=i?i[1]:-1,e=b(e,i,o.decimalPoint,t.indexOf(",")>-1?o.thousandsSep:"")):e=K(t,e),e}function C(t,e){for(var i,n,r,o,s,a,l,h="{",c=!1,u=[];-1!==(l=t.indexOf(h));){if(i=t.slice(0,l),c){for(n=i.split(":"),r=n.shift().split("."),s=r.length,a=e,o=0;s>o;o++)a=a[r[o]];n.length&&(a=k(n.join(":"),a)),u.push(a)}else u.push(i);t=t.slice(l+1),c=!c,h=c?"}":"{"}return u.push(t),u.join("")}function _(t){return me.pow(10,be(me.log(t)/me.LN10))}function S(t,e,i,n){var r,o;for(i=f(i,1),r=t/i,e||(e=[1,2,2.5,5,10],n&&n.allowDecimals===!1&&(1===i?e=[1,2,5,10]:.1>=i&&(e=[1/i]))),o=0;o<e.length&&(t=e[o],!(r<=(e[o]+(e[o+1]||e[o]))/2));o++);return t*=i}function T(){this.color=0,this.symbol=0}function M(t,e){var i,n,r=t.length;for(n=0;r>n;n++)t[n].ss_i=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.ss_i-n.ss_i:i}),n=0;r>n;n++)delete t[n].ss_i}function D(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function L(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function A(t,e){var i;for(i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function P(t){V||(V=m(Ge)),t&&V.appendChild(t),V.innerHTML=""}function I(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;ge.console&&console.log(i)}function z(t){return parseFloat(t.toPrecision(14))}function H(t,e){Z=f(t,e.animation)}function O(){var t=U.global.useUTC,e=t?"getUTC":"get",i=t?"setUTC":"set";ie=6e4*(t&&U.global.timezoneOffset||0),ee=t?Date.UTC:function(t,e,i,n,r,o){return new Date(t,e,f(i,1),f(n,0),f(r,0),f(o,0)).getTime()},ne=e+"Minutes",re=e+"Hours",oe=e+"Day",se=e+"Date",ae=e+"Month",le=e+"FullYear",he=i+"Minutes",ce=i+"Hours",ue=i+"Date",de=i+"Month",pe=i+"FullYear"}function E(t){return U=e(!0,U,t),O(),U}function W(){return U}function N(){}function R(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function $(){this.init.apply(this,arguments)}function B(){this.init.apply(this,arguments)}function F(t,e,i,n,r,o){var s=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=r,this.percent="percent"===o,this.alignOptions={align:e.align||(s?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(s?"middle":i?"bottom":"top"),y:f(e.y,s?4:i?14:-6),x:f(e.x,s?i?-6:6:0)},this.textAlign=e.textAlign||(s?i?"right":"left":"center")}function Y(t){var e=t.options,i=e.navigator,n=i.enabled,r=e.scrollbar,o=r.enabled,s=n?i.height:0,a=o?r.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=t,this.setBaseSeries(),this.height=s,this.scrollbarHeight=a,this.scrollbarEnabled=o,this.navigatorEnabled=n,this.navigatorOptions=i,this.scrollbarOptions=r,this.outlineHeight=s+a,this.init()}function G(t){this.init(t)}var X,j,q,V,U,K,Z,Q,J,te,ee,ie,ne,re,oe,se,ae,le,he,ce,ue,de,pe,fe=document,ge=window,me=Math,ve=me.round,be=me.floor,ye=me.ceil,xe=me.max,we=me.min,ke=me.abs,Ce=me.cos,_e=me.sin,Se=me.PI,Te=2*Se/360,Me=navigator.userAgent,De=ge.opera,Le=/msie/i.test(Me)&&!De,Ae=8===fe.documentMode,Pe=/AppleWebKit/.test(Me),Ie=/Firefox/.test(Me),ze=/(Mobile|Android|Windows Phone)/.test(Me),He="http://www.w3.org/2000/svg",Oe=!!fe.createElementNS&&!!fe.createElementNS(He,"svg").createSVGRect,Ee=Ie&&parseInt(Me.split("Firefox/")[1],10)<4,We=!Oe&&!Le&&!!fe.createElement("canvas").getContext,Ne={},Re=0,$e=function(){},Be=[],Fe="Highstock",Ye="1.3.10",Ge="div",Xe="absolute",je="relative",qe="hidden",Ve="highcharts-",Ue="visible",Ke="px",Ze="none",Qe="M",Je="L",ti=/^[0-9]+$/,ei="",ii="hover",ni="select",ri="millisecond",oi="second",si="minute",ai="hour",li="day",hi="week",ci="month",ui="year",di="stroke-width",pi={},fi=ge.Highcharts=ge.Highcharts?I(16,!0):{};K=function(e,i,n){if(!u(i)||isNaN(i))return"Invalid date";e=f(e,"%Y-%m-%d %H:%M:%S");var r,o=new Date(i-ie),s=o[re](),a=o[oe](),l=o[se](),h=o[ae](),c=o[le](),d=U.lang,p=d.weekdays,g=t({a:p[a].substr(0,3),A:p[a],d:y(l),e:l,b:d.shortMonths[h],B:d.months[h],m:y(h+1),y:c.toString().substr(2,2),Y:c,H:y(s),I:y(s%12||12),l:s%12||12,M:y(o[ne]()),p:12>s?"AM":"PM",P:12>s?"am":"pm",S:y(o.getSeconds()),L:y(ve(i%1e3),3)},fi.dateFormats);for(r in g)for(;-1!==e.indexOf("%"+r);)e=e.replace("%"+r,"function"==typeof g[r]?g[r](i):g[r]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},T.prototype={wrapColor:function(t){this.color>=t&&(this.color=0)},wrapSymbol:function(t){this.symbol>=t&&(this.symbol=0)}},J=i(ri,1,oi,1e3,si,6e4,ai,36e5,li,864e5,hi,6048e5,ci,26784e5,ui,31556952e3),Q={init:function(t,e,i){e=e||"";var n,r,o,s,a,l=t.shift,h=e.indexOf("C")>-1,c=h?7:3,u=e.split(" "),d=[].concat(i),p=function(t){for(o=t.length;o--;)t[o]===Qe&&t.splice(o+1,0,t[o+1],t[o+2],t[o+1],t[o+2])};if(h&&(p(u),p(d)),t.isArea&&(s=u.splice(u.length-6,6),a=d.splice(d.length-6,6)),l<=d.length/c&&u.length===d.length)for(;l--;)d=[].concat(d).splice(0,c).concat(d);if(t.shift=0,u.length)for(n=d.length;u.length<n;)r=[].concat(u).splice(u.length-c,c),h&&(r[c-6]=r[c-2],r[c-5]=r[c-1]),u=u.concat(r);return s&&(u=u.concat(s),d=d.concat(a)),[u,d]},step:function(t,e,i,n){var r,o=[],s=t.length;if(1===i)o=n;else if(s===e.length&&1>i)for(;s--;)r=parseFloat(t[s]),o[s]=isNaN(r)?t[s]:i*parseFloat(e[s]-r)+r;else o=e;return o}},function(e){ge.HighchartsAdapter=ge.HighchartsAdapter||e&&{init:function(t){var i,n=e.fx,o=n.step,s=e.Tween,a=s&&s.propHooks,l=e.cssHooks.opacity;e.extend(e.easing,{easeOutQuad:function(t,e,i,n,r){return-n*(e/=r)*(e-2)+i}}),e.each(["cur","_default","width","height","opacity"],function(t,e){var i,r=o;"cur"===e?r=n.prototype:"_default"===e&&s&&(r=a[e],e="set"),i=r[e],i&&(r[e]=function(n){var r;return n=t?n:this,"align"!==n.prop?(r=n.elem,r.attr?r.attr(n.prop,"cur"===e?X:n.now):i.apply(this,arguments)):void 0})}),x(l,"get",function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)}),i=function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},s?a.d={set:i}:o.d=i,this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e.call(t[i],t[i],i,t)===!1)return i},e.fn.highcharts=function(){var t,e,i,n="Chart",o=arguments;return r(o[0])&&(n=o[0],o=Array.prototype.slice.call(o,1)),t=o[0],t!==X&&(t.chart=t.chart||{},t.chart.renderTo=this[0],i=new fi[n](t,o[1]),e=this),t===X&&(e=Be[d(this[0],"data-highcharts-chart")]),e}},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,i){return e(t)[i]()},grep:e.grep,map:function(t,e){for(var i=[],n=0,r=t.length;r>n;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(t){return e(t).offset()},addEvent:function(t,i,n){e(t).bind(i,n)},removeEvent:function(t,i,n){var r=fe.removeEventListener?"removeEventListener":"detachEvent";fe[r]&&t&&!t[r]&&(t[r]=function(){}),e(t).unbind(i,n)},fireEvent:function(i,n,r,o){var s,a=e.Event(n),l="detached"+n;!Le&&r&&(delete r.layerX,delete r.layerY),t(a,r),i[n]&&(i[l]=i[n],i[n]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(s=!0)}}}),e(i).trigger(a),i[l]&&(i[n]=i[l],i[l]=null),!o||a.isDefaultPrevented()||s||o(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===X&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,i,n){var r=e(t);t.style||(t.style={}),i.d&&(t.toD=i.d,i.d=1),r.stop(),i.opacity!==X&&t.attr&&(i.opacity+="px"),r.animate(i,n)},stop:function(t){e(t).stop()}}}(ge.jQuery);var gi=ge.HighchartsAdapter,mi=gi||{};gi&&gi.init.call(gi,Q);var vi=mi.adapterRun,bi=mi.getScript,yi=mi.inArray,xi=mi.each,wi=mi.grep,ki=mi.offset,Ci=mi.map,_i=mi.addEvent,Si=mi.removeEvent,Ti=mi.fireEvent,Mi=mi.washMouseEvent,Di=mi.animate,Li=mi.stop,Ai={enabled:!0,x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px"}};U={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","B","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/1.3.10/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/1.3.10/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(Ai,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":b(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Xe,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Xe,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:je,top:"1em"},style:{position:Xe,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Oe,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:ze?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Pi=U.plotOptions,Ii=Pi.line;O();var zi=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Hi=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Oi=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Ei=function(t){function i(t){t&&t.stops?h=Ci(t.stops,function(t){return Ei(t[1])}):(l=zi.exec(t),l?c=[n(l[1]),n(l[2]),n(l[3]),parseFloat(l[4],10)]:(l=Hi.exec(t),l?c=[n(l[1],16),n(l[2],16),n(l[3],16),1]:(l=Oi.exec(t),l&&(c=[n(l[1]),n(l[2]),n(l[3]),1]))))}function r(i){var n;return h?(n=e(t),n.stops=[].concat(n.stops),xi(h,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=c&&!isNaN(c[0])?"rgb"===i?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===i?c[3]:"rgba("+c.join(",")+")":t,n}function o(t){if(h)xi(h,function(e){e.brighten(t)});else if(a(t)&&0!==t){var e;for(e=0;3>e;e++)c[e]+=n(255*t),c[e]<0&&(c[e]=0),c[e]>255&&(c[e]=255)}return this}function s(t){return c[3]=t,this}var l,h,c=[];return i(t),{get:r,brighten:o,rgba:c,setOpacity:s}};N.prototype={init:function(t,e){var i=this;i.element="span"===e?m(e):fe.createElementNS(He,e),i.renderer=t,i.attrSetters={}},opacity:1,animate:function(t,i,n){var r=f(i,Z,!0);Li(this),r?(r=e(r,{}),n&&(r.complete=n),Di(this,t,r)):(this.attr(t),n&&n())},attr:function(t,e){var i,o,s,a,l,h,c,p,g,m=this,v=m.element,b=v.nodeName.toLowerCase(),y=m.renderer,x=m.attrSetters,w=m.shadows,k=m;if(r(t)&&u(e)&&(i=t,t={},t[i]=e),r(t))i=t,"circle"===b?i={x:"cx",y:"cy"}[i]||i:"strokeWidth"===i&&(i="stroke-width"),k=d(v,i)||m[i]||0,"d"!==i&&"visibility"!==i&&"fill"!==i&&(k=parseFloat(k));else{for(i in t)if(h=!1,o=t[i],s=x[i]&&x[i].call(m,o,i),s!==!1){if(s!==X&&(o=s),"d"===i)o&&o.join&&(o=o.join(" ")),/(NaN| {2}|^$)/.test(o)&&(o="M 0 0");else if("x"===i&&"text"===b)for(a=0;a<v.childNodes.length;a++)l=v.childNodes[a],d(l,"x")===d(v,"x")&&d(l,"x",o);else if(!m.rotation||"x"!==i&&"y"!==i)if("fill"===i)o=y.color(o,v,i);else if("circle"!==b||"x"!==i&&"y"!==i)if("rect"===b&&"r"===i)d(v,{rx:o,ry:o}),h=!0;else if("translateX"===i||"translateY"===i||"rotation"===i||"verticalAlign"===i||"scaleX"===i||"scaleY"===i)g=!0,h=!0;else if("stroke"===i)o=y.color(o,v,i);else if("dashstyle"===i){if(i="stroke-dasharray",o=o&&o.toLowerCase(),"solid"===o)o=Ze;else if(o){for(o=o.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),a=o.length;a--;)o[a]=n(o[a])*f(t["stroke-width"],m["stroke-width"]);o=o.join(",")}}else"width"===i?o=n(o):"align"===i?(i="text-anchor",o={left:"start",center:"middle",right:"end"}[o]):"title"===i&&(c=v.getElementsByTagName("title")[0],c||(c=fe.createElementNS(He,"title"),v.appendChild(c)),c.textContent=o);else i={x:"cx",y:"cy"}[i]||i;else g=!0;if("strokeWidth"===i&&(i="stroke-width"),("stroke-width"===i||"stroke"===i)&&(m[i]=o,m.stroke&&m["stroke-width"]?(d(v,"stroke",m.stroke),d(v,"stroke-width",m["stroke-width"]),m.hasStroke=!0):"stroke-width"===i&&0===o&&m.hasStroke&&(v.removeAttribute("stroke"),m.hasStroke=!1),h=!0),m.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(p||(m.symbolAttr(t),p=!0),h=!0),w&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i))for(a=w.length;a--;)d(w[a],i,"height"===i?xe(o-(w[a].cutHeight||0),0):o);("width"===i||"height"===i)&&"rect"===b&&0>o&&(o=0),m[i]=o,"text"===i?o!==m.textStr&&(delete m.bBox,m.textStr=o,m.added&&y.buildText(m)):h||void 0!==o&&v.setAttribute(i,o)}g&&m.updateTransform()}return k},addClass:function(t){var e=this.element,i=d(e,"class")||"";return-1===i.indexOf(t)&&d(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;xi(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){e[i]=f(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Ze)},crisp:function(t){var e,i,n=this,r={},o=t.strokeWidth||n.strokeWidth||n.attr&&n.attr("stroke-width")||0;i=ve(o)%2/2,t.x=be(t.x||n.x||0)+i,t.y=be(t.y||n.y||0)+i,t.width=be((t.width||n.width||0)-2*i),t.height=be((t.height||n.height||0)-2*i),t.strokeWidth=o;for(e in t)n[e]!==t[e]&&(n[e]=r[e]=t[e]);return r},css:function(e){var i,r,o,s=this,a=s.styles,l={},h=s.element,c="",u=!a;if(e&&e.color&&(e.fill=e.color),a)for(r in e)e[r]!==a[r]&&(l[r]=e[r],u=!0);if(u){if(i=s.textWidth=e&&e.width&&"text"===h.nodeName.toLowerCase()&&n(e.width),a&&(e=t(a,l)),s.styles=e,i&&(We||!Oe&&s.renderer.forExport)&&delete e.width,Le&&!Oe)g(s.element,e);else{o=function(t,e){return"-"+e.toLowerCase()};for(r in e)c+=r.replace(/([A-Z])/g,o)+":"+e[r]+";";d(h,"style",c)}i&&s.added&&s.renderer.buildText(s)}return s},on:function(t,e){var i=this,n=i.element;return q&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=Date.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===Me.indexOf("Android")||Date.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){var t=this;return t.inverted=!0,t.updateTransform(),t},updateTransform:function(){var t,e=this,i=e.translateX||0,n=e.translateY||0,r=e.scaleX,o=e.scaleY,s=e.inverted,a=e.rotation;s&&(i+=e.attr("width"),n+=e.attr("height")),t=["translate("+i+","+n+")"],s?t.push("rotate(90) scale(-1,1)"):a&&t.push("rotate("+a+" "+(e.x||0)+" "+(e.y||0)+")"),(u(r)||u(o))&&t.push("scale("+f(r,1)+" "+f(o,1)+")"),t.length&&d(e.element,"transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,o,s,a,l,h={},u=this.renderer,d=u.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,(!i||r(i))&&(this.alignTo=l=i||"renderer",c(d,this),d.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,l=this.alignTo),i=f(i,u[l],u),n=t.align,o=t.verticalAlign,s=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),("right"===n||"center"===n)&&(s+=(i.width-(t.width||0))/{right:1,center:2}[n]),h[e?"translateX":"x"]=ve(s),("bottom"===o||"middle"===o)&&(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[o]||1)),h[e?"translateY":"y"]=ve(a),this[this.placed?"animate":"attr"](h),this.placed=!0,this.alignAttr=h,this},getBBox:function(){var e,i,n,r=this,o=r.bBox,s=r.renderer,a=r.rotation,l=r.element,h=r.styles,c=a*Te,u=r.textStr;if((""===u||ti.test(u))&&(n=u.toString().length+(h?"|"+h.fontSize+"|"+h.fontFamily:""),o=s.cache[n]),!o){if(l.namespaceURI===He||s.forExport){try{o=l.getBBox?t({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight}}catch(d){}(!o||o.width<0)&&(o={width:0,height:0})}else o=r.htmlGetBBox();s.isSVG&&(e=o.width,i=o.height,Le&&h&&"11px"===h.fontSize&&"16.9"===i.toPrecision(3)&&(o.height=i=14),a&&(o.width=ke(i*_e(c))+ke(e*Ce(c)),o.height=ke(i*Ce(c))+ke(e*_e(c)))),r.bBox=o,n&&(s.cache[n]=o)}return o},show:function(t){return this.attr({visibility:t?"inherit":Ue})},hide:function(){return this.attr({visibility:qe})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.hide()}})},add:function(t){var e,i,r,o,s,a=this.renderer,l=t||a,h=l.element||a.box,c=this.element,p=this.zIndex;if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&a.buildText(this),p&&(l.handleZ=!0,p=n(p)),l.handleZ)for(e=h.childNodes,o=0;o<e.length;o++)if(i=e[o],r=d(i,"zIndex"),i!==c&&(n(r)>p||!u(p)&&u(r))){h.insertBefore(c,i),s=!0;break}return s||h.appendChild(c),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,r=n.element||{},o=n.shadows,s=n.renderer.isSVG&&"SPAN"===r.nodeName&&n.parentGroup;if(r.onclick=r.onmouseout=r.onmouseover=r.onmousemove=r.point=null,Li(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(r),o&&xi(o,function(t){n.safeRemoveChild(t)});s&&0===s.div.childNodes.length;)t=s.parentGroup,n.safeRemoveChild(s.div),delete s.div,s=t;n.alignTo&&c(n.renderer.alignedObjects,n);for(e in n)delete n[e];return null},shadow:function(t,e,i){var n,r,o,s,a,l,h=[],c=this.element;if(t){for(s=f(t.width,3),a=(t.opacity||.15)/s,l=this.parentInverted?"(-1,-1)":"("+f(t.offsetX,1)+", "+f(t.offsetY,1)+")",n=1;s>=n;n++)r=c.cloneNode(0),o=2*s+1-2*n,d(r,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":o,transform:"translate"+l,fill:Ze}),i&&(d(r,"height",xe(d(r,"height")-o,0)),r.cutHeight=o),e?e.element.appendChild(r):c.parentNode.insertBefore(r,c),h.push(r);this.shadows=h}return this}};var Wi=function(){this.init.apply(this,arguments)};Wi.prototype={Element:N,init:function(t,e,i,n,r){var o,s,a,l=this,h=location;o=l.createElement("svg").attr({version:"1.1"}).css(this.getStyle(n)),s=o.element,t.appendChild(s),-1===t.innerHTML.indexOf("xmlns")&&d(s,"xmlns",He),l.isSVG=!0,l.box=s,l.boxWrapper=o,l.alignedObjects=[],l.url=(Ie||Pe)&&fe.getElementsByTagName("base").length?h.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",a=this.createElement("desc").add(),a.element.appendChild(fe.createTextNode("Created with "+Fe+" "+Ye)),l.defs=this.createElement("defs").add(),l.forExport=r,l.gradients={},l.cache={},l.setSize(e,i,!1);var c,u;Ie&&t.getBoundingClientRect&&(l.subPixelFix=c=function(){g(t,{left:0,top:0}),u=t.getBoundingClientRect(),g(t,{left:ye(u.left)-u.left+Ke,top:ye(u.top)-u.top+Ke})},c(),_i(ge,"resize",c))},getStyle:function(e){return this.style=t({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this,e=t.defs;return t.box=null,t.boxWrapper=t.boxWrapper.destroy(),A(t.gradients||{}),t.gradients=null,e&&(t.defs=e.destroy()),t.subPixelFix&&Si(ge,"resize",t.subPixelFix),t.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e=t.element,i=this,r=i.forExport,o=f(t.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),s=e.childNodes,a=/<.*style="([^"]+)".*>/,l=/<.*href="(http[^"]+)".*>/,h=d(e,"x"),c=t.styles,u=t.textWidth,p=c&&c.lineHeight,m=s.length,v=function(t){return p?n(p):i.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:c.fontSize||11).h};m--;)e.removeChild(s[m]);u&&!t.added&&this.box.appendChild(e),""===o[o.length-1]&&o.pop(),xi(o,function(n,o){var s,p=0;n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),s=n.split("|||"),xi(s,function(n){if(""!==n||1===s.length){var f,m={},b=fe.createElementNS(He,"tspan");if(a.test(n)&&(f=n.match(a)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),d(b,"style",f)),l.test(n)&&!r&&(d(b,"onclick",'location.href="'+n.match(l)[1]+'"'),g(b,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==n&&(b.appendChild(fe.createTextNode(n)),p?m.dx=0:m.x=h,d(b,m),!p&&o&&(!Oe&&r&&g(b,{display:"block"}),d(b,"dy",v(b),Pe&&b.offsetHeight)),e.appendChild(b),p++,u))for(var y,x,w,k=n.replace(/([^\^])-/g,"$1- ").split(" "),C=k.length>1&&"nowrap"!==c.whiteSpace,_=t._clipHeight,S=[],T=v(),M=1;C&&(k.length||S.length);)delete t.bBox,w=t.getBBox(),x=w.width,!Oe&&i.forExport&&(x=i.measureSpanWidth(b.firstChild.data,t.styles)),y=x>u,y&&1!==k.length?(b.removeChild(b.firstChild),S.unshift(k.pop())):(k=S,S=[],k.length&&(M++,_&&M*T>_?(k=["..."],t.attr("title",t.textStr)):(b=fe.createElementNS(He,"tspan"),d(b,{dy:T,x:h}),f&&d(b,"style",f),e.appendChild(b),x>u&&(u=x)))),k.length&&b.appendChild(fe.createTextNode(k.join(" ").replace(/- /g,"-")))}})})},button:function(i,n,r,o,s,a,l,h,c){var u,d,p,f,g,m,v=this.label(i,n,r,c,null,null,null,null,"button"),b=0,y="style",x={x1:0,y1:0,x2:0,y2:1};return s=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:x,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},s),p=s[y],delete s[y],a=e(s,{stroke:"#68A",fill:{linearGradient:x,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),f=a[y],delete a[y],l=e(s,{stroke:"#68A",fill:{linearGradient:x,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),g=l[y],delete l[y],h=e(s,{style:{color:"#CCC"}},h),m=h[y],delete h[y],_i(v.element,Le?"mouseover":"mouseenter",function(){3!==b&&v.attr(a).css(f)}),_i(v.element,Le?"mouseout":"mouseleave",function(){3!==b&&(u=[s,a,l][b],d=[p,f,g][b],v.attr(u).css(d))}),v.setState=function(t){v.state=b=t,t?2===t?v.attr(l).css(g):3===t&&v.attr(h).css(m):v.attr(s).css(p)},v.on("click",function(){3!==b&&o.call(v)}).attr(s).css(t({cursor:"default"},p))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=ve(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=ve(t[2])+e%2/2),t},path:function(e){var i={fill:Ze};return s(e)?i.d=e:o(e)&&t(i,e),this.createElement("path").attr(i)},circle:function(t,e,i){var n=o(t)?t:{x:t,y:e,r:i};return this.createElement("circle").attr(n)},arc:function(t,e,i,n,r,s){var a;return o(t)&&(e=t.y,i=t.r,n=t.innerR,r=t.start,s=t.end,t=t.x),a=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:r||0,end:s||0}),a.r=i,a},rect:function(t,e,i,n,r,s){r=o(t)?t.r:r;var a=this.createElement("rect"),l=o(t)?t:t===X?{}:{x:t,y:e,width:xe(i,0),height:xe(n,0)};return s!==X&&(l.strokeWidth=s,l=a.crisp(l)),r&&(l.r=r),a.attr(l)},setSize:function(t,e,i){var n=this,r=n.alignedObjects,o=r.length;for(n.width=t,n.height=e,n.boxWrapper[f(i,!0)?"animate":"attr"]({width:t,height:e});o--;)r[o].align()},g:function(t){var e=this.createElement("g");return u(t)?e.attr({"class":Ve+t}):e},image:function(e,i,n,r,o){var s,a={preserveAspectRatio:Ze};return arguments.length>1&&t(a,{x:i,y:n,width:r,height:o}),s=this.createElement("image").attr(a),s.element.setAttributeNS?s.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):s.element.setAttribute("hc-svg-href",e),s},symbol:function(e,i,n,r,o,s){var a,l,h,c,u,d=this.symbols[e],p=d&&d(ve(i),ve(n),r,o,s),f=/^url\((.*?)\)$/;return p?(a=this.path(p),t(a,{symbolName:e,x:i,y:n,width:r,height:o}),s&&t(a,s)):f.test(e)&&(u=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(ve((r-e[0])/2),ve((o-e[1])/2)))},h=e.match(f)[1],c=Ne[h],a=this.image(h).attr({x:i,y:n}),a.isImg=!0,c?u(a,c):(a.attr({width:0,height:0}),l=m("img",{onload:function(){u(a,Ne[h]=[this.width,this.height])},src:h}))),a},symbols:{circle:function(t,e,i,n){var r=.166*i;return[Qe,t+i/2,e,"C",t+i+r,e,t+i+r,e+n,t+i/2,e+n,"C",t-r,e+n,t-r,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[Qe,t,e,Je,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[Qe,t+i/2,e,Je,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[Qe,t,e,Je,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[Qe,t+i/2,e,Je,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,r){var o=r.start,s=r.r||i||n,a=r.end-.001,l=r.innerR,h=r.open,c=Ce(o),u=_e(o),d=Ce(a),p=_e(a),f=r.end-o<Se?0:1;return[Qe,t+s*c,e+s*u,"A",s,s,0,f,1,t+s*d,e+s*p,h?Qe:Je,t+l*d,e+l*p,"A",l,l,0,f,0,t+l*c,e+l*u,h?"":"Z"]}},clipRect:function(t,e,i,n){var r,o=Ve+Re++,s=this.createElement("clipPath").attr({id:o}).add(this.defs);return r=this.rect(t,e,i,n,0).add(s),r.id=o,r.clipPath=s,r},color:function(t,i,n){var r,o,a,l,h,c,p,f,g,m,v,b=this,y=/^rgba/,x=[];if(t&&t.linearGradient?o="linearGradient":t&&t.radialGradient&&(o="radialGradient"),o){a=t[o],l=b.gradients,c=t.stops,g=i.radialReference,s(a)&&(t[o]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&g&&!u(a.gradientUnits)&&(a=e(a,{cx:g[0]-g[2]/2+a.cx*g[2],cy:g[1]-g[2]/2+a.cy*g[2],r:a.r*g[2],gradientUnits:"userSpaceOnUse"}));for(m in a)"id"!==m&&x.push(m,a[m]);for(m in c)x.push(c[m]);return x=x.join(","),l[x]?v=l[x].id:(a.id=v=Ve+Re++,l[x]=h=b.createElement(o).attr(a).add(b.defs),h.stops=[],xi(c,function(t){var e;y.test(t[1])?(r=Ei(t[1]),p=r.get("rgb"),f=r.get("a")):(p=t[1],f=1),e=b.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":f}).add(h),h.stops.push(e)})),"url("+b.url+"#"+v+")"}return y.test(t)?(r=Ei(t),d(i,n+"-opacity",r.get("a")),r.get("rgb")):(i.removeAttribute(n+"-opacity"),t)},text:function(t,e,i,n){var r,o=this,s=We||!Oe&&o.forExport;return n&&!o.forExport?o.html(t,e,i):(e=ve(f(e,0)),i=ve(f(i,0)),r=o.createElement("text").attr({x:e,y:i,text:t}),s&&r.css({position:Xe}),r.x=e,r.y=i,r)},fontMetrics:function(t){t=t||this.style.fontSize,t=/px/.test(t)?n(t):/em/.test(t)?12*parseFloat(t):12;var e=24>t?t+4:ve(1.2*t),i=ve(.8*e);return{h:e,b:i}},label:function(i,n,r,o,s,a,l,h,c){function d(){var t,i,n=S.element.style;m=(void 0===v||void 0===b||_.styles.textAlign)&&S.textStr&&S.getBBox(),_.width=(v||m.width||0)+2*M+D,_.height=(b||m.height||0)+2*M,w=M+C.fontMetrics(n&&n.fontSize).b,k&&(g||(t=ve(-T*M),i=h?-w:0,_.box=g=o?C.symbol(o,t,i,_.width,_.height,A):C.rect(t,i,_.width,_.height,0,A[di]),g.attr("fill",Ze).add(_)),g.isImg||g.attr(e({width:_.width,height:_.height},A)),A=null)}function p(){var t,e=_.styles,i=e&&e.textAlign,n=D+M*(1-T);t=h?0:w,u(v)&&m&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(v-m.width)),(n!==S.x||t!==S.y)&&S.attr({x:n,y:t}),S.x=n,S.y=t}function f(t,e){g?g.attr(t,e):A[t]=e}var g,m,v,b,y,x,w,k,C=this,_=C.g(c),S=C.text("",0,0,l).attr({zIndex:1}),T=0,M=3,D=0,L=0,A={},P=_.attrSetters;_.onAdd=function(){S.add(_),_.attr({text:i,x:n,y:r}),g&&u(s)&&_.attr({anchorX:s,anchorY:a})},P.width=function(t){return v=t,!1},P.height=function(t){return b=t,!1},P.padding=function(t){return u(t)&&t!==M&&(M=t,p()),!1},P.paddingLeft=function(t){return u(t)&&t!==D&&(D=t,p()),!1},P.align=function(t){return T={left:0,center:.5,right:1}[t],!1},P.text=function(t,e){return S.attr(e,t),d(),p(),!1},P[di]=function(t,e){return t&&(k=!0),L=t%2/2,f(e,t),!1},P.stroke=P.fill=P.r=function(t,e){return"fill"===e&&t&&(k=!0),f(e,t),!1},P.anchorX=function(t,e){return s=t,f(e,t+L-y),!1},P.anchorY=function(t,e){return a=t,f(e,t-x),!1},P.x=function(t){return _.x=t,t-=T*((v||m.width)+M),y=ve(t),_.attr("translateX",y),!1},P.y=function(t){return x=_.y=ve(t),_.attr("translateY",x),!1};var I=_.css;return t(_,{css:function(t){if(t){var i={};t=e(t),xi(["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow"],function(e){t[e]!==X&&(i[e]=t[e],delete t[e])}),S.css(i)}return I.call(_,t)},getBBox:function(){return{width:m.width+2*M,height:m.height+2*M,x:m.x-M,y:m.y-M}},shadow:function(t){return g&&g.shadow(t),_},destroy:function(){Si(_.element,"mouseenter"),Si(_.element,"mouseleave"),S&&(S=S.destroy()),g&&(g=g.destroy()),N.prototype.destroy.call(_),_=C=d=p=f=null}})}},j=Wi,t(N.prototype,{htmlCss:function(e){var i=this,n=i.element,r=e&&"SPAN"===n.tagName&&e.width;return r&&(delete e.width,i.textWidth=r,i.updateTransform()),i.styles=t(i.styles,e),g(i.element,e),i},htmlGetBBox:function(){var t=this,e=t.element,i=t.bBox;return i||("text"===e.nodeName&&(e.style.position=Xe),i=t.bBox={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}),i},htmlUpdateTransform:function(){if(!this.added)return this.alignOnAdd=!0,void 0;var t=this,e=t.renderer,i=t.element,r=t.translateX||0,o=t.translateY||0,s=t.x||0,a=t.y||0,l=t.textAlign||"left",h={left:0,center:.5,right:1}[l],c=t.shadows;if(g(i,{marginLeft:r,marginTop:o}),c&&xi(c,function(t){g(t,{marginLeft:r+1,marginTop:o+1})
}),t.inverted&&xi(i.childNodes,function(t){e.invertChild(t,i)}),"SPAN"===i.tagName){var d,p,m=t.rotation,v=n(t.textWidth),b=[m,l,i.innerHTML,t.textWidth].join(",");b!==t.cTT&&(p=e.fontMetrics(i.style.fontSize).b,u(m)&&t.setSpanRotation(m,h,p),d=f(t.elemWidth,i.offsetWidth),d>v&&/[ \-]/.test(i.textContent||i.innerText)&&(g(i,{width:v+Ke,display:"block",whiteSpace:"normal"}),d=v),t.getSpanCorrection(d,p,h,m,l)),g(i,{left:s+(t.xCorr||0)+Ke,top:a+(t.yCorr||0)+Ke}),Pe&&(p=i.offsetHeight),t.cTT=b}},setSpanRotation:function(t,e,i){var n={},r=Le?"-ms-transform":Pe?"-webkit-transform":Ie?"MozTransform":De?"-o-transform":"";n[r]=n.transform="rotate("+t+"deg)",n[r+(Ie?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",g(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),t(Wi.prototype,{html:function(e,i,n){var r=this.createElement("span"),o=r.attrSetters,s=r.element,a=r.renderer;return o.text=function(t){return t!==s.innerHTML&&delete this.bBox,s.innerHTML=this.textStr=t,!1},o.x=o.y=o.align=o.rotation=function(t,e){return"align"===e&&(e="textAlign"),r[e]=t,r.htmlUpdateTransform(),!1},r.attr({text:e,x:ve(i),y:ve(n)}).css({position:Xe,whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),r.css=r.htmlCss,a.isSVG&&(r.add=function(e){var i,n,o=a.box.parentNode,l=[];if(this.parentGroup=e,e){if(i=e.div,!i){for(n=e;n;)l.push(n),n=n.parentGroup;xi(l.reverse(),function(e){var n;i=e.div=e.div||m(Ge,{className:d(e.element,"class")},{position:Xe,left:(e.translateX||0)+Ke,top:(e.translateY||0)+Ke},i||o),n=i.style,t(e.attrSetters,{translateX:function(t){n.left=t+Ke},translateY:function(t){n.top=t+Ke},visibility:function(t,e){n[e]=t}})})}}else i=o;return i.appendChild(s),r.added=!0,r.alignOnAdd&&r.htmlUpdateTransform(),r}),r}});var Ni,Ri;if(!Oe&&!We){fi.VMLElement=Ri={init:function(t,e){var i=this,n=["<",e,' filled="f" stroked="f"'],r=["position: ",Xe,";"],o=e===Ge;("shape"===e||o)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",o?qe:Ue),n.push(' style="',r.join(""),'"/>'),e&&(n=o||"span"===e||"img"===e?n.join(""):t.prepVML(n),i.element=m(n)),i.renderer=t,i.attrSetters={}},add:function(t){var e=this,i=e.renderer,n=e.element,r=i.box,o=t&&t.inverted,s=t?t.element||t:r;return o&&i.invertChild(n,s),s.appendChild(n),e.added=!0,e.alignOnAdd&&!e.deferUpdateTransform&&e.updateTransform(),e.onAdd&&e.onAdd(),e},updateTransform:N.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=Ce(t*Te),i=_e(t*Te);g(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):Ze})},getSpanCorrection:function(t,e,i,n,r){var o,s=n?Ce(n*Te):1,a=n?_e(n*Te):0,l=f(this.elemHeight,this.element.offsetHeight),h=r&&"left"!==r;this.xCorr=0>s&&-t,this.yCorr=0>a&&-l,o=0>s*a,this.xCorr+=a*e*(o?1-i:i),this.yCorr-=s*e*(n?o?i:1-i:1),h&&(this.xCorr-=t*i*(0>s?-1:1),n&&(this.yCorr-=l*i*(0>a?-1:1)),g(this.element,{textAlign:r}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)a(t[e])?i[e]=ve(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},attr:function(t,e){var i,n,o,s,l,h,c=this,p=c.element||{},f=p.style,g=p.nodeName,v=c.renderer,b=c.symbolName,y=c.shadows,x=c.attrSetters,w=c;if(r(t)&&u(e)&&(i=t,t={},t[i]=e),r(t))i=t,w="strokeWidth"===i||"stroke-width"===i?c.strokeweight:c[i];else for(i in t)if(n=t[i],h=!1,s=x[i]&&x[i].call(c,n,i),s!==!1&&null!==n){if(s!==X&&(n=s),b&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(i))l||(c.symbolAttr(t),l=!0),h=!0;else if("d"===i){if(n=n||[],c.d=n.join(" "),p.path=n=c.pathToVML(n),y)for(o=y.length;o--;)y[o].path=y[o].cutOff?this.cutOffPath(n,y[o].cutOff):n;h=!0}else if("visibility"===i){if("inherit"===n&&(n=Ue),y)for(o=y.length;o--;)y[o].style[i]=n;"DIV"===g&&(n=n===qe?"-999em":0,Ae||(f[i]=n?Ue:qe),i="top"),f[i]=n,h=!0}else if("zIndex"===i)n&&(f[i]=n),h=!0;else if(-1!==yi(i,["x","y","width","height"]))c[i]=n,"x"===i||"y"===i?i={x:"left",y:"top"}[i]:n=xe(0,n),c.updateClipping?(c[i]=n,c.updateClipping()):f[i]=n,h=!0;else if("class"===i&&"DIV"===g)p.className=n;else if("stroke"===i)n=v.color(n,p,i),i="strokecolor";else if("stroke-width"===i||"strokeWidth"===i)p.stroked=n?!0:!1,i="strokeweight",c[i]=n,a(n)&&(n+=Ke);else if("dashstyle"===i){var k=p.getElementsByTagName("stroke")[0]||m(v.prepVML(["<stroke/>"]),null,null,p);k[i]=n||"solid",c.dashstyle=n,h=!0}else"fill"===i?"SPAN"===g?f.color=n:"IMG"!==g&&(p.filled=n!==Ze?!0:!1,n=v.color(n,p,i,c),i="fillcolor"):"opacity"===i?h=!0:"shape"===g&&"rotation"===i?(c[i]=p.style[i]=n,p.style.left=-ve(_e(n*Te)+1)+Ke,p.style.top=ve(Ce(n*Te))+Ke):("translateX"===i||"translateY"===i||"rotation"===i)&&(c[i]=n,c.updateTransform(),h=!0);h||(Ae?p[i]=n:d(p,i,n))}return w},clip:function(t){var e,i,n=this;return t?(e=t.members,c(e,n),e.push(n),n.destroyClip=function(){c(e,n)},i=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:Ae?"inherit":"rect(auto)"}),n.css(i)},css:N.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&P(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),N.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=ge.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i;return t=t.split(/[ ,]/),i=t.length,(9===i||11===i)&&(t[i-4]=t[i-2]=n(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var r,o,s,a,l,h,c,u=[],d=this.element,p=this.renderer,g=d.style,v=d.path;if(v&&"string"!=typeof v.value&&(v="x"),l=v,t){for(h=f(t.width,3),c=(t.opacity||.15)/h,r=1;3>=r;r++)a=2*h+1-2*r,i&&(l=this.cutOffPath(v.value,a+.5)),s=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',d.style.cssText,'" />'],o=m(p.prepVML(s),null,{left:n(g.left)+f(t.offsetX,1),top:n(g.top)+f(t.offsetY,1)}),i&&(o.cutOff=a+1),s=['<stroke color="',t.color||"black",'" opacity="',c*r,'"/>'],m(p.prepVML(s),null,null,o),e?e.element.appendChild(o):d.parentNode.insertBefore(o,d),u.push(o);this.shadows=u}return this}},Ri=v(N,Ri);var $i={Element:Ri,isIE8:Me.indexOf("MSIE 8.0")>-1,init:function(e,i,n,r){var o,s,a,l=this;if(l.alignedObjects=[],o=l.createElement(Ge).css(t(this.getStyle(r),{position:je})),s=o.element,e.appendChild(o.element),l.isVML=!0,l.box=s,l.boxWrapper=o,l.cache={},l.setSize(i,n,!1),!fe.namespaces.hcv){fe.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{fe.createStyleSheet().cssText=a}catch(h){fe.styleSheets[0].cssText+=a}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,i,n,r){var s=this.createElement(),a=o(e);return t(s,{members:[],left:(a?e.x:e)+1,top:(a?e.y:i)+1,width:(a?e.width:n)-1,height:(a?e.height:r)-1,getCSS:function(e){var i=e.element,n=i.nodeName,r="shape"===n,o=e.inverted,s=this,a=s.top-(r?i.offsetTop:0),l=s.left,h=l+s.width,c=a+s.height,u={clip:"rect("+ve(o?l:a)+"px,"+ve(o?c:h)+"px,"+ve(o?h:c)+"px,"+ve(o?a:l)+"px)"};return!o&&Ae&&"DIV"===n&&t(u,{width:h+Ke,height:c+Ke}),u},updateClipping:function(){xi(s.members,function(t){t.css(s.getCSS(t))})}})},color:function(t,e,i,n){var r,o,s,a=this,l=/^rgba/,h=Ze;if(t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s){var c,u,d,p,f,g,v,b,y,x,w,k,C=t.linearGradient||t.radialGradient,_="",S=t.stops,T=[],M=function(){o=['<fill colors="'+T.join(",")+'" opacity="',b,'" o:opacity2="',v,'" type="',s,'" ',_,'focus="100%" method="any" />'],m(a.prepVML(o),null,null,e)};if(w=S[0],k=S[S.length-1],w[0]>0&&S.unshift([0,w[1]]),k[0]<1&&S.push([1,k[1]]),xi(S,function(t,e){l.test(t[1])?(r=Ei(t[1]),c=r.get("rgb"),u=r.get("a")):(c=t[1],u=1),T.push(100*t[0]+"% "+c),e?(b=u,y=c):(v=u,x=c)}),"fill"===i)if("gradient"===s)d=C.x1||C[0]||0,p=C.y1||C[1]||0,f=C.x2||C[2]||0,g=C.y2||C[3]||0,_='angle="'+(90-180*me.atan((g-p)/(f-d))/Se)+'"',M();else{var D,L=C.r,A=2*L,P=2*L,I=C.cx,z=C.cy,H=e.radialReference,O=function(){H&&(D=n.getBBox(),I+=(H[0]-D.x)/D.width-.5,z+=(H[1]-D.y)/D.height-.5,A*=H[2]/D.width,P*=H[2]/D.height),_='src="'+U.global.VMLRadialGradientURL+'" size="'+A+","+P+'" origin="0.5,0.5" position="'+I+","+z+'" color2="'+x+'" ',M()};n.added?O():n.onAdd=O,h=y}else h=c}else if(l.test(t)&&"IMG"!==e.tagName)r=Ei(t),o=["<",i,' opacity="',r.get("a"),'"/>'],m(this.prepVML(o),null,null,e),h=r.get("rgb");else{var E=e.getElementsByTagName(i);E.length&&(E[0].opacity=1,E[0].type="solid"),h=t}return h},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),i?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e)):t=t.replace("<","<hcv:"),t},text:Wi.prototype.html,path:function(e){var i={coordsize:"10 10"};return s(e)?i.d=e:o(e)&&t(i,e),this.createElement("shape").attr(i)},circle:function(t,e,i){var n=this.symbol("circle");return o(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e,i;return t&&(i={className:Ve+t,"class":Ve+t}),e=this.createElement(Ge).attr(i)},image:function(t,e,i,n,r){var o=this.createElement("img").attr({src:t});return arguments.length>1&&o.attr({x:e,y:i,width:n,height:r}),o},createElement:function(t){return"rect"===t?this.symbol(t):Wi.prototype.createElement.call(this,t)},invertChild:function(t,e){var i=this,r=e.style,o="IMG"===t.tagName&&t.style;g(t,{flip:"x",left:n(r.width)-(o?n(o.top):1),top:n(r.height)-(o?n(o.left):1),rotation:-90}),xi(t.childNodes,function(e){i.invertChild(e,t)})},symbols:{arc:function(t,e,i,n,r){var o,s=r.start,a=r.end,l=r.r||i||n,h=r.innerR,c=Ce(s),u=_e(s),d=Ce(a),p=_e(a);return 0===a-s?["x"]:(o=["wa",t-l,e-l,t+l,e+l,t+l*c,e+l*u,t+l*d,e+l*p],r.open&&!h&&o.push("e",Qe,t,e),o.push("at",t-h,e-h,t+h,e+h,t+h*d,e+h*p,t+h*c,e+h*u,"x","e"),o.isArc=!0,o)},circle:function(t,e,i,n,r){return r&&(i=n=2*r.r),r&&r.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,r){var o,s,a=t+i,l=e+n;return u(r)&&r.r?(s=we(r.r,i,n),o=[Qe,t+s,e,Je,a-s,e,"wa",a-2*s,e,a,e+2*s,a-s,e,a,e+s,Je,a,l-s,"wa",a-2*s,l-2*s,a,l,a,l-s,a-s,l,Je,t+s,l,"wa",t,l-2*s,t+2*s,l,t+s,l,t,l-s,Je,t,e+s,"wa",t,e,t+2*s,e+2*s,t,e+s,t+s,e,"x","e"]):o=Wi.prototype.symbols.square.apply(0,arguments),o}}};fi.VMLRenderer=Ni=function(){this.init.apply(this,arguments)},Ni.prototype=e(Wi.prototype,$i),j=Ni}Wi.prototype.measureSpanWidth=function(t,e){var i,n=fe.createElement("span"),r=fe.createTextNode(t);return n.appendChild(r),g(n,e),this.box.appendChild(n),i=n.offsetWidth,P(n),i};var Bi,Fi;We&&(fi.CanVGRenderer=Bi=function(){He="http://www.w3.org/1999/xhtml"},Bi.prototype.symbols={},Fi=function(){function t(){var t,i=e.length;for(t=0;i>t;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&bi(n,t),e.push(i)}}}(),j=Bi),R.prototype={addLabel:function(){var e,i,n,r,o=this,s=o.axis,l=s.options,c=s.chart,d=s.horiz,p=s.categories,g=s.names,m=o.pos,v=l.labels,b=s.tickPositions,y=d&&p&&!v.step&&!v.staggerLines&&!v.rotation&&c.plotWidth/b.length||!d&&(c.margin[3]||.33*c.chartWidth),x=m===b[0],w=m===b[b.length-1],k=p?f(p[m],g[m],m):m,C=o.label,_=b.info;s.isDatetimeAxis&&_&&(r=l.dateTimeLabelFormats[_.higherRanks[m]||_.unitName]),o.isFirst=x,o.isLast=w,e=s.labelFormatter.call({axis:s,chart:c,isFirst:x,isLast:w,dateTimeLabelFormat:r,value:s.isLog?z(h(k)):k}),x?e="<span class='highcharts-first-label'>"+e+"</span>":w&&(e="<span class='highcharts-last-label'>"+e+"</span>"),i=y&&{width:xe(1,ve(y-2*(v.padding||10)))+Ke},i=t(i,v.style),u(C)?C&&C.attr({text:e}).css(i):(n={align:s.labelAlign},a(v.rotation)&&(n.rotation=v.rotation),y&&v.ellipsis&&(n._clipHeight=s.len/b.length),o.label=u(e)&&v.enabled?c.renderer.text(e,0,0,v.useHTML).attr(n).css(i).add(s.labelGroup):null)},getLabelSize:function(){var t=this.label,e=this.axis;return t?t.getBBox()[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.label.getBBox(),e=this.axis,i=e.horiz,n=e.options,r=n.labels,o=i?t.width:t.height,s=i?r.x-o*{left:0,center:.5,right:1}[e.labelAlign]:0,a=i?o+s:o;return[s,a]},handleOverflow:function(t,e){var i,n,r,o,s,a=!0,l=this.axis,h=this.isFirst,c=this.isLast,u=l.horiz,d=u?e.x:e.y,p=l.reversed,f=l.tickPositions,g=this.getLabelSides(),m=g[0],v=g[1],b=this.label.line||0,y=l.labelEdge,x=l.justifyLabels&&(h||c);if(y[b]===X||d+m>y[b]?y[b]=d+v:x||(a=!1),x){s=l.justifyToPlot,i=s?l.pos:0,n=s?i+l.len:l.chart.chartWidth;do t+=h?1:-1,r=l.ticks[f[t]];while(f[t]&&(!r||r.label.line!==b));o=r&&r.label.xy&&r.label.xy.x+r.getLabelSides()[h?0:1],h&&!p||c&&p?i>d+m&&(d=i-m,r&&d+v>o&&(a=!1)):d+v>n&&(d=n-v,r&&o>d+m&&(a=!1)),e.x=d}return a},getPosition:function(t,e,i,n){var r=this.axis,o=r.chart,s=n&&o.oldChartHeight||o.chartHeight;return{x:t?r.translate(e+i,null,null,n)+r.transB:r.left+r.offset+(r.opposite?(n&&o.oldChartWidth||o.chartWidth)-r.right-r.left:0),y:t?s-r.bottom+r.offset-(r.opposite?r.height:0):s-r.translate(e+i,null,null,n)-r.transB}},getLabelPosition:function(t,e,i,n,r,o,s,a){var l=this.axis,h=l.transA,c=l.reversed,d=l.staggerLines,p=l.chart.renderer.fontMetrics(r.style.fontSize).b,f=r.rotation;return t=t+r.x-(o&&n?o*h*(c?-1:1):0),e=e+r.y-(o&&!n?o*h*(c?1:-1):0),f&&2===l.side&&(e-=p-p*Ce(f*Te)),u(r.y)||f||(e+=p-i.getBBox().height/2),d&&(i.line=s/(a||1)%d,e+=i.line*(l.labelOffset/d)),{x:t,y:e}},getMarkPath:function(t,e,i,n,r,o){return o.crispLine([Qe,t,e,Je,t+(r?0:-i),e+(r?i:0)],n)},render:function(t,e,i){var n,r,o,s=this,a=s.axis,l=a.options,h=a.chart,c=h.renderer,u=a.horiz,d=s.type,p=s.label,g=s.pos,m=l.labels,v=s.gridLine,b=d?d+"Grid":"grid",y=d?d+"Tick":"tick",x=l[b+"LineWidth"],w=l[b+"LineColor"],k=l[b+"LineDashStyle"],C=l[y+"Length"],_=l[y+"Width"]||0,S=l[y+"Color"],T=l[y+"Position"],M=s.mark,D=m.step,L=!0,A=a.tickmarkOffset,P=s.getPosition(u,g,A,e),I=P.x,z=P.y,H=u&&I===a.pos+a.len||!u&&z===a.pos?-1:1;this.isActive=!0,x&&(n=a.getPlotLinePath(g+A,x*H,e,!0),v===X&&(o={stroke:w,"stroke-width":x},k&&(o.dashstyle=k),d||(o.zIndex=1),e&&(o.opacity=0),s.gridLine=v=x?c.path(n).attr(o).add(a.gridGroup):null),!e&&v&&n&&v[s.isNew?"attr":"animate"]({d:n,opacity:i})),_&&C&&("inside"===T&&(C=-C),a.opposite&&(C=-C),r=s.getMarkPath(I,z,C,_*H,u,c),M?M.animate({d:r,opacity:i}):s.mark=c.path(r).attr({stroke:S,"stroke-width":_,opacity:i}).add(a.axisGroup)),p&&!isNaN(I)&&(p.xy=P=s.getLabelPosition(I,z,p,u,m,A,t,D),s.isFirst&&!s.isLast&&!f(l.showFirstLabel,1)||s.isLast&&!s.isFirst&&!f(l.showLastLabel,1)?L=!1:a.isRadial||m.step||m.rotation||e||0===i||(L=s.handleOverflow(t,P)),D&&t%D&&(L=!1),L&&!isNaN(P.y)?(P.opacity=i,p[s.isNew?"attr":"animate"](P),s.isNew=!1):p.attr("y",-9999))},destroy:function(){A(this,this.axis)}},fi.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},fi.PlotLineOrBand.prototype={render:function(){var t,i,n,r,o,s,a,h=this,c=h.axis,d=c.horiz,p=(c.pointRange||0)/2,g=h.options,m=g.label,v=h.label,b=g.width,y=g.to,x=g.from,w=u(x)&&u(y),k=g.value,C=g.dashStyle,_=h.svgElem,S=[],T=g.color,M=g.zIndex,A=g.events,P=c.chart.renderer;if(c.isLog&&(x=l(x),y=l(y),k=l(k)),b)S=c.getPlotLinePath(k,b),a={stroke:T,"stroke-width":b},C&&(a.dashstyle=C);else{if(!w)return;x=xe(x,c.min-p),y=we(y,c.max+p),S=c.getPlotBandPath(x,y,g),a={fill:T},g.borderWidth&&(a.stroke=g.borderColor,a["stroke-width"]=g.borderWidth)}if(u(M)&&(a.zIndex=M),_)S?_.animate({d:S},null,_.onGetPath):(_.hide(),_.onGetPath=function(){_.show()},v&&(h.label=v=v.destroy()));else if(S&&S.length&&(h.svgElem=_=P.path(S).attr(a).add(),A)){t=function(t){_.on(t,function(e){A[t].apply(h,[e])})};for(i in A)t(i)}return m&&u(m.text)&&S&&S.length&&c.width>0&&c.height>0?(m=e({align:d&&w&&"center",x:d?!w&&4:10,verticalAlign:!d&&w&&"middle",y:d?w?16:10:w?6:-4,rotation:d&&!w&&90},m),v||(h.label=v=P.text(m.text,0,0,m.useHTML).attr({align:m.textAlign||m.align,rotation:m.rotation,zIndex:M}).css(m.style).add()),n=[S[1],S[4],f(S[6],S[1])],r=[S[2],S[5],f(S[7],S[2])],o=D(n),s=D(r),v.align(m,!1,{x:o,y:s,width:L(n)-o,height:L(r)-s}),v.show()):v&&v.hide(),h},destroy:function(){c(this.axis.plotLinesAndBands,this),delete this.axis,A(this)}},te={getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e),n=this.getPlotLinePath(t);return n&&i?n.push(i[4],i[5],i[1],i[2]):n=null,n},addPlotBand:function(t){this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new fi.PlotLineOrBand(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,r=e.length;r--;)e[r].id===t&&e[r].destroy();xi([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){for(r=e.length;r--;)e[r].id===t&&c(e,e[r])})}},$.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Ai,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return b(this.total,-1)},style:Ai.style}},defaultLeftAxisOptions:{labels:{x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-5},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this;n.horiz=t.inverted?!i:i,n.isXAxis=i,n.coll=i?"xAxis":"yAxis",n.opposite=e.opposite,n.side=e.side||(n.horiz?n.opposite?0:2:n.opposite?1:3),n.setOptions(e);var r=this.options,o=r.type,s="datetime"===o;n.labelFormatter=r.labels.formatter||n.defaultLabelFormatter,n.userOptions=e,n.minPixelPadding=0,n.chart=t,n.reversed=r.reversed,n.zoomEnabled=r.zoomEnabled!==!1,n.categories=r.categories||"category"===o,n.names=[],n.isLog="logarithmic"===o,n.isDatetimeAxis=s,n.isLinked=u(r.linkedTo),n.tickmarkOffset=n.categories&&"between"===r.tickmarkPlacement?.5:0,n.ticks={},n.labelEdge=[],n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=r.minRange||r.maxZoom,n.range=r.range,n.offset=r.offset||0,n.stacks={},n.oldStacks={},n.max=null,n.min=null,n.crosshair=f(r.crosshair,p(t.options.tooltip.crosshairs)[i?0:1],!1);var a,c=n.options.events;-1===yi(n,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,n):t.axes.push(n),t[n.coll].push(n)),n.series=n.series||[],t.inverted&&i&&n.reversed===X&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine;for(a in c)_i(n,a,c[a]);n.isLog&&(n.val2lin=l,n.lin2val=h)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(U[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,r=i.categories,o=this.dateTimeLabelFormat,s=U.lang.numericSymbols,a=s&&s.length,l=i.options.labels.format,h=i.isLog?n:i.tickInterval;if(l)e=C(l,this);else if(r)e=n;else if(o)e=K(o,n);else if(a&&h>=1e3)for(;a--&&e===X;)t=Math.pow(1e3,a+1),h>=t&&null!==s[a]&&(e=i.options&&i.options.labels&&i.options.labels.isMoney?b(n/t,-1,void 0,void 0,!0)+s[a]:b(n/t,-1)+s[a]);return e===X&&(e=n>=1e4?b(n,0):b(n,-1,X,"")),e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=null,t.buildStacks&&t.buildStacks(),xi(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n,r,o,s=i.options,a=s.threshold;t.hasVisibleSeries=!0,t.isLog&&0>=a&&(a=null),t.isXAxis?(n=i.xData,n.length&&(t.dataMin=we(f(t.dataMin,n[0]),D(n)),t.dataMax=xe(f(t.dataMax,n[0]),L(n)))):(i.getExtremes(),o=i.dataMax,r=i.dataMin,u(r)&&u(o)&&(t.dataMin=we(f(t.dataMin,r),r),t.dataMax=xe(f(t.dataMax,o),o)),u(a)&&(t.dataMin>=a?(t.dataMin=a,t.ignoreMinPadding=!0):t.dataMax<a&&(t.dataMax=a,t.ignoreMaxPadding=!0)))}})},translate:function(t,e,i,n,r,o){var s,l=this,h=1,c=0,u=n?l.oldTransA:l.transA,d=n?l.oldMin:l.min,p=l.minPixelPadding,f=(l.options.ordinal||l.isLog&&r)&&l.lin2val;return u||(u=l.transA),i&&(h*=-1,c=l.len),l.reversed&&(h*=-1,c-=h*(l.sector||l.len)),e?(t=t*h+c,t-=p,s=t/u+d,f&&(s=l.lin2val(s))):(f&&(t=l.val2lin(t)),"between"===o&&(o=.5),s=h*(t-d)*u+c+h*p+(a(o)?u*o*l.pointRange:0)),s},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,r){var o,s,a,l,h,c=this,u=c.chart,d=c.left,p=c.top,g=i&&u.oldChartHeight||u.chartHeight,m=i&&u.oldChartWidth||u.chartWidth,v=c.transB;return r=f(r,c.translate(t,null,null,i)),o=a=ve(r+v),s=l=ve(g-r-v),isNaN(r)?h=!0:c.horiz?(s=p,l=g-c.bottom,(d>o||o>d+c.width)&&(h=!0)):(o=d,a=m-c.right,(p>s||s>p+c.height)&&(h=!0)),h&&!n?null:u.renderer.crispLine([Qe,o,s,Je,a,l],e||1)},getLinearTickPositions:function(t,e,i){var n,r,o=z(be(e/t)*t),s=z(ye(i/t)*t),a=[];for(n=o;s>=n&&(a.push(n),n=z(n+t),n!==r);)r=n;return a},getMinorTickPositions:function(){var t,e,i,n=this,r=n.options,o=n.tickPositions,s=n.minorTickInterval,a=[];if(n.isLog)for(i=o.length,e=1;i>e;e++)a=a.concat(n.getLogTickPositions(s,o[e-1],o[e],!0));else if(n.isDatetimeAxis&&"auto"===r.minorTickInterval)a=a.concat(n.getTimeTicks(n.normalizeTimeTickInterval(s),n.min,n.max,r.startOfWeek)),a[0]<n.min&&a.shift();else for(t=n.min+(o[0]-n.min)%s;t<=n.max;t+=s)a.push(t);return a},adjustForMinRange:function(){var t,e,i,n,r,o,s,a,l=this,h=l.options,c=l.min,d=l.max,p=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===X&&!l.isLog&&(u(h.min)||u(h.max)?l.minRange=null:(xi(l.series,function(t){for(r=t.xData,o=t.xIncrement?1:r.length-1,i=o;i>0;i--)n=r[i]-r[i-1],(e===X||e>n)&&(e=n)}),l.minRange=we(5*e,l.dataMax-l.dataMin))),d-c<l.minRange){var g=l.minRange;t=(g-d+c)/2,s=[c-t,f(h.min,c-t)],p&&(s[2]=l.dataMin),c=L(s),a=[c+g,f(h.max,c+g)],p&&(a[2]=l.dataMax),d=D(a),g>d-c&&(s[0]=d-g,s[1]=f(h.min,d-g),c=L(s))}l.min=c,l.max=d},setAxisTranslation:function(t){var e,i,n=this,o=n.max-n.min,s=n.axisPointRange||0,a=0,l=0,h=n.linkedParent,c=!!n.categories,d=n.transA;(n.isXAxis||c||s)&&(h?(a=h.minPointOffset,l=h.pointRangePadding):xi(n.series,function(t){var i=xe(n.isXAxis?t.pointRange:n.axisPointRange||0,+c),h=t.options.pointPlacement,d=t.closestPointRange;i>o&&(i=0),s=xe(s,i),a=xe(a,r(h)?0:i/2),l=xe(l,"on"===h?0:i),!t.noSharedTooltip&&u(d)&&(e=u(e)?we(e,d):d)}),i=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=a*=i,n.pointRangePadding=l*=i,n.pointRange=we(s,o),n.closestPointRange=e),t&&(n.oldTransA=d),n.translationSlope=n.transA=d=n.len/(o+l||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=d*a},setTickPositions:function(t){var e,i,n,r,o=this,s=o.chart,a=o.options,h=o.isLog,c=o.isDatetimeAxis,d=o.isXAxis,p=o.isLinked,g=o.options.tickPositioner,m=a.maxPadding,v=a.minPadding,b=a.tickInterval,y=a.minTickInterval,x=a.tickPixelInterval,w=o.categories;if(p?(o.linkedParent=s[o.coll][a.linkedTo],i=o.linkedParent.getExtremes(),o.min=f(i.min,i.dataMin),o.max=f(i.max,i.dataMax),a.type!==o.linkedParent.options.type&&I(11,1)):(o.min=f(o.userMin,a.min,o.dataMin),o.max=f(o.userMax,a.max,o.dataMax)),h&&(!t&&we(o.min,f(o.dataMin,o.min))<=0&&I(10,1),o.min=z(l(o.min)),o.max=z(l(o.max))),o.range&&u(o.max)&&(o.userMin=o.min=xe(o.min,o.max-o.range),o.userMax=o.max,o.range=null),o.beforePadding&&o.beforePadding(),o.adjustForMinRange(),w||o.axisPointRange||o.usePercentage||p||!u(o.min)||!u(o.max)||(e=o.max-o.min,e&&(u(a.min)||u(o.userMin)||!v||!(o.dataMin<0)&&o.ignoreMinPadding||(o.min-=e*v),u(a.max)||u(o.userMax)||!m||!(o.dataMax>0)&&o.ignoreMaxPadding||(o.max+=e*m))),o.min===o.max||void 0===o.min||void 0===o.max?o.tickInterval=o.max/5:p&&!b&&x===o.linkedParent.options.tickPixelInterval?o.tickInterval=o.linkedParent.tickInterval:(o.tickInterval=f(b,w?1:(o.max-o.min)*x/xe(o.len,x)),!u(b)&&o.len<x&&!this.isRadial&&!this.isLog&&!w&&a.startOnTick&&a.endOnTick&&(r=!0,o.tickInterval/=4)),d&&!t&&xi(o.series,function(t){t.processData(o.min!==o.oldMin||o.max!==o.oldMax)}),o.setAxisTranslation(!0),o.beforeSetTickPositions&&o.beforeSetTickPositions(),o.postProcessTickInterval&&(o.tickInterval=o.postProcessTickInterval(o.tickInterval)),o.pointRange&&(o.tickInterval=xe(o.pointRange,o.tickInterval)),!b&&o.tickInterval<y&&(o.tickInterval=y),c||h||b||(o.tickInterval=S(o.tickInterval,null,_(o.tickInterval),a)),o.minorTickInterval="auto"===a.minorTickInterval&&o.tickInterval?o.tickInterval/5:a.minorTickInterval,o.tickPositions=n=a.tickPositions?[].concat(a.tickPositions):g&&g.apply(o,[o.min,o.max]),n||(!o.ordinalPositions&&(o.max-o.min)/o.tickInterval>xe(2*o.len,200)&&I(19,!0),n=c?o.getTimeTicks(o.normalizeTimeTickInterval(o.tickInterval,a.units),o.min,o.max,a.startOfWeek,o.ordinalPositions,o.closestPointRange,!0):h?o.getLogTickPositions(o.tickInterval,o.min,o.max):o.getLinearTickPositions(o.tickInterval,o.min,o.max),r&&n.splice(1,n.length-2),o.tickPositions=n),!p){var k,C=n[0],T=n[n.length-1],M=o.minPointOffset||0;a.startOnTick?o.min=C:o.min-M>C&&n.shift(),a.endOnTick?o.max=T:o.max+M<T&&n.pop(),1===n.length&&(k=.001*ke(o.max||1),o.min-=k,o.max+=k)}},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(e[n]||0)&&this.options.alignTicks!==!1&&(e[n]=i.length),this.options.forceTickRecalculate&&(e[n]=i.length),t.maxTicks=e},adjustTickAmount:function(){var t=this,e=t.chart,i=t._maxTicksKey,n=t.tickPositions,r=e.maxTicks;if(n&&r&&r[i]&&!t.isDatetimeAxis&&!t.categories&&!t.isLinked&&t.options.alignTicks!==!1&&this.min!==X){var o,s=t.tickAmount,a=n.length;if(t.tickAmount=o=r[i],o>a){for(;n.length<o;)n.push(z(n[n.length-1]+t.tickInterval));t.transA*=(a-1)/(o-1),t.max=n[n.length-1]}u(s)&&o!==s&&(t.isDirty=!0)}},setScale:function(){var t,e,i,n,r=this,o=r.stacks;if(r.oldMin=r.min,r.oldMax=r.max,r.oldAxisLength=r.len,r.setAxisSize(),n=r.len!==r.oldAxisLength,xi(r.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(i=!0)}),n||i||r.isLinked||r.forceRedraw||r.userMin!==r.oldUserMin||r.userMax!==r.oldUserMax){if(!r.isXAxis)for(t in o)for(e in o[t])o[t][e].total=null,o[t][e].cum=0;r.forceRedraw=!1,r.getSeriesExtremes(),r.setTickPositions(),r.oldUserMin=r.userMin,r.oldUserMax=r.userMax,r.isDirty||(r.isDirty=n||r.min!==r.oldMin||r.max!==r.oldMax)}else if(!r.isXAxis){r.oldStacks&&(o=r.stacks=r.oldStacks);for(t in o)for(e in o[t])o[t][e].cum=o[t][e].total}r.setMaxTicks()},setExtremes:function(e,i,n,r,o){var s=this,a=s.chart;n=f(n,!0),o=t(o,{min:e,max:i});var l=function(){s.userMin=e,s.userMax=i,s.eventArgs=o,s.isDirtyExtremes=!0,n&&a.redraw(r)};o.preventEventFire?l():Ti(s,"setExtremes",o,l)},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,r=this.options;return this.allowZoomOutside||(u(i)&&t<=we(i,f(r.min,i))&&(t=X),u(n)&&e>=xe(n,f(r.max,n))&&(e=X)),this.displayBtn=t!==X||e!==X,this.setExtremes(t,e,!1,X,{trigger:"zoom"}),!0},setAxisSize:function(){var t,e,i,n,r=this.chart,o=this.options,s=o.offsetLeft||0,a=o.offsetRight||0,l=this.horiz;this.left=n=f(o.left,r.plotLeft+s),this.top=i=f(o.top,r.plotTop),this.width=t=f(o.width,r.plotWidth-s+a),this.height=e=f(o.height,r.plotHeight),this.bottom=r.chartHeight-e-i,this.right=r.chartWidth-t-n,this.len=xe(l?t:e,0),this.pos=l?n:i},getExtremes:function(){var t=this,e=t.isLog;return{min:e?z(h(t.min)):t.min,max:e?z(h(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this,i=e.isLog,n=i?h(e.min):e.min,r=i?h(e.max):e.max;return n>t||null===t?t=n:t>r&&(t=r),e.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e,i=(f(t,0)-90*this.side+720)%360;return e=i>15&&165>i?"right":i>195&&345>i?"left":"center"},getOffset:function(){var t,e,i,n,r,o,s,a,l,h,c,d,p,g=this,m=g.chart,v=m.renderer,b=g.options,y=g.tickPositions,x=g.ticks,w=g.horiz,k=g.side,C=m.inverted?[1,0,3,2][k]:k,_=0,S=0,T=b.title,M=b.labels,D=0,L=m.axisOffset,A=m.clipOffset,P=[-1,1,1,-1][k],I=1,z=f(M.maxStaggerLines,5);if(g.hasData=t=g.hasVisibleSeries||u(g.min)&&u(g.max)&&!!y,g.showAxis=e=t||f(b.showEmpty,!0),g.staggerLines=g.horiz&&M.staggerLines,g.axisGroup||(g.gridGroup=v.g("grid").attr({zIndex:b.gridZIndex||1}).add(),g.axisGroup=v.g("axis").attr({zIndex:b.zIndex||2}).add(),g.labelGroup=v.g("axis-labels").attr({zIndex:M.zIndex||7}).addClass(Ve+g.coll.toLowerCase()+"-labels").add()),t||g.isLinked){if(g.labelAlign=f(M.align||g.autoLabelAlign(M.rotation)),xi(y,function(t){x[t]?x[t].addLabel():x[t]=new R(g,t)}),g.horiz&&!g.staggerLines&&z&&!M.rotation){for(o=g.reversed?[].concat(y).reverse():y;z>I;){for(s=[],a=!1,r=0;r<o.length;r++)l=o[r],h=x[l].label&&x[l].label.getBBox(),d=h?h.width:0,p=r%I,d&&(c=g.translate(l),s[p]!==X&&c<s[p]&&(a=!0),s[p]=c+d);if(!a)break;I++}I>1&&(g.staggerLines=I)}xi(y,function(t){(0===k||2===k||{1:"left",3:"right"}[k]===g.labelAlign)&&(D=xe(x[t].getLabelSize(),D))}),g.staggerLines&&(D*=g.staggerLines,g.labelOffset=D)}else for(n in x)x[n].destroy(),delete x[n];T&&T.text&&T.enabled!==!1&&(g.axisTitle||(g.axisTitle=v.text(T.text,0,0,T.useHTML).attr({zIndex:7,rotation:T.rotation||0,align:T.textAlign||{low:"left",middle:"center",high:"right"}[T.align]}).addClass(Ve+this.coll.toLowerCase()+"-title").css(T.style).add(g.axisGroup),g.axisTitle.isNew=!0),e&&(_=g.axisTitle.getBBox()[w?"height":"width"],S=f(T.margin,w?5:10),i=T.offset),g.axisTitle[e?"show":"hide"]()),g.offset=P*f(b.offset,L[k]),g.axisTitleMargin=f(i,D+S+(2!==k&&D&&P*b.labels[w?"y":"x"])),L[k]=xe(L[k],g.axisTitleMargin+_+P*g.offset),A[C]=xe(A[C],2*be(b.lineWidth/2))},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,r=this.horiz,o=this.left+(i?this.width:0)+n,s=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine([Qe,r?this.left:o,r?s:this.top,Je,r?e.chartWidth-this.right:o,r?s:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,r=this.len,o=this.options.title,s=t?e:i,a=this.opposite,l=this.offset,h=n(o.style.fontSize||12),c={low:s+(t?0:r),middle:s+r/2,high:s+(t?r:0)}[o.align],u=(t?i+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?h:0);return{x:t?c:u+(a?this.width:0)+l+(o.x||0),y:t?u-(a?this.height:0)+l:c+(o.y||0)}},render:function(){var t,e,i,n,r=this,o=r.horiz,s=r.reversed,a=r.chart,l=a.renderer,c=r.options,d=r.isLog,p=r.isLinked,f=r.tickPositions,g=r.axisTitle,m=r.ticks,v=r.minorTicks,b=r.alternateBands,y=c.stackLabels,x=c.alternateGridColor,w=r.tickmarkOffset,k=c.lineWidth,C=a.hasRendered,_=C&&u(r.oldMin)&&!isNaN(r.oldMin),S=r.hasData,T=r.showAxis,M=c.labels.overflow,D=r.justifyLabels=o&&M!==!1;r.labelEdge.length=0,r.justifyToPlot="justify"===M,xi([m,v,b],function(t){var e;for(e in t)t[e].isActive=!1}),(S||p)&&(r.minorTickInterval&&!r.categories&&xi(r.getMinorTickPositions(),function(t){v[t]||(v[t]=new R(r,t,"minor")),_&&v[t].isNew&&v[t].render(null,!0),v[t].render(null,!1,1)}),f.length&&(t=f.slice(),(o&&s||!o&&!s)&&t.reverse(),D&&(t=t.slice(1).concat([t[0]])),xi(t,function(e,i){D&&(i=i===t.length-1?0:i+1),(!p||e>=r.min&&e<=r.max)&&(m[e]||(m[e]=new R(r,e)),_&&m[e].isNew&&m[e].render(i,!0,.1),m[e].render(i,!1,1))}),w&&0===r.min&&(m[-1]||(m[-1]=new R(r,-1,null,!0)),m[-1].render(-1))),x&&xi(f,function(t,e){0===e%2&&t<r.max&&(b[t]||(b[t]=new fi.PlotLineOrBand(r)),i=t+w,n=f[e+1]!==X?f[e+1]+w:r.max,b[t].options={from:d?h(i):i,to:d?h(n):n,color:x},b[t].render(),b[t].isActive=!0)}),r._addedPlotLB||(xi((c.plotLines||[]).concat(c.plotBands||[]),function(t){r.addPlotBandOrLine(t)}),r._addedPlotLB=!0)),xi([m,v,b],function(t){var e,i,n=[],r=Z?Z.duration||500:0,o=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==b&&a.hasRendered&&r?r&&setTimeout(o,r):o()}),k&&(e=r.getLinePath(k),r.axisLine?r.axisLine.animate({d:e}):r.axisLine=l.path(e).attr({stroke:c.lineColor,"stroke-width":k,zIndex:7}).add(r.axisGroup),r.axisLine[T?"show":"hide"]()),g&&T&&(g[g.isNew?"attr":"animate"](r.getTitlePosition()),g.isNew=!1),y&&y.enabled&&r.renderStackTotals(),r.isDirty=!1
},redraw:function(){var t=this,e=t.chart,i=e.pointer;i&&i.reset(!0),t.render(),xi(t.plotLinesAndBands,function(t){t.render()}),xi(t.series,function(t){t.isDirty=!0})},destroy:function(t){var e,i,n=this,r=n.stacks,o=n.plotLinesAndBands;t||Si(n);for(e in r)A(r[e]),r[e]=null;for(xi([n.ticks,n.minorTicks,n.alternateBands],function(t){A(t)}),i=o.length;i--;)o[i].destroy();xi(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(t){n[t]&&(n[t]=n[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){if(this.crosshair){if((u(e)||!f(this.crosshair.snap,!0))===!1)return this.hideCrosshair(),void 0;var i,n,r=this.crosshair,o=r.animation;if(f(r.snap,!0)?u(e)&&(n=this.chart.inverted!=this.horiz?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:f(e.stackY,e.y)):this.getPlotLinePath(null,null,null,null,n),null===i)return this.hideCrosshair(),void 0;if(this.cross)this.cross.attr({visibility:Ue})[o?"animate":"attr"]({d:i},o);else{var s={"stroke-width":r.width||1,stroke:r.color||"#C0C0C0",zIndex:r.zIndex||2};r.dashStyle&&(s.dashstyle=r.dashStyle),this.cross=this.chart.renderer.path(i).attr(s).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}},t($.prototype,te),$.prototype.getTimeTicks=function(e,i,n,r){var o,s,a=[],l={},h=U.global.useUTC,c=new Date(i-ie),d=e.unitRange,p=e.count;if(u(i)){d>=J[oi]&&(c.setMilliseconds(0),c.setSeconds(d>=J[si]?0:p*be(c.getSeconds()/p))),d>=J[si]&&c[he](d>=J[ai]?0:p*be(c[ne]()/p)),d>=J[ai]&&c[ce](d>=J[li]?0:p*be(c[re]()/p)),d>=J[li]&&c[ue](d>=J[ci]?1:p*be(c[se]()/p)),d>=J[ci]&&(c[de](d>=J[ui]?0:p*be(c[ae]()/p)),s=c[le]()),d>=J[ui]&&(s-=s%p,c[pe](s)),d===J[hi]&&c[ue](c[se]()-c[oe]()+f(r,1)),o=1,ie&&(c=new Date(c.getTime()+ie)),s=c[le]();for(var g=c.getTime(),m=c[ae](),v=c[se](),b=h?ie:(864e5+1e3*60*c.getTimezoneOffset())%864e5;n>g;)a.push(g),d===J[ui]?g=ee(s+o*p,0):d===J[ci]?g=ee(s,m+o*p):h||d!==J[li]&&d!==J[hi]?g+=d*p:g=ee(s,m,v+o*p*(d===J[li]?1:7)),o++;a.push(g),xi(wi(a,function(t){return d<=J[ai]&&t%J[li]===b}),function(t){l[t]=li})}return a.info=t(e,{higherRanks:l,totalRange:d*p}),a},$.prototype.normalizeTimeTickInterval=function(t,e){var i,n,r=e||[[ri,[1,2,5,10,20,25,50,100,200,500]],[oi,[1,2,5,10,15,30]],[si,[1,2,5,10,15,30]],[ai,[1,2,3,4,6,8,12]],[li,[1,2]],[hi,[1,2]],[ci,[1,2,3,4,6]],[ui,null]],o=r[r.length-1],s=J[o[0]],a=o[1];for(n=0;n<r.length;n++)if(o=r[n],s=J[o[0]],a=o[1],r[n+1]){var l=(s*a[a.length-1]+J[r[n+1][0]])/2;if(l>=t)break}return s===J[ui]&&5*s>t&&(a=[1,2,5]),i=S(t/s,a,o[0]===ui?xe(_(t/s),1):1),{unitRange:s,count:i,unitName:o[0]}},$.prototype.getLogTickPositions=function(t,e,i,n){var r=this,o=r.options,s=r.len,a=[];if(n||(r._minorAutoInterval=null),t>=.5)t=ve(t),a=r.getLinearTickPositions(t,e,i);else if(t>=.08){var c,u,d,p,g,m,v,b=be(e);for(c=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],u=b;i+1>u&&!v;u++)for(p=c.length,d=0;p>d&&!v;d++)g=l(h(u)*c[d]),g>e&&(!n||i>=m)&&a.push(m),m>i&&(v=!0),m=g}else{var y=h(e),x=h(i),w=o[n?"minorTickInterval":"tickInterval"],k="auto"===w?null:w,C=o.tickPixelInterval/(n?5:1),T=n?s/r.tickPositions.length:s;t=f(k,r._minorAutoInterval,(x-y)*C/(T||1)),t=S(t,null,_(t)),a=Ci(r.getLinearTickPositions(t,y,x),l),n||(r._minorAutoInterval=t/5)}return n||(r.tickInterval=t),a};var Yi=fi.Tooltip=function(){this.init.apply(this,arguments)};Yi.prototype={init:function(t,e){var i=e.borderWidth,r=e.style,o=n(r.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape,null,null,e.useHTML,null,"tooltip").attr({padding:o,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(r).css({padding:0}).add().attr({y:-9999}),We||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,i,n,r){var o=this,s=o.now,a=o.options.animation!==!1&&!o.isHidden;t(s,{x:a?(2*s.x+e)/3:e,y:a?(s.y+i)/2:i,anchorX:a?(2*s.anchorX+n)/3:n,anchorY:a?(s.anchorY+r)/2:r}),o.label.attr(s),a&&(ke(e-s.x)>1||ke(i-s.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(e,i,n,r)},32))},hide:function(){var t,e=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},f(this.options.hideDelay,500)),t&&xi(t,function(t){t.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,e){var i,n,r=this.chart,o=r.inverted,s=r.plotTop,a=0,l=0;return t=p(t),i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===X&&(e=r.pointer.normalize(e)),i=[e.chartX-r.plotLeft,e.chartY-s]),i||(xi(t,function(t){n=t.series.yAxis,a+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!o&&n?n.top-s:0)}),a/=t.length,l/=t.length,i=[o?r.plotWidth-l:a,this.shared&&!o&&t.length>1&&e?e.chartY-s:o?r.plotHeight-a:l]),Ci(i,ve)},getPosition:function(t,e,i){var n,r=this.chart,o=r.plotLeft,s=r.plotTop,a=r.plotWidth,l=r.plotHeight,h=f(this.options.distance,12),c=isNaN(i.plotX)?0:i.plotX,u=i.plotY,d=c+o+(r.inverted?h:-t-h),p=u-e+s+15;return 7>d&&(d=o+xe(c,0)+h),d+t>o+a&&(d-=d+t-(o+a),p=u-e+s-h,n=!0),s+5>p&&(p=s+5,n&&u>=p&&p+e>=u&&(p=u+s+h)),p+e>s+l&&(p=xe(s,s+l-e-h)),{x:d,y:p}},defaultFormatter:function(t){var e,i=this.points||p(this),n=i[0].series;return e=[t.tooltipHeaderFormatter(i[0])],xi(i,function(t){n=t.series,e.push(n.tooltipFormatter&&n.tooltipFormatter(t)||t.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var i,n,r,o,s,a,l=this,h=l.chart,c=l.label,u=l.options,d={},f=[],g=u.formatter||l.defaultFormatter,m=h.hoverPoints,v=l.shared;clearTimeout(this.hideTimer),l.followPointer=p(t)[0].series.tooltipOptions.followPointer,r=l.getAnchor(t,e),i=r[0],n=r[1],!v||t.series&&t.series.noSharedTooltip?d=t.getLabelConfig():(h.hoverPoints=t,m&&xi(m,function(t){t.setState()}),xi(t,function(t){t.setState(ii),f.push(t.getLabelConfig())}),d={x:t[0].category,y:t[0].y},d.points=f,t=t[0]),o=g.call(d,l),a=t.series,o===!1?this.hide():(l.isHidden&&(Li(c),c.attr("opacity",1).show()),c.attr({text:o}),s=u.borderColor||t.color||a.color||"#606060",c.attr({stroke:s}),l.updatePosition({plotX:i,plotY:n}),this.isHidden=!1),Ti(h,"tooltipRefresh",{text:o,x:i+h.plotLeft,y:n+h.plotTop,borderColor:s})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(ve(n.x),ve(n.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)},tooltipHeaderFormatter:function(t){var e,i=t.series,n=i.tooltipOptions,r=n.dateTimeLabelFormats,o=n.xDateFormat,s=i.xAxis,l=s&&"datetime"===s.options.type&&a(t.key),h=n.headerFormat,c=s&&s.closestPointRange;if(l&&!o){if(c){for(e in J)if(J[e]>=c||J[e]<=J[li]&&t.key%J[e]>0){o=r[e];break}}else o=r.day;o=o||r.year}return l&&o&&(h=h.replace("{point.key}","{point.key:"+o+"}")),C(h,{point:t,series:i})}};var Gi;q=fe.documentElement.ontouchstart!==X;var Xi=fi.Pointer=function(t,e){this.init(t,e)};if(Xi.prototype={init:function(t,e){var i,n,r=e.chart,o=r.events,s=We?"":r.zoomType,a=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(s),this.zoomY=n=/y/.test(s),this.zoomHor=i&&!a||n&&a,this.zoomVert=n&&!a||i&&a,this.runChartClick=o&&!!o.click,this.pinchDown=[],this.lastValidTouch={},fi.Tooltip&&e.tooltip.enabled&&(t.tooltip=new Yi(t,e.tooltip)),this.setDOMEvents()},normalize:function(e,i){var n,r,o;return e=e||ge.event,e=Mi(e),e.target||(e.target=e.srcElement),o=e.touches?e.touches.item(0):e,i||(this.chartPosition=i=ki(this.chart.container)),o.pageX===X?(n=xe(e.x,e.clientX-i.left),r=e.y):(n=o.pageX-i.left,r=o.pageY-i.top),t(e,{chartX:ve(n),chartY:ve(r)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return xi(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,i,n,r,o,s=this,a=s.chart,l=a.series,h=a.tooltip,c=a.hoverPoint,d=a.hoverSeries,p=a.chartWidth,g=s.getIndex(t);if(h&&s.options.tooltip.shared&&(!d||!d.noSharedTooltip)){for(i=[],n=l.length,r=0;n>r;r++)l[r].visible&&l[r].options.enableMouseTracking!==!1&&!l[r].noSharedTooltip&&l[r].singularTooltips!==!0&&l[r].tooltipPoints.length&&(e=l[r].tooltipPoints[g],e&&e.series&&(e._dist=ke(g-e.clientX),p=we(p,e._dist),i.push(e)));for(n=i.length;n--;)i[n]._dist>p&&i.splice(n,1);i.length&&i[0].clientX!==s.hoverX&&(h.refresh(i,t),s.hoverX=i[0].clientX)}!d||!d.tracker||h&&h.followPointer?h&&h.followPointer&&!h.isHidden&&(o=h.getAnchor([{}],t),h.updatePosition({plotX:o[0],plotY:o[1]})):(e=d.tooltipPoints[g],e&&e!==c&&e.onMouseOver(t)),h&&!s._onDocumentMouseMove&&(s._onDocumentMouseMove=function(t){u(Gi)&&Be[Gi].pointer.onDocumentMouseMove(t)},_i(fe,"mousemove",s._onDocumentMouseMove)),xi(a.axes,function(i){i.drawCrosshair(t,f(e,c))})},reset:function(t){var e=this,i=e.chart,n=i.hoverSeries,r=i.hoverPoint,o=i.tooltip,s=o&&o.shared?i.hoverPoints:r;t=t&&o&&s,t&&p(s)[0].plotX===X&&(t=!1),t?(o.refresh(s),r&&r.setState(r.state,!0)):(r&&r.onMouseOut(),n&&n.onMouseOut(),o&&o.hide(),e._onDocumentMouseMove&&(Si(fe,"mousemove",e._onDocumentMouseMove),e._onDocumentMouseMove=null),xi(i.axes,function(t){t.hideCrosshair()}),e.hoverX=null)},scaleGroups:function(t,e){var i,n=this.chart;xi(n.series,function(r){i=t||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&(r.group.attr(i),r.markerGroup&&(r.markerGroup.attr(i),r.markerGroup.clip(e?n.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,r=n.options.chart,o=t.chartX,s=t.chartY,a=this.zoomHor,l=this.zoomVert,h=n.plotLeft,c=n.plotTop,u=n.plotWidth,d=n.plotHeight,p=this.mouseDownX,f=this.mouseDownY;h>o?o=h:o>h+u&&(o=h+u),c>s?s=c:s>c+d&&(s=c+d),this.hasDragged=Math.sqrt(Math.pow(p-o,2)+Math.pow(f-s,2)),this.hasDragged>10&&(e=n.isInsidePlot(p-h,f-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&(this.selectionMarker||(this.selectionMarker=n.renderer.rect(h,c,a?1:u,l?1:d,0).attr({fill:r.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&a&&(i=o-p,this.selectionMarker.attr({width:ke(i),x:(i>0?0:i)+p})),this.selectionMarker&&l&&(i=s-f,this.selectionMarker.attr({height:ke(i),y:(i>0?0:i)+f})),e&&!this.selectionMarker&&r.panning&&n.pan(t,r.panning))},drop:function(e){var i=this.chart,n=this.hasPinched;if(this.selectionMarker){var r,o={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},s=this.selectionMarker,a=s.x,l=s.y;(this.hasDragged||n)&&(xi(i.axes,function(t){if(t.zoomEnabled){var e=t.horiz,i=t.toValue(e?a:l),n=t.toValue(e?a+s.width:l+s.height);isNaN(i)||isNaN(n)||(o[t.coll].push({axis:t,min:we(i,n),max:xe(i,n)}),r=!0)}}),r&&Ti(i,"selection",o,function(e){i.zoom(t(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(g(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){u(Gi)&&Be[Gi].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,n=e.hoverSeries;t=this.normalize(t,i),i&&n&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){var t=Be[Gi];t&&(t.pointer.reset(),t.pointer.chartPosition=null),Gi=null},onContainerMouseMove:function(t){var e=this.chart;Gi=e.index,t=this.normalize(t),"mousedown"===e.mouseIsDown&&this.drag(t),(e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||t.synthetic)&&(this.runPointActions(t),!t.synthetic&&e.options&&e.options.events&&e.options.events.mouseMove&&e.options.events.mouseMove(t,e))},inClass:function(t,e){for(var i;t;){if(i=d(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(Ve+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=t.relatedTarget||t.toElement,n=i&&i.point&&i.point.series;!e||e.options.stickyTracking||this.inClass(i,Ve+"tooltip")||n===e||e.onMouseOut()},onContainerClick:function(e){var i,n,r,o=this.chart,s=o.hoverPoint,a=o.plotLeft,l=o.plotTop,h=o.inverted;e=this.normalize(e),e.cancelBubble=!0,o.cancelClick||(s&&this.inClass(e.target,Ve+"tracker")?(i=this.chartPosition,n=s.plotX,r=s.plotY,t(s,{pageX:i.left+a+(h?o.plotWidth-r:n),pageY:i.top+l+(h?o.plotHeight-n:r)}),Ti(s.series,"click",t(e,{point:s})),o.hoverPoint&&s.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),o.isInsidePlot(e.chartX-a,e.chartY-l)&&Ti(o,"click",e)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},_i(e,"mouseleave",t.onContainerMouseLeave),_i(fe,"mouseup",t.onDocumentMouseUp),q&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},_i(fe,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;Si(this.chart.container,"mouseleave",this.onContainerMouseLeave),Si(fe,"mouseup",this.onDocumentMouseUp),Si(fe,"touchend",this.onDocumentTouchEnd),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}},t(fi.Pointer.prototype,{pinchTranslate:function(t,e,i,n,r,o,s,a){t&&this.pinchTranslateDirection(!0,i,n,r,o,s,a),e&&this.pinchTranslateDirection(!1,i,n,r,o,s,a)},pinchTranslateDirection:function(t,e,i,n,r,o,s,a){var l,h,c,u,d,p,f=this.chart,g=t?"x":"y",m=t?"X":"Y",v="chart"+m,b=t?"width":"height",y=f["plot"+(t?"Left":"Top")],x=a||1,w=f.inverted,k=f.bounds[t?"h":"v"],C=1===e.length,_=e[0][v],S=i[0][v],T=!C&&e[1][v],M=!C&&i[1][v],D=function(){!C&&ke(_-T)>20&&(x=a||ke(S-M)/ke(_-T)),c=(y-S)/x+_,l=f["plot"+(t?"Width":"Height")]/x};D(),h=c,h<k.min?(h=k.min,u=!0):h+l>k.max&&(h=k.max-l,u=!0),u?(S-=.8*(S-s[g][0]),C||(M-=.8*(M-s[g][1])),D()):s[g]=[S,M],w||(o[g]=c-y,o[b]=l),p=w?t?"scaleY":"scaleX":"scale"+m,d=w?1/x:x,r[b]=l,r[g]=h,n[p]=x,n["translate"+m]=d*y+(S-d*_)},pinch:function(e){var i=this,n=i.chart,r=i.pinchDown,o=n.tooltip&&n.tooltip.options.followTouchMove,s=e.touches,a=s.length,l=i.lastValidTouch,h=i.zoomHor||i.pinchHor,c=i.zoomVert||i.pinchVert,u=h||c,d=i.selectionMarker,p={},f=1===a&&(i.inClass(e.target,Ve+"tracker")&&n.runTrackerClick||n.runChartClick),g={};!u&&!o||f||e.preventDefault(),Ci(s,function(t){return i.normalize(t)}),"touchstart"===e.type?(xi(s,function(t,e){r[e]={chartX:t.chartX,chartY:t.chartY}}),l.x=[r[0].chartX,r[1]&&r[1].chartX],l.y=[r[0].chartY,r[1]&&r[1].chartY],xi(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,r=t.toPixels(t.dataMin),o=t.toPixels(t.dataMax),s=we(r,o),a=xe(r,o);e.min=we(t.pos,s-i),e.max=xe(t.pos+t.len,a+i)}})):r.length&&(d||(i.selectionMarker=d=t({destroy:$e},n.plotBox)),i.pinchTranslate(h,c,r,s,p,d,g,l),i.hasPinched=u,i.scaleGroups(p,g),!u&&o&&1===a&&this.runPointActions(i.normalize(e)))},onContainerTouchStart:function(t){var e=this.chart;Gi=e.index,1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)?(this.runPointActions(t),this.pinch(t)):this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){(1===t.touches.length||2===t.touches.length)&&this.pinch(t)},onDocumentTouchEnd:function(t){u(Gi)&&Be[Gi].pointer.drop(t)}}),ge.PointerEvent||ge.MSPointerEvent){var ji={},qi=!!ge.PointerEvent,Vi=function(){var t,e=[];e.item=function(t){return this[t]};for(t in ji)ji.hasOwnProperty(t)&&e.push({pageX:ji[t].pageX,pageY:ji[t].pageY,target:ji[t].target});return e},Ui=function(t,e,i,n){var r;t=t.originalEvent||t,"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Be[Gi]||(n(t),r=Be[Gi].pointer,r[e]({type:i,target:t.currentTarget,preventDefault:$e,touches:Vi()}))};t(Xi.prototype,{onContainerPointerDown:function(t){Ui(t,"onContainerTouchStart","touchstart",function(t){ji[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){Ui(t,"onContainerTouchMove","touchmove",function(t){ji[t.pointerId]={pageX:t.pageX,pageY:t.pageY},ji[t.pointerId].target||(ji[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){Ui(t,"onContainerTouchEnd","touchend",function(t){delete ji[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,qi?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,qi?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(fe,qi?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),x(Xi.prototype,"init",function(t,e,i){g(e.container,{"-ms-touch-action":Ze,"touch-action":Ze}),t.call(this,e,i)}),x(Xi.prototype,"setDOMEvents",function(t){t.apply(this),this.batchMSEvents(_i)}),x(Xi.prototype,"destroy",function(t){this.batchMSEvents(Si),t.call(this)})}var Ki=fi.Legend=function(t,e){this.init(t,e)};Ki.prototype={init:function(t,i){var r=this,o=i.itemStyle,s=f(i.padding,8),a=i.itemMarginTop||0;this.options=i,i.enabled&&(r.baseline=n(o.fontSize)+3+a,r.itemStyle=o,r.itemHiddenStyle=e(o,i.itemHiddenStyle),r.itemMarginTop=a,r.padding=s,r.initialItemX=s,r.initialItemY=s-5,r.maxItemWidth=0,r.chart=t,r.itemHeight=0,r.lastLineHeight=0,r.symbolWidth=f(i.symbolWidth,16),r.pages=[],r.render(),_i(r.chart,"endResize",function(){r.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n,r=this,o=r.options,s=t.legendItem,a=t.legendLine,l=t.legendSymbol,h=r.itemHiddenStyle.color,c=e?o.itemStyle.color:h,u=e?t.legendColor||t.color||"#CCC":h,d=t.options&&t.options.marker,p={stroke:u,fill:u};if(s&&s.css({fill:c,color:c}),a&&a.attr({stroke:u}),l){if(d&&l.isMarker){d=t.convertAttribs(d);for(i in d)n=d[i],n!==X&&(p[i]=n)}l.attr(p)}},positionItem:function(t){var e=this,i=e.options,n=i.symbolPadding,r=!i.rtl,o=t._legendItemPos,s=o[0],a=o[1],l=t.checkbox;t.legendGroup&&t.legendGroup.translate(r?s:e.legendWidth-s-2*n-4,a),l&&(l.x=s,l.y=a)},destroyItem:function(t){var e=t.checkbox;xi(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&P(t.checkbox)},destroy:function(){var t=this,e=t.group,i=t.box;i&&(t.box=i.destroy()),e&&(t.group=e.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,xi(this.allItems,function(r){var o,s=r.checkbox;s&&(o=e+s.y+(t||0)+3,g(s,{left:i.translateX+r.legendItemWidth+s.x-20+Ke,top:o+Ke,display:o>e-6&&e+n-6>o?"":Ze}))}))},renderTitle:function(){var t,e=this.options,i=this.padding,n=e.title,r=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),t=this.title.getBBox(),r=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:r})),this.titleHeight=r},renderItem:function(t){var i,n,r,o=this,s=o.chart,a=s.renderer,l=o.options,h="horizontal"===l.layout,c=o.symbolWidth,u=l.symbolPadding,d=o.itemStyle,p=o.itemHiddenStyle,g=o.padding,m=h?f(l.itemDistance,8):0,v=!l.rtl,b=l.width,y=l.itemMarginBottom||0,x=o.itemMarginTop,w=o.initialItemX,k=t.legendItem,_=t.series&&t.series.drawLegendSymbol?t.series:t,S=_.options,T=o.createCheckboxForItem&&S&&S.showCheckbox,M=l.useHTML;k||(t.legendGroup=a.g("legend-item").attr({zIndex:1}).add(o.scrollGroup),_.drawLegendSymbol(o,t),t.legendItem=k=a.text(l.labelFormat?C(l.labelFormat,t):l.labelFormatter.call(t),v?c+u:-u,o.baseline,M).css(e(t.visible?d:p)).attr({align:v?"left":"right",zIndex:2}).add(t.legendGroup),o.setItemEvents&&o.setItemEvents(t,k,M,d,p),o.colorizeItem(t,t.visible),T&&o.createCheckboxForItem(t)),n=k.getBBox(),r=t.legendItemWidth=l.itemWidth||t.legendItemWidth||c+u+n.width+m+(T?20:0),o.itemHeight=i=ve(t.legendItemHeight||n.height),h&&o.itemX-w+r>(b||s.chartWidth-2*g-w-l.x)&&(o.itemX=w,o.itemY+=x+o.lastLineHeight+y,o.lastLineHeight=0),o.maxItemWidth=xe(o.maxItemWidth,r),o.lastItemY=x+o.itemY+y,o.lastLineHeight=xe(i,o.lastLineHeight),t._legendItemPos=[o.itemX,o.itemY],h?o.itemX+=r:(o.itemY+=x+i+y,o.lastLineHeight=i),o.offsetWidth=b||xe((h?o.itemX-w-m:r)+g,o.offsetWidth)},getAllItems:function(){var t=[];return xi(this.chart.series,function(e){var i=e.options;f(i.showInLegend,u(i.linkedTo)?!1:X,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),t},render:function(){var e,i,n,r,o=this,s=o.chart,a=s.renderer,l=o.group,h=o.box,c=o.options,u=o.padding,d=c.borderWidth,p=c.backgroundColor;o.itemX=o.initialItemX,o.itemY=o.initialItemY,o.offsetWidth=0,o.lastItemY=0,l||(o.group=l=a.g("legend").attr({zIndex:7}).add(),o.contentGroup=a.g().attr({zIndex:1}).add(l),o.scrollGroup=a.g().add(o.contentGroup)),o.renderTitle(),e=o.getAllItems(),M(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&e.reverse(),o.allItems=e,o.display=i=!!e.length,xi(e,function(t){o.renderItem(t)}),n=c.width||o.offsetWidth,r=o.lastItemY+o.lastLineHeight+o.titleHeight,r=o.handleOverflow(r),(d||p)&&(n+=u,r+=u,h?n>0&&r>0&&(h[h.isNew?"attr":"animate"](h.crisp({width:n,height:r})),h.isNew=!1):(o.box=h=a.rect(0,0,n,r,c.borderRadius,d||0).attr({stroke:c.borderColor,"stroke-width":d||0,fill:p||Ze}).add(l).shadow(c.shadow),h.isNew=!0),h[i?"show":"hide"]()),o.legendWidth=n,o.legendHeight=r,xi(e,function(t){o.positionItem(t)}),i&&l.align(t({width:n,height:r},c),!0,"spacingBox"),s.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,r=this.chart,o=r.renderer,s=this.options,a=s.y,l="top"===s.verticalAlign,h=r.spacingBox.height+(l?-a:a)-this.padding,c=s.maxHeight,u=this.clipRect,d=s.navigation,p=f(d.animation,!0),g=d.arrowSize||12,m=this.nav,v=this.pages,b=this.allItems;return"horizontal"===s.layout&&(h/=2),c&&(h=we(h,c)),v.length=0,t>h&&!s.useHTML?(this.clipHeight=e=h-20-this.titleHeight-this.padding,this.currentPage=f(this.currentPage,1),this.fullHeight=t,xi(b,function(t,n){var r=t._legendItemPos[1],o=ve(t.legendItem.getBBox().height),s=v.length;(!s||r-v[s-1]>e&&(i||r)!==v[s-1])&&(v.push(i||r),s++),n===b.length-1&&r+o-v[s-1]>e&&v.push(r),r!==i&&(i=r)}),u||(u=n.clipRect=o.clipRect(0,this.padding,9999,0),n.contentGroup.clip(u)),u.attr({height:e}),m||(this.nav=m=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,g,g).on("click",function(){n.scroll(-1,p)}).add(m),this.pager=o.text("",15,10).css(d.style).add(m),this.down=o.symbol("triangle-down",0,0,g,g).on("click",function(){n.scroll(1,p)}).add(m)),n.scroll(0),t=h):m&&(u.attr({height:r.chartHeight}),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i,n=this.pages,r=n.length,o=this.currentPage+t,s=this.clipHeight,a=this.options.navigation,l=a.activeColor,h=a.inactiveColor,c=this.pager,u=this.padding;o>r&&(o=r),o>0&&(e!==X&&H(e,this.chart),this.nav.attr({translateX:u,translateY:s+this.padding+7+this.titleHeight,visibility:Ue}),this.up.attr({fill:1===o?h:l}).css({cursor:1===o?"default":"pointer"}),c.attr({text:o+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,fill:o===r?h:l}).css({cursor:o===r?"default":"pointer"}),i=-n[o-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=o,this.positionCheckboxes(i))}};var Zi=fi.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||12;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-5-i/2,t.symbolWidth,i,f(t.options.symbolRadius,2)).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i,n,r=this.options,o=r.marker,s=t.options,a=t.symbolWidth,l=this.chart.renderer,h=this.legendGroup,c=t.baseline-ve(.3*l.fontMetrics(s.itemStyle.fontSize).b);r.lineWidth&&(n={"stroke-width":r.lineWidth},r.dashStyle&&(n.dashstyle=r.dashStyle),this.legendLine=l.path([Qe,0,c,Je,a,c]).attr(n).add(h)),o&&o.enabled&&(e=o.radius,this.legendSymbol=i=l.symbol(this.symbol,a/2-e,c-e,2*e,2*e).add(h),i.isMarker=!0)}};(/Trident\/7\.0/.test(Me)||Ie)&&x(Ki.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};i.chart.renderer.forExport?n():setTimeout(n)}),B.prototype={init:function(t,i){var n,r=t.series;t.series=null,n=e(U,t),n.series=t.series=r,this.userOptions=t;var o=n.chart;this.margin=this.splashArray("margin",o),this.spacing=this.splashArray("spacing",o);var s=o.events;this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=o.showAxes;var a,l=this;if(l.index=Be.length,Be.push(l),o.reflow!==!1&&_i(l,"load",function(){l.initReflow()}),s)for(a in s)_i(l,a,s[a]);l.xAxis=[],l.yAxis=[],l.animation=We?!1:f(o.animation,!0),l.pointCount=0,l.counters=new T,l.firstRender()},initSeries:function(t){var e,i=this,n=i.options.chart,r=t.type||n.type||n.defaultSeriesType,o=pi[r];return o||I(17,!0),e=new o,e.init(this,t),e},isInsidePlot:function(t,e,i){var n=i?e:t,r=i?t:e;return n>=0&&n<=this.plotWidth&&r>=0&&r<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&xi(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var i,n,r,o=this,s=o.axes,a=o.series,l=o.pointer,h=o.legend,c=o.isDirtyLegend,u=o.isDirtyBox,d=a.length,p=d,f=o.renderer,g=f.isHidden(),m=[];for(H(e,o),g&&o.cloneRenderTo(),o.layOutTitles();p--;)if(r=a[p],r.options.stacking&&(i=!0,r.isDirty)){n=!0;break}if(n)for(p=d;p--;)r=a[p],r.options.stacking&&(r.isDirty=!0);xi(a,function(t){t.isDirty&&"point"===t.options.legendType&&(c=!0)}),c&&h.options.enabled&&(h.render(),o.isDirtyLegend=!1),i&&o.getStacks(),o.hasCartesianSeries&&(o.isResizing||(o.maxTicks=null,xi(s,function(t){t.setScale()})),o.adjustTickAmounts(),o.getMargins(),xi(s,function(t){t.isDirty&&(u=!0)}),xi(s,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,m.push(function(){Ti(e,"afterSetExtremes",t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(u||i)&&e.redraw()})),u&&o.drawChartBox(),xi(a,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),l&&l.reset(!0),f.draw(),Ti(o,"redraw"),g&&o.cloneRenderTo(!0),xi(m,function(t){t.call()})},get:function(t){var e,i,n,r=this,o=r.axes,s=r.series;for(e=0;e<o.length;e++)if(o[e].options.id===t)return o[e];for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<s.length;e++)for(n=s[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t,e,i=this,n=this.options,r=n.xAxis=p(n.xAxis||{}),o=n.yAxis=p(n.yAxis||{});xi(r,function(t,e){t.index=e,t.isX=!0}),xi(o,function(t,e){t.index=e}),t=r.concat(o),xi(t,function(t){e=new $(i,t)}),i.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return xi(this.series,function(e){t=t.concat(wi(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return wi(this.series,function(t){return t.selected})},getStacks:function(){var t=this;xi(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),xi(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+f(e.options.stack,""))})},setTitle:function(t,i,n){var r,o,s=this,a=s.options;r=a.title=e(a.title,t),o=a.subtitle=e(a.subtitle,i),xi([["title",t,r],["subtitle",i,o]],function(t){var e=t[0],i=s[e],n=t[1],r=t[2];i&&n&&(s[e]=i=i.destroy()),r&&r.text&&!i&&(s[e]=s.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,"class":Ve+e,zIndex:r.zIndex||4}).css(r.style).add())}),s.layOutTitles(n)},layOutTitles:function(e){var i,n=0,r=this.title,o=this.subtitle,s=this.options,a=s.title,l=s.subtitle,h=this.spacingBox.width-44;r&&(r.css({width:(a.width||h)+Ke}).align(t({y:15},a),!1,"spacingBox"),a.floating||a.verticalAlign||(n=r.getBBox().height,n>=18&&25>=n&&(n=15))),o&&(o.css({width:(l.width||h)+Ke}).align(t({y:n+a.margin},l),!1,"spacingBox"),l.floating||l.verticalAlign||(n=ye(n+o.getBBox().height))),i=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&i&&(this.isDirtyBox=i,this.hasRendered&&f(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this,e=t.options.chart,i=e.width,n=e.height,r=t.renderToClone||t.renderTo;u(i)||(t.containerWidth=vi(r,"width")),u(n)||(t.containerHeight=vi(r,"height")),t.chartWidth=xe(0,i||t.containerWidth||600),t.chartHeight=xe(0,f(n,t.containerHeight>19?t.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),P(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),g(e,{position:Xe,top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),fe.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,i,o,s,a,l,h=this,c=h.options.chart,u="data-highcharts-chart";h.renderTo=s=c.renderTo,l=Ve+Re++,r(s)&&(h.renderTo=s=fe.getElementById(s)),s||I(13,!0),a=n(d(s,u)),!isNaN(a)&&Be[a]&&Be[a].hasRendered&&Be[a].destroy(),d(s,u,h.index),s.innerHTML="",c.skipClone||s.offsetWidth||h.cloneRenderTo(),h.getChartSize(),i=h.chartWidth,o=h.chartHeight,h.container=e=m(Ge,{className:Ve+"container"+(c.className?" "+c.className:""),id:l},t({position:je,overflow:qe,width:i+Ke,height:o+Ke,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},c.style),h.renderToClone||s),h._cursor=e.style.cursor,h.renderer=c.forExport?new Wi(e,i,o,c.style,!0):new j(e,i,o,c.style),We&&h.renderer.create(h,e,i,o)},getMargins:function(){var t,e=this,i=e.spacing,n=e.legend,r=e.margin,o=e.options.legend,s=f(o.margin,10),a=o.x,l=o.y,h=o.align,c=o.verticalAlign,d=e.titleOffset;e.resetMargins(),t=e.axisOffset,d&&!u(r[0])&&(e.plotTop=xe(e.plotTop,d+e.options.title.margin+i[0])),n.display&&!o.floating&&("right"===h?u(r[1])||(e.marginRight=xe(e.marginRight,n.legendWidth-a+s+i[1])):"left"===h?u(r[3])||(e.plotLeft=xe(e.plotLeft,n.legendWidth+a+s+i[3])):"top"===c?u(r[0])||(e.plotTop=xe(e.plotTop,n.legendHeight+l+s+i[0])):"bottom"===c&&(u(r[2])||(e.marginBottom=xe(e.marginBottom,n.legendHeight-l+s+i[2])))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&xi(e.axes,function(t){t.getOffset()}),u(r[3])||(e.plotLeft+=t[3]),u(r[0])||(e.plotTop+=t[0]),u(r[2])||(e.marginBottom+=t[2]),u(r[1])||(e.marginRight+=t[1]),e.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,r=i.width||vi(n,"width"),o=i.height||vi(n,"height"),s=t?t.target:ge,a=function(){e.container&&(e.setSize(r,o,!1),e.hasUserSize=null)};e.hasUserSize||!r||!o||s!==ge&&s!==fe||((r!==e.containerWidth||o!==e.containerHeight)&&(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(a,100):a()),e.containerWidth=r,e.containerHeight=o)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};_i(ge,"resize",e),_i(t,"destroy",function(){Si(ge,"resize",e)})},setSize:function(t,e,i){var n,r,o,s=this;s.isResizing+=1,o=function(){s&&Ti(s,"endResize",null,function(){s.isResizing-=1})},H(i,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,u(t)&&(s.chartWidth=n=xe(0,ve(t)),s.hasUserSize=!!n),u(e)&&(s.chartHeight=r=xe(0,ve(e))),(Z?Di:g)(s.container,{width:n+Ke,height:r+Ke},Z),s.setChartSize(!0),s.renderer.setSize(n,r,i),s.maxTicks=null,xi(s.axes,function(t){t.isDirty=!0,t.setScale()}),xi(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.getMargins(),s.redraw(i),s.oldChartHeight=null,Ti(s,"resize"),Z===!1?o():setTimeout(o,Z&&Z.duration||500)},setChartSize:function(t){var e,i,n,r,o,s,a,l=this,h=l.inverted,c=l.renderer,u=l.chartWidth,d=l.chartHeight,p=l.options.chart,f=l.spacing,g=l.clipOffset;l.plotLeft=n=ve(l.plotLeft),l.plotTop=r=ve(l.plotTop),l.plotWidth=o=xe(0,ve(u-n-l.marginRight)),l.plotHeight=s=xe(0,ve(d-r-l.marginBottom)),l.plotSizeX=h?s:o,l.plotSizeY=h?o:s,l.plotBorderWidth=p.plotBorderWidth||0,l.spacingBox=c.spacingBox={x:f[3],y:f[0],width:u-f[3]-f[1],height:d-f[0]-f[2]},l.plotBox=c.plotBox={x:n,y:r,width:o,height:s},a=2*be(l.plotBorderWidth/2),e=ye(xe(a,g[3])/2),i=ye(xe(a,g[0])/2),l.clipBox={x:e,y:i,width:be(l.plotSizeX-xe(a,g[1])/2-e),height:be(l.plotSizeY-xe(a,g[2])/2-i)},t||xi(l.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this,e=t.spacing,i=t.margin;t.plotTop=f(i[0],e[0]),t.marginRight=f(i[1],e[1]),t.marginBottom=f(i[2],e[2]),t.plotLeft=f(i[3],e[3]),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]
},drawChartBox:function(){var t,e,i=this,n=i.options.chart,r=i.renderer,o=i.chartWidth,s=i.chartHeight,a=i.chartBackground,l=i.plotBackground,h=i.plotBorder,c=i.plotBGImage,u=n.borderWidth||0,d=n.backgroundColor,p=n.plotBackgroundColor,f=n.plotBackgroundImage,g=n.plotBorderWidth||0,m=i.plotLeft,v=i.plotTop,b=i.plotWidth,y=i.plotHeight,x=i.plotBox,w=i.clipRect,k=i.clipBox;t=u+(n.shadow?8:0),(u||d)&&(a?a.animate(a.crisp({width:o-t,height:s-t})):(e={fill:d||Ze},u&&(e.stroke=n.borderColor,e["stroke-width"]=u),i.chartBackground=r.rect(t/2,t/2,o-t,s-t,n.borderRadius,u).attr(e).addClass(Ve+"background").add().shadow(n.shadow))),p&&(l?l.animate(x):i.plotBackground=r.rect(m,v,b,y,0).attr({fill:p}).add().shadow(n.plotShadow)),f&&(c?c.animate(x):i.plotBGImage=r.image(f,m,v,b,y).add()),w?w.animate({width:k.width,height:k.height}):i.clipRect=r.clipRect(k),g&&(h?h.animate(h.crisp({x:m,y:v,width:b,height:y})):i.plotBorder=r.rect(m,v,b,y,0,-g).attr({stroke:n.plotBorderColor,"stroke-width":g,fill:Ze,zIndex:1}).add()),i.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,r=n.options.chart,o=n.options.series;xi(["inverted","angular","polar"],function(s){for(t=pi[r.type||r.defaultSeriesType],i=n[s]||r[s]||t&&t.prototype[s],e=o&&o.length;!i&&e--;)t=pi[o[e].type],t&&t.prototype[s]&&(i=!0);n[s]=i})},linkSeries:function(){var t=this,e=t.series;xi(e,function(t){t.linkedSeries.length=0}),xi(e,function(e){var i=e.options.linkedTo;r(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i),i&&(i.linkedSeries.push(e),e.linkedParent=i))})},renderSeries:function(){xi(this.series,function(t){t.translate(),t.setTooltipPoints&&t.setTooltipPoints(),t.render()})},render:function(){var e,i=this,r=i.axes,o=i.renderer,s=i.options,a=s.labels,l=s.credits;i.setTitle(),i.legend=new Ki(i,s.legend),i.getStacks(),xi(r,function(t){t.setScale()}),i.getMargins(),i.maxTicks=null,xi(r,function(t){t.setTickPositions(!0),t.setMaxTicks()}),i.adjustTickAmounts(),i.getMargins(),i.drawChartBox(),i.hasCartesianSeries&&xi(r,function(t){t.render()}),i.seriesGroup||(i.seriesGroup=o.g("series-group").attr({zIndex:3}).add()),i.renderSeries(),a.items&&xi(a.items,function(e){var r=t(a.style,e.style),s=n(r.left)+i.plotLeft,l=n(r.top)+i.plotTop+12;delete r.left,delete r.top,o.text(e.html,s,l).attr({zIndex:2}).css(r).add()}),l.enabled&&!i.credits&&(e=l.href,i.credits=o.text(l.text,0,0).on("click",function(){e&&(location.href=e)}).attr({align:l.position.align,zIndex:8}).css(l.style).add().align(l.position)),i.hasRendered=!0},destroy:function(){var t,e=this,i=e.axes,n=e.series,r=e.container,o=r&&r.parentNode;for(Ti(e,"destroy"),Be[e.index]=X,e.renderTo.removeAttribute("data-highcharts-chart"),Si(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();xi(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),r&&(r.innerHTML="",Si(r),o&&P(r));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!Oe&&ge==ge.top&&"complete"!==fe.readyState||We&&!ge.canvg?(We?Fi.push(function(){t.firstRender()},t.options.global.canvasToolsURL):fe.attachEvent("onreadystatechange",function(){fe.detachEvent("onreadystatechange",t.firstRender),"complete"===fe.readyState&&t.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),Ti(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),xi(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),Ti(t,"beforeRender"),fi.Pointer&&(t.pointer=new Xi(t,e)),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),xi(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),Ti(t,"load"))},splashArray:function(t,e){var i=e[t],n=o(i)?i:[i,i,i,i];return[f(e[t+"Top"],n[0]),f(e[t+"Right"],n[1]),f(e[t+"Bottom"],n[2]),f(e[t+"Left"],n[3])]}},B.prototype.callbacks=[];var Qi=fi.CenteredSeriesMixin={getCenter:function(){var t,e,i=this.options,r=this.chart,o=2*(i.slicedOffset||0),s=r.plotWidth-2*o,a=r.plotHeight-2*o,l=i.center,h=[f(l[0],"50%"),f(l[1],"50%"),i.size||"100%",i.innerSize||0],c=we(s,a);return Ci(h,function(i,r){return e=/%$/.test(i),t=2>r||2===r&&e,(e?[s,a,c,c][r]*n(i)/100:i)+(t?o:0)})}},Ji=function(){};Ji.prototype={init:function(t,e,i){var n,r=this;return r.series=t,r.applyOptions(e,i),r.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,r.color=r.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,r},applyOptions:function(e,i){var n=this,r=n.series,o=r.pointValKey;return e=Ji.prototype.optionsToObject.call(this,e),t(n,e),n.options=n.options?t(n.options,e):e,o&&(n.y=n[o]),n.x===X&&r&&(n.x=i===X?r.autoIncrement():i),n},optionsToObject:function(t){var e,i={},n=this.series,r=n.pointArrayMap||["y"],o=r.length,a=0,l=0;if("number"==typeof t||null===t)i[r[0]]=t;else if(s(t))for(t.length>o&&(e=typeof t[0],"string"===e?i.name=t[0]:"number"===e&&(i.x=t[0]),a++);o>l;)i[r[l++]]=t[a++];else"object"==typeof t&&(i=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return i},destroy:function(){var t,e=this,i=e.series,n=i.chart,r=n.hoverPoints;n.pointCount--,r&&(e.setState(),c(r,e),r.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(Si(e),e.destroyElements()),e.legendItem&&n.legend.destroyItem(e);for(t in e)e[t]=null},destroyElements:function(){for(var t,e=this,i=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)t=i[n],e[t]&&(e[t]=e[t].destroy())},getLabelConfig:function(){var t=this;return{x:t.category,y:t.y,key:t.name||t.category,series:t.series,point:t,percentage:t.percentage,total:t.total||t.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=f(i.valueDecimals,""),r=i.valuePrefix||"",o=i.valueSuffix||"";return xi(e.pointArrayMap||["y"],function(e){e="{point."+e,(r||o)&&(t=t.replace(e+"}",r+e+"}"+o)),t=t.replace(e+"}",e+":,."+n+"f}")}),C(t,{point:this,series:this.series})}};var tn=function(){};tn.prototype={isCartesian:!0,type:"line",pointClass:Ji,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,i){var n,r,o=this,s=e.series,a=function(t,e){return f(t.options.index,t._i)-f(e.options.index,e._i)};o.chart=e,o.options=i=o.setOptions(i),o.linkedSeries=[],o.bindAxes(),t(o,{name:i.name,state:ei,pointAttr:{},visible:i.visible!==!1,selected:i.selected===!0}),We&&(i.animation=!1),r=i.events;for(n in r)_i(o,n,r[n]);(r&&r.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),o.getColor(),o.getSymbol(),xi(o.parallelArrays,function(t){o[t+"Data"]=[]}),o.setData(i.data,!1),o.isCartesian&&(e.hasCartesianSeries=!0),s.push(o),o._i=s.length-1,M(s,a),this.yAxis&&M(this.yAxis.series,a),xi(s,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;xi(e.axisTypes||[],function(r){xi(n[r],function(n){t=n.options,(i[r]===t.index||i[r]!==X&&i[r]===t.id||i[r]===X&&0===t.index)&&(n.series.push(e),e[r]=n,n.isDirty=!0)}),e[r]||e.optionalAxis===r||I(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments,r="number"==typeof e?function(n){var r="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=r}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};xi(i.parallelArrays,r)},autoIncrement:function(){var t=this,e=t.options,i=t.xIncrement;return i=f(i,e.pointStart,0),t.pointInterval=f(t.pointInterval,e.pointInterval,1),t.xIncrement=i+t.pointInterval,i},getSegments:function(){var t,e=this,i=-1,n=[],r=e.points,o=r.length;if(o)if(e.options.connectNulls){for(t=o;t--;)null===r[t].y&&r.splice(t,1);r.length&&(n=[r])}else xi(r,function(t,e){null===t.y?(e>i+1&&n.push(r.slice(i+1,e)),i=e):e===o-1&&n.push(r.slice(i+1,e+1))});e.segments=n},setOptions:function(t){var i,n=this.chart,r=n.options,o=r.plotOptions,s=n.userOptions||{},a=s.plotOptions||{},l=o[this.type];return this.userOptions=t,i=e(l,o.series,t),this.tooltipOptions=e(U.tooltip,U.plotOptions[this.type].tooltip,s.tooltip,a.series&&a.series.tooltip,a[this.type]&&a[this.type].tooltip,t.tooltip),null===l.marker&&delete i.marker,i},getColor:function(){var t,e,i=this.options,n=this.userOptions,r=this.chart.options.colors,o=this.chart.counters;t=i.color||Pi[this.type].color,t||i.colorByPoint||(u(n._colorIndex)?e=n._colorIndex:(n._colorIndex=o.color,e=o.color++),t=r[e]),this.color=t,o.wrapColor(r.length)},getSymbol:function(){var t,e=this,i=e.userOptions,n=e.options.marker,r=e.chart,o=r.options.symbols,s=r.counters;e.symbol=n.symbol,e.symbol||(u(i._symbolIndex)?t=i._symbolIndex:(i._symbolIndex=s.symbol,t=s.symbol++),e.symbol=o[t]),/^url/.test(e.symbol)&&(n.radius=0),s.wrapSymbol(o.length)},drawLegendSymbol:Zi.drawLineMarker,setData:function(t,e,i,n){var o,l,h,c=this,u=c.points,d=u&&u.length||0,p=c.options,g=c.chart,m=null,v=c.xAxis,b=v&&!!v.categories,y=c.tooltipPoints,x=p.turboThreshold,w=this.xData,k=this.yData,C=c.pointArrayMap,_=C&&C.length;if(t=t||[],o=t.length,e=f(e,!0),n===!1||!o||d!==o||c.cropped||c.hasGroupedData){if(c.xIncrement=null,c.pointRange=b?1:p.pointRange,c.colorCounter=0,xi(this.parallelArrays,function(t){c[t+"Data"].length=0}),x&&o>x){for(l=0;null===m&&o>l;)m=t[l],l++;if(a(m)){var S=f(p.pointStart,0),T=f(p.pointInterval,1);for(l=0;o>l;l++)w[l]=S,k[l]=t[l],S+=T;c.xIncrement=S}else if(s(m))if(_)for(l=0;o>l;l++)h=t[l],w[l]=h[0],k[l]=h.slice(1,_+1);else for(l=0;o>l;l++)h=t[l],w[l]=h[0],k[l]=h[1];else I(12)}else for(l=0;o>l;l++)t[l]!==X&&(h={series:c},c.pointClass.prototype.applyOptions.apply(h,[t[l]]),c.updateParallelArrays(h,l),b&&h.name&&(v.names[h.x]=h.name));for(r(k[0])&&I(14,!0),c.data=[],c.options.data=t,l=d;l--;)u[l]&&u[l].destroy&&u[l].destroy();y&&(y.length=0),v&&(v.minRange=v.userMinRange),c.isDirty=c.isDirtyData=g.isDirtyBox=!0,i=!1}else xi(t,function(t,e){u[e].update(t,!1)});e&&g.redraw(i)},processData:function(t){var e,i,n,r,o,s=this,a=s.xData,l=s.yData,h=a.length,c=0,u=s.xAxis,d=s.options,p=d.cropThreshold,f=s.isCartesian;if(f&&!s.isDirty&&!u.isDirty&&!s.yAxis.isDirty&&!t)return!1;if(f&&s.sorted&&(!p||h>p||s.forceCrop)){var g=u.min,m=u.max;a[h-1]<g||a[0]>m?(a=[],l=[]):(a[0]<g||a[h-1]>m)&&(e=this.cropData(s.xData,s.yData,g,m),a=e.xData,l=e.yData,c=e.start,i=!0)}for(o=a.length-1;o>=0;o--)n=a[o]-a[o-1],n>0&&(r===X||r>n)?r=n:0>n&&s.requireSorting&&I(15);s.cropped=i,s.cropStart=c,s.processedXData=a,s.processedYData=l,null===d.pointRange&&(s.pointRange=r||1),s.closestPointRange=r},cropData:function(t,e,i,n){var r,o=t.length,s=0,a=o,l=f(this.cropShoulder,1);for(r=0;o>r;r++)if(t[r]>=i){s=xe(0,r-l);break}for(;o>r;r++)if(t[r]>n){a=r+l;break}return{xData:t.slice(s,a),yData:e.slice(s,a),start:s,end:a}},generatePoints:function(){var t,e,i,n,r=this,o=r.options,s=o.data,a=r.data,l=r.processedXData,h=r.processedYData,c=r.pointClass,u=l.length,d=r.cropStart||0,f=r.hasGroupedData,g=[];if(!a&&!f){var m=[];m.length=s.length,a=r.data=m}for(n=0;u>n;n++)e=d+n,f?g[n]=(new c).init(r,[l[n]].concat(p(h[n]))):(a[e]?i=a[e]:s[e]!==X&&(a[e]=i=(new c).init(r,s[e],l[n])),g[n]=i);if(a&&(u!==(t=a.length)||f))for(n=0;t>n;n++)n!==d||f||(n+=u),a[n]&&(a[n].destroyElements(),a[n].plotX=X);r.data=a,r.points=g},getExtremes:function(t){var e,i,n,r,o,s,a,l,h,c=this.xAxis,u=this.yAxis,d=this.processedXData,p=[],g=0,m=c.getExtremes(),v=m.min,b=m.max;for(t=t||this.stackedYData||this.processedYData,e=t.length,l=0;e>l;l++)if(s=d[l],a=t[l],i=null!==a&&a!==X&&(!u.isLog||a.length||a>0),n=this.getExtremesFromAll||this.cropped||(d[l+1]||s)>=v&&(d[l-1]||s)<=b,i&&n)if(h=a.length)for(;h--;)null!==a[h]&&(p[g++]=a[h]);else p[g++]=a;this.dataMin=f(r,D(p)),this.dataMax=f(o,L(p))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e=this,i=e.options,n=i.stacking,r=e.xAxis,o=r.categories,s=e.yAxis,l=e.points,h=l.length,c=!!e.modifyValue,d=i.pointPlacement,p="between"===d||a(d),g=i.threshold;for(t=0;h>t;t++){var m,v,b=l[t],y=b.x,x=b.y,w=b.low,k=n&&s.stacks[(e.negStacks&&g>x?"-":"")+e.stackKey];s.isLog&&0>=x&&(b.y=x=null),b.plotX=r.translate(y,0,0,0,1,d,"flags"===this.type),n&&e.visible&&k&&k[y]&&(m=k[y],v=m.points[e.index],w=v[0],x=v[1],0===w&&(w=f(g,s.min)),s.isLog&&0>=w&&(w=null),b.total=b.stackTotal=m.total,b.percentage=m.total&&100*(b.y/m.total),b.stackY=x,m.setOffset(e.pointXOffset||0,e.barW||0)),b.yBottom=u(w)?s.translate(w,0,1,0,1):null,c&&(x=e.modifyValue(x,b)),b.plotY="number"==typeof x&&1/0!==x?s.translate(x,0,1,0,1):X,b.clientX=p?r.translate(y,0,0,0,1):b.plotX,b.negative=b.y<(g||0),b.category=o&&o[b.x]!==X?o[b.x]:b.x}e.getSegments()},animate:function(e){var i,n,r,s=this,a=s.chart,l=a.renderer,h=s.options.animation,c=a.clipBox,u=a.inverted;h&&!o(h)&&(h=Pi[s.type].animation),r="_sharedClip"+h.duration+h.easing,e?(i=a[r],n=a[r+"m"],i||(a[r]=i=l.clipRect(t(c,{width:0})),a[r+"m"]=n=l.clipRect(-99,u?-a.plotLeft:-a.plotTop,99,u?a.chartWidth:a.chartHeight)),s.group.clip(i),s.markerGroup.clip(n),s.sharedClipKey=r):(i=a[r],i&&(i.animate({width:a.plotSizeX},h),a[r+"m"].animate({width:a.plotSizeX+99},h)),s.animate=null,s.animationTimeout=setTimeout(function(){s.afterAnimate()},h.duration))},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,i=this.group;i&&this.options.clip!==!1&&(i.clip(t.clipRect),this.markerGroup.clip()),setTimeout(function(){e&&t[e]&&(t[e]=t[e].destroy(),t[e+"m"]=t[e+"m"].destroy())},100)},drawPoints:function(){var e,i,n,r,o,s,a,l,h,c,u,d,p=this,g=p.points,m=p.chart,v=p.options,b=v.marker,y=p.pointAttr[""],x=p.markerGroup;if(b.enabled||p._hasPointMarkers)for(r=g.length;r--;)o=g[r],i=be(o.plotX),n=o.plotY,h=o.graphic,c=o.marker||{},u=b.enabled&&c.enabled===X||c.enabled,d=m.isInsidePlot(ve(i),n,m.inverted),u&&n!==X&&!isNaN(n)&&null!==o.y?(e=o.pointAttr[o.selected?ni:ei]||y,s=e.r,a=f(c.symbol,p.symbol),l=0===a.indexOf("url"),h?h.attr({visibility:d?"inherit":qe}).animate(t({x:i-s,y:n-s},h.symbolName?{width:2*s,height:2*s}:{})):d&&(s>0||l)&&(o.graphic=h=m.renderer.symbol(a,i-s,n-s,2*s,2*s).attr(e).add(x))):h&&(o.graphic=h.destroy())},convertAttribs:function(t,e,i,n){var r,o,s=this.pointAttrToOptions,a={};t=t||{},e=e||{},i=i||{},n=n||{};for(r in s)o=s[r],a[r]=f(t[o],e[r],i[r],n[r]);return a},getAttribs:function(){var e,i,n,r,o,s,a=this,l=a.options,h=Pi[a.type].marker?l.marker:l,c=h.states,d=c[ii],p=a.color,f={stroke:p,fill:p},g=a.points||[],m=[],v=a.pointAttrToOptions,b=a.hasPointSpecificOptions,y=l.negativeColor,x=h.lineColor,w=h.fillColor,k=l.turboThreshold;if(l.marker?(d.radius=d.radius||h.radius+2,d.lineWidth=d.lineWidth||h.lineWidth+1):d.color=d.color||Ei(d.color||p).brighten(d.brightness).get(),m[ei]=a.convertAttribs(h,f),xi([ii,ni],function(t){m[t]=a.convertAttribs(c[t],m[ei])}),a.pointAttr=m,i=g.length,!k||k>i||b)for(;i--;){if(n=g[i],h=n.options&&n.options.marker||n.options,h&&h.enabled===!1&&(h.radius=0),n.negative&&y&&(n.color=n.fillColor=y),b=l.colorByPoint||n.color,n.options)for(s in v)u(h[v[s]])&&(b=!0);b?(h=h||{},r=[],c=h.states||{},e=c[ii]=c[ii]||{},l.marker||(e.color=e.color||!n.options.color&&d.color||Ei(n.color).brighten(e.brightness||d.brightness).get()),o={color:n.color},w||(o.fillColor=n.color),x||(o.lineColor=n.color),r[ei]=a.convertAttribs(t(o,h),m[ei]),r[ii]=a.convertAttribs(c[ii],m[ii],r[ei]),r[ni]=a.convertAttribs(c[ni],m[ni],r[ei])):r=m,n.pointAttr=r}},destroy:function(){var t,e,i,n,r,o=this,s=o.chart,a=/AppleWebKit\/533/.test(Me),l=o.data||[];for(Ti(o,"destroy"),Si(o),xi(o.axisTypes||[],function(t){r=o[t],r&&(c(r.series,o),r.isDirty=r.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),e=l.length;e--;)i=l[e],i&&i.destroy&&i.destroy();o.points=null,clearTimeout(o.animationTimeout),xi(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(e){o[e]&&(t=a&&"group"===e?"hide":"destroy",o[e][t]())}),s.hoverSeries===o&&(s.hoverSeries=null),c(s.series,o);for(n in o)delete o[n]},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return xi(t,function(r,o){var s,a=r.plotX,l=r.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,r,o)):(i.push(o?Je:Qe),n&&o&&(s=t[o-1],"right"===n?i.push(s.plotX,l):"center"===n?i.push((s.plotX+a)/2,s.plotY,(s.plotX+a)/2,l):i.push(a,s.plotY)),i.push(r.plotX,r.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return xi(e.segments,function(r){t=e.getSegmentPath(r),r.length>1?i=i.concat(t):n.push(r[0])}),e.singlePoints=n,e.graphPath=i,i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color]],n=e.lineWidth,r=e.dashStyle,o="square"!==e.linecap,s=this.getGraphPath(),a=e.negativeColor;a&&i.push(["graphNeg",a]),xi(i,function(i,a){var l,h=i[0],c=t[h];c?(Li(c),c.animate({d:s})):n&&s.length&&(l={stroke:i[1],"stroke-width":n,fill:Ze,zIndex:1},r?l.dashstyle=r:o&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),t[h]=t.chart.renderer.path(s).attr(l).add(t.group).shadow(!a&&e.shadow))})},clipNeg:function(){var t,e,i,n,r,o=this.options,s=this.chart,a=s.renderer,l=o.negativeColor||o.negativeFillColor,h=this.graph,c=this.area,u=this.posClip,d=this.negClip,p=s.chartWidth,f=s.chartHeight,g=xe(p,f),m=this.yAxis;l&&(h||c)&&(t=ve(m.toPixels(o.threshold||0,!0)),0>t&&(g-=t),n={x:0,y:0,width:g,height:t},r={x:0,y:t,width:g,height:g},s.inverted&&(n.height=r.y=s.plotWidth-t,a.isVML&&(n={x:s.plotWidth-t-s.plotLeft,y:0,width:p,height:f},r={x:t+s.plotLeft-p,y:0,width:s.plotLeft+t,height:p})),m.reversed?(e=r,i=n):(e=n,i=r),u?(u.animate(e),d.animate(i)):(this.posClip=u=a.clipRect(e),this.negClip=d=a.clipRect(i),h&&this.graphNeg&&(h.clip(u),this.graphNeg.clip(d)),c&&(c.clip(u),this.areaNeg.clip(d))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};xi(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(_i(i,"resize",t),_i(e,"destroy",function(){Si(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,r){var o=this[t],s=!o;return s&&(this[t]=o=this.chart.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(r)),o[s?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){return{translateX:this.xAxis?this.xAxis.left:this.chart.plotLeft,translateY:this.yAxis?this.yAxis.top:this.chart.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,r=n.animation,o=r&&!!e.animate&&i.renderer.isSVG,s=e.visible?Ue:qe,a=n.zIndex,l=e.hasRendered,h=i.seriesGroup;t=e.plotGroup("group","series",s,a,h),e.markerGroup=e.plotGroup("markerGroup","markers",s,a,h),o&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?i.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),i.inverted&&e.invertGroups(),n.clip===!1||e.sharedClipKey||l||t.clip(i.clipRect),o?e.animate():l||e.afterAnimate(),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this,e=t.chart,i=t.isDirtyData,n=t.group,r=t.xAxis,o=t.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:f(r&&r.left,e.plotLeft),translateY:f(o&&o.top,e.plotTop)})),t.translate(),t.setTooltipPoints(!0),t.render(),i&&Ti(t,"updatedData")}},F.prototype={destroy:function(){A(this,this.axis)},render:function(t){var e=this.options,i=e.format,n=i?C(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:qe}):this.label=this.axis.chart.renderer.text(n,0,0,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:qe}).add(t)},setOffset:function(t,e){var i,n=this,r=n.axis,o=r.chart,s=o.inverted,a=this.isNegative,l=r.translate(this.percent?100:this.total,0,0,0,1),h=r.translate(0),c=ke(l-h),u=o.xAxis[0].translate(this.x)+t,d=o.plotHeight,p={x:s?a?l:l-c:u,y:s?d-u-e:a?d-l-c:d-l,width:s?c:e,height:s?e:c},f=this.label;f&&(f.align(this.alignOptions,null,p),i=f.alignAttr,f[this.options.crop===!1||o.isInsidePlot(i.x,i.y)?"show":"hide"](!0))}},$.prototype.buildStacks=function(){var t=this.series,e=f(this.options.reversedStacks,!0),i=t.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)t[e?i:t.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;i<t.length;i++)t[i].setPercentStacks()}},$.prototype.renderStackTotals=function(){var t,e,i,n=this,r=n.chart,o=r.renderer,s=n.stacks,a=n.stackTotalGroup;a||(n.stackTotalGroup=a=o.g("stack-labels").attr({visibility:Ue,zIndex:6}).add()),a.translate(r.plotLeft,r.plotTop);for(t in s){e=s[t];for(i in e)e[i].render(a)}},tn.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,i,n,r,o,s,a=this,l=a.processedXData,h=a.processedYData,c=[],u=h.length,d=a.options,p=d.threshold,f=d.stack,g=d.stacking,m=a.stackKey,v="-"+m,b=a.negStacks,y=a.yAxis,x=y.stacks,w=y.oldStacks;for(r=0;u>r;r++)o=l[r],s=h[r],t=b&&p>s,n=t?v:m,x[n]||(x[n]={}),x[n][o]||(w[n]&&w[n][o]?(x[n][o]=w[n][o],x[n][o].total=null):x[n][o]=new F(y,y.options.stackLabels,t,o,f,g)),e=x[n][o],e.points[a.index]=[e.cum||0],"percent"===g?(i=t?m:v,b&&x[i]&&x[i][o]?(i=x[i][o],e.total=i.total=xe(i.total,e.total)+ke(s)||0):e.total=z(e.total+(ke(s)||0))):e.total=z(e.total+(s||0)),e.cum=(e.cum||0)+(s||0),e.points[a.index].push(e.cum),c[r]=e.cum;"percent"===g&&(y.usePercentage=!0),this.stackedYData=c,y.oldStacks={}}},tn.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,i=t.yAxis.stacks,n=t.processedXData;xi([e,"-"+e],function(e){for(var r,o,s,a,l=n.length;l--;)r=n[l],o=i[e]&&i[e][r],s=o&&o.points[t.index],s&&(a=o.total?100/o.total:0,s[0]=z(s[0]*a),s[1]=z(s[1]*a),t.stackedYData[l]=s[1])})},t(B.prototype,{addSeries:function(t,e,i){var n,r=this;return t&&(e=f(e,!0),Ti(r,"addSeries",{options:t},function(){n=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),e&&r.redraw(i)})),n},addAxis:function(t,i,n,r){var o,s=i?"xAxis":"yAxis",a=this.options;o=new $(this,e(t,{index:this[s].length,isX:i})),a[s]=p(a[s]||{}),a[s].push(t),f(n,!0)&&this.redraw(r)},showLoading:function(e){var i=this,n=i.options,r=i.loadingDiv,o=n.loading;r||(i.loadingDiv=r=m(Ge,{className:Ve+"loading"},t(o.style,{zIndex:10,display:Ze}),i.container),i.loadingSpan=m("span",null,o.labelStyle,r)),i.loadingSpan.innerHTML=e||n.lang.loading,i.loadingShown||(g(r,{opacity:0,display:"",left:i.plotLeft+Ke,top:i.plotTop+Ke,width:i.plotWidth+Ke,height:i.plotHeight+Ke}),Di(r,{opacity:o.style.opacity},{duration:o.showDuration||0}),i.loadingShown=!0)},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&Di(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){g(e,{display:Ze})}}),this.loadingShown=!1}}),t(Ji.prototype,{update:function(t,e,i){var n,r=this,s=r.series,a=r.graphic,l=s.data,h=s.chart,c=s.options;e=f(e,!0),r.firePointEvent("update",{options:t},function(){r.applyOptions(t),o(t)&&(s.getAttribs(),a&&(t&&t.marker&&t.marker.symbol?r.graphic=a.destroy():a.attr(r.pointAttr[r.state||""])),t&&t.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy())),n=yi(r,l),s.updateParallelArrays(r,n),c.data[n]=r.options,s.isDirty=s.isDirtyData=!0,!s.fixedBox&&s.hasCartesianSeries&&(h.isDirtyBox=!0),"point"===c.legendType&&h.legend.destroyItem(r),e&&h.redraw(i)})},remove:function(t,e){var i,n=this,r=n.series,o=r.points,s=r.chart,a=r.data;H(e,s),t=f(t,!0),n.firePointEvent("remove",null,function(){i=yi(n,a),a.length===o.length&&o.splice(i,1),a.splice(i,1),r.options.data.splice(i,1),r.updateParallelArrays(n,"splice",i,1),n.destroy(),r.isDirty=!0,r.isDirtyData=!0,t&&s.redraw()})}}),t(tn.prototype,{updateNavigator:function(t){this.chart.scroller&&(this.chart.redraw(),this.chart.scroller.updatedDataHandler(null,!0,t))},addPoint:function(t,e,i,n){var r,o,s,a,l=this,h=l.options,c=l.data,u=l.graph,d=l.area,p=l.chart,g=l.xAxis&&l.xAxis.names,m=u&&u.shift||0,v=h.data,b=l.xData;if(H(n,p),i&&xi([u,d,l.graphNeg,l.areaNeg],function(t){t&&(t.shift=m+1)}),d&&(d.isArea=!0),e=f(e,!0),r={series:l},l.pointClass.prototype.applyOptions.apply(r,[t]),s=r.x,a=b.length,l.requireSorting&&s<b[a-1])for(o=!0;a&&b[a-1]>s;)a--;l.updateParallelArrays(r,"splice",a,0,0),l.updateParallelArrays(r,a),g&&(g[s]=r.name),v.splice(a,0,t),o&&(l.data.splice(a,0,null),l.processData()),"point"===h.legendType&&l.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),l.updateParallelArrays(r,"shift"),v.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&(l.getAttribs(),p.redraw())},remove:function(t,e){var i=this,n=i.chart;t=f(t,!0),i.isRemoving||(i.isRemoving=!0,Ti(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),t&&n.redraw(e)})),i.isRemoving=!1},update:function(i,n){var r,o=this.chart,s=this.userOptions,a=this.type,l=pi[a].prototype;i=e(s,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},i),this.remove(!1);for(r in l)l.hasOwnProperty(r)&&(this[r]=X);t(this,pi[i.type||a].prototype),this.init(o,i),f(n,!0)&&o.redraw(!1)}}),t($.prototype,{update:function(i,n){var r=this.chart;i=r.options[this.coll][this.options.index]=e(this.userOptions,i),this.destroy(!0),this._addedPlotLB=this.userMin=this.userMax=X,this.init(r,t(i,{events:X})),r.isDirtyBox=!0,f(n,!0)&&r.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,r=n.length;r--;)n[r]&&n[r].remove(!1);c(e.axes,this),c(e[i],this),e.options[i].splice(this.options.index,1),xi(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,f(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var en=v(tn);pi.line=en,Pi.area=e(Ii,{threshold:0});var nn=v(tn,{type:"area",getSegments:function(){var t,e,i,n,r,o=[],s=[],a=[],l=this.xAxis,h=this.yAxis,c=h.stacks[this.stackKey],u={},d=this.points,p=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(n=0;n<d.length;n++)u[d[n].x]=d[n];for(r in c)null!==c[r].total&&a.push(+r);a.sort(function(t,e){return t-e}),xi(a,function(n){(!p||u[n]&&null!==u[n].y)&&(u[n]?s.push(u[n]):(t=l.translate(n),i=c[n].percent?c[n].total?100*c[n].cum/c[n].total:0:c[n].cum,e=h.toPixels(i,!0),s.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:$e})))}),s.length&&o.push(s)}else tn.prototype.getSegments.call(this),o=this.segments;this.segments=o},getSegmentPath:function(t){var e,i,n=tn.prototype.getSegmentPath.call(this,t),r=[].concat(n),o=this.options,s=n.length,a=this.yAxis.getThreshold(o.threshold);if(3===s&&r.push(Je,n[1],n[2]),o.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)i=f(t[e].yBottom,a),e<t.length-1&&o.step&&r.push(t[e+1].plotX,i),r.push(t[e].plotX,i);else this.closeSegment(r,t,a);return this.areaPath=this.areaPath.concat(r),n},closeSegment:function(t,e,i){t.push(Je,e[e.length-1].plotX,i,Je,e[0].plotX,i)},drawGraph:function(){this.areaPath=[],tn.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=i.negativeColor,r=i.negativeFillColor,o=[["area",this.color,i.fillColor]];(n||r)&&o.push(["areaNeg",n,r]),xi(o,function(n){var r=n[0],o=t[r];o?o.animate({d:e}):t[r]=t.chart.renderer.path(e).attr({fill:f(n[2],Ei(n[1]).setOpacity(f(i.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:Zi.drawRectangle});pi.area=nn,Pi.spline=e(Ii);var rn=v(tn,{type:"spline",getPointSpline:function(t,e,i){var n,r,o,s,a,l=1.5,h=l+1,c=e.plotX,u=e.plotY,d=t[i-1],p=t[i+1];if(d&&p){var f,g=d.plotX,m=d.plotY,v=p.plotX,b=p.plotY;n=(l*c+g)/h,r=(l*u+m)/h,o=(l*c+v)/h,s=(l*u+b)/h,f=(s-r)*(o-c)/(o-n)+u-s,r+=f,s+=f,r>m&&r>u?(r=xe(m,u),s=2*u-r):m>r&&u>r&&(r=we(m,u),s=2*u-r),s>b&&s>u?(s=xe(b,u),r=2*u-s):b>s&&u>s&&(s=we(b,u),r=2*u-s),e.rightContX=o,e.rightContY=s}return i?(a=["C",d.rightContX||d.plotX,d.rightContY||d.plotY,n||c,r||u,c,u],d.rightContX=d.rightContY=null):a=[Qe,c,u],a}});pi.spline=rn,Pi.areaspline=e(Pi.area);var on=nn.prototype,sn=v(rn,{type:"areaspline",closedStacks:!0,getSegmentPath:on.getSegmentPath,closeSegment:on.closeSegment,drawGraph:on.drawGraph,drawLegendSymbol:Zi.drawRectangle});pi.areaspline=sn,Pi.column=e(Ii,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0});var an=v(tn,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){tn.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&xi(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.options,r=i.xAxis,o=i.yAxis,s=r.reversed,a={},l=0;n.grouping===!1?l=1:xi(i.chart.series,function(n){var r=n.options,s=n.yAxis;n.type===i.type&&n.visible&&o.len===s.len&&o.pos===s.pos&&(r.stacking?(t=n.stackKey,a[t]===X&&(a[t]=l++),e=a[t]):r.grouping!==!1&&(e=l++),n.columnIndex=e)});var h=we(ke(r.transA)*(r.ordinalSlope||n.pointRange||r.closestPointRange||r.tickInterval||1),r.len),c=h*n.groupPadding,d=h-2*c,p=d/l,g=n.pointWidth,m=u(g)?(p-g)/2:p*n.pointPadding,v=f(g,p-2*m),b=(s?l-(i.columnIndex||0):i.columnIndex)||0,y=m+(c+b*p-h/2)*(s?-1:1);return i.columnMetrics={width:v,offset:y}},translate:function(){var t=this,e=t.chart,i=t.options,n=i.borderWidth,r=t.yAxis,o=i.threshold,s=t.translatedThreshold=r.getThreshold(o),a=f(i.minPointLength,5),l=t.getColumnMetrics(),h=l.width,c=t.barW=ye(xe(h,1+2*n)),u=t.pointXOffset=l.offset,d=-(n%2?.5:0),p=n%2?.5:1;e.renderer.isVML&&e.inverted&&(p+=1),tn.prototype.translate.apply(t),xi(t.points,function(t){var e,i,n,o,l=f(t.yBottom,s),g=we(xe(-999-l,t.plotY),r.len+999+l),m=t.plotX+u,v=c,b=we(g,l),y=xe(g,l)-b;ke(y)<a&&a&&(y=a,b=ve(ke(b-s)>a?l-a:s-(r.translate(t.y,0,1,0,1)<=s?a:0))),t.barX=m,t.pointWidth=h,o=ke(m)<.5,e=ve(m+v)+d,m=ve(m)+d,v=e-m,n=ke(b)<.5,i=ve(b+y)+p,b=ve(b)+p,y=i-b,o&&(m+=1,v-=1),n&&(b-=1,y+=1),t.shapeType="rect",t.shapeArgs={x:m,y:b,width:v,height:y}})},getSymbol:$e,drawLegendSymbol:Zi.drawRectangle,drawGraph:$e,drawPoints:function(){var t,i=this,n=this.chart,r=i.options,o=n.renderer,s=r.animationLimit||250;xi(i.points,function(n){var a=n.plotY,l=n.graphic;a===X||isNaN(a)||null===n.y?l&&(n.graphic=l.destroy()):(t=n.shapeArgs,l?(Li(l),l[i.points.length<s?"animate":"attr"](e(t))):n.graphic=l=o[n.shapeType](t).attr(n.pointAttr[n.selected?ni:ei]).add(i.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},animate:function(t){var e,i=this,n=this.yAxis,r=i.options,o=this.chart.inverted,s={};Oe&&(t?(s.scaleY=.001,e=we(n.pos+n.len,xe(n.pos,n.toPixels(r.threshold))),o?s.translateX=e-n.len:s.translateY=e,i.group.attr(s)):(s.scaleY=1,s[o?"translateX":"translateY"]=n.pos,i.group.animate(s,i.options.animation),i.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&xi(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),tn.prototype.remove.apply(t,arguments)}});pi.column=an,Pi.bar=e(Pi.column);var ln=v(an,{type:"bar",inverted:!0});pi.bar=ln,Pi.scatter=e(Ii,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1});var hn=v(tn,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&tn.prototype.drawGraph.call(this)}});pi.scatter=hn,Pi.pie=e(Ii,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var cn=v(Ji,{init:function(){Ji.prototype.init.apply(this,arguments);var e,i=this;return i.y<0&&(i.y=null),t(i,{visible:i.visible!==!1,name:f(i.name,"Slice")}),e=function(t){i.slice("select"===t.type)},_i(i,"select",e),_i(i,"unselect",e),i},setVisible:function(t){var e=this,i=e.series,n=i.chart;e.visible=e.options.visible=t=t===X?!e.visible:t,i.options.data[yi(e,i.data)]=e.options,xi(["graphic","dataLabel","connector","shadowGroup"],function(i){e[i]&&e[i][t?"show":"hide"](!0)}),e.legendItem&&n.legend.colorizeItem(e,t),!i.isDirty&&i.options.ignoreHiddenPoint&&(i.isDirty=!0,n.redraw())},slice:function(t,e,i){var n,r=this,o=r.series,s=o.chart;H(i,s),e=f(e,!0),r.sliced=r.options.sliced=t=u(t)?t:!r.sliced,o.options.data[yi(r,o.data)]=r.options,n=t?r.slicedTranslation:{translateX:0,translateY:0},r.graphic.animate(n),r.shadowGroup&&r.shadowGroup.animate(n)
}}),un={type:"pie",isCartesian:!1,pointClass:cn,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:$e,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(xi(i,function(t){var i=t.graphic,r=t.shapeArgs;i&&(i.attr({r:e.center[3]/2,start:n,end:n}),i.animate({r:r.r,start:r.start,end:r.end},e.options.animation))}),e.animate=null)},setData:function(t,e,i,n){tn.prototype.setData.call(this,t,!1,i,n),this.processData(),this.generatePoints(),f(e,!0)&&this.chart.redraw(i)},generatePoints:function(){var t,e,i,n,r=0,o=this.options.ignoreHiddenPoint;for(tn.prototype.generatePoints.call(this),e=this.points,i=e.length,t=0;i>t;t++)n=e[t],r+=o&&!n.visible?0:n.y;for(this.total=r,t=0;i>t;t++)n=e[t],n.percentage=r>0?100*(n.y/r):0,n.total=r},translate:function(t){this.generatePoints();var e,i,n,r,o,s,a,l=this,h=0,c=1e3,u=l.options,d=u.slicedOffset,p=d+u.borderWidth,g=u.startAngle||0,m=l.startAngleRad=Se/180*(g-90),v=l.endAngleRad=Se/180*(f(u.endAngle,g+360)-90),b=v-m,y=l.points,x=u.dataLabels.distance,w=u.ignoreHiddenPoint,k=y.length;for(t||(l.center=t=l.getCenter()),l.getX=function(e,i){return n=me.asin(we((e-t[1])/(t[2]/2+x),1)),t[0]+(i?-1:1)*Ce(n)*(t[2]/2+x)},s=0;k>s;s++)a=y[s],e=m+h*b,(!w||a.visible)&&(h+=a.percentage/100),i=m+h*b,a.shapeType="arc",a.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:ve(e*c)/c,end:ve(i*c)/c},n=(i+e)/2,n>1.5*Se?n-=2*Se:-Se/2>n&&(n+=2*Se),a.slicedTranslation={translateX:ve(Ce(n)*d),translateY:ve(_e(n)*d)},r=Ce(n)*t[2]/2,o=_e(n)*t[2]/2,a.tooltipPos=[t[0]+.7*r,t[1]+.7*o],a.half=-Se/2>n||n>Se/2?1:0,a.angle=n,p=we(p,x/2),a.labelPos=[t[0]+r+Ce(n)*x,t[1]+o+_e(n)*x,t[0]+r+Ce(n)*p,t[1]+o+_e(n)*p,t[0]+r,t[1]+o,0>x?"center":a.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var e,i,n,r,o=this,s=o.chart,a=s.renderer,l=o.options.shadow;l&&!o.shadowGroup&&(o.shadowGroup=a.g("shadow").add(o.group)),xi(o.points,function(s){i=s.graphic,r=s.shapeArgs,n=s.shadowGroup,l&&!n&&(n=s.shadowGroup=a.g("shadow").add(o.shadowGroup)),e=s.sliced?s.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(e),i?i.animate(t(r,e)):s.graphic=i=a[s.shapeType](r).setRadialReference(o.center).attr(s.pointAttr[s.selected?ni:ei]).attr({"stroke-linejoin":"round"}).attr(e).add(o.group).shadow(l,n),void 0!==s.visible&&s.setVisible(s.visible)})},sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:Zi.drawRectangle,getCenter:Qi.getCenter,getSymbol:$e};un=v(tn,un),pi.pie=un,tn.prototype.drawDataLabels=function(){var i,n,r,o,s=this,a=s.options,l=a.cursor,h=a.dataLabels,c=s.points;(h.enabled||s._hasPointLabels)&&(s.dlProcessOptions&&s.dlProcessOptions(h),o=s.plotGroup("dataLabelsGroup","data-labels",s.visible?Ue:qe,h.zIndex||6),n=h,xi(c,function(a){var c,d,p,g,m,v=a.dataLabel,b=a.connector,y=!0;if(i=a.options&&a.options.dataLabels,c=f(i&&i.enabled,n.enabled),v&&!c)a.dataLabel=v.destroy();else if(c){if(h=e(n,i),m=h.rotation,d=a.getLabelConfig(),r=h.format?C(h.format,d):h.formatter.call(d,h),h.style.color=f(h.color,h.style.color,s.color,"black"),v)u(r)?(v.attr({text:r}),y=!1):(a.dataLabel=v=v.destroy(),b&&(a.connector=b.destroy()));else if(u(r)){p={fill:h.backgroundColor,stroke:h.borderColor,"stroke-width":h.borderWidth,r:h.borderRadius||0,rotation:m,padding:h.padding,zIndex:1};for(g in p)p[g]===X&&delete p[g];v=a.dataLabel=s.chart.renderer[m?"text":"label"](r,0,-999,null,null,null,h.useHTML).attr(p).css(t(h.style,l&&{cursor:l})).add(o).shadow(h.shadow)}v&&s.alignDataLabel(a,v,h,null,y)}}))},tn.prototype.alignDataLabel=function(e,i,n,r,o){var s,a=this.chart,l=a.inverted,h=f(e.plotX,-999),c=f(e.plotY,-999),u=i.getBBox(),d=this.visible&&(e.series.forceDL||a.isInsidePlot(h,ve(c),l)||r&&a.isInsidePlot(h,l?r.x+1:r.y+r.height-1,l));d&&(r=t({x:l?a.plotWidth-c:h,y:ve(l?a.plotHeight-h:c),width:0,height:0},r),t(n,{width:u.width,height:u.height}),n.rotation?(s={align:n.align,x:r.x+n.x+r.width/2,y:r.y+n.y+r.height/2},i[o?"attr":"animate"](s)):(i.align(n,null,r),s=i.alignAttr,"justify"===f(n.overflow,"justify")?this.justifyDataLabel(i,n,s,u,r,o):f(n.crop,!0)&&(d=a.isInsidePlot(s.x,s.y)&&a.isInsidePlot(s.x+u.width,s.y+u.height)))),d||(i.attr({y:-999}),i.placed=!1)},tn.prototype.justifyDataLabel=function(t,e,i,n,r,o){var s,a,l=this.chart,h=e.align,c=e.verticalAlign;s=i.x,0>s&&("right"===h?e.align="left":e.x=-s,a=!0),s=i.x+n.width,s>l.plotWidth&&("left"===h?e.align="right":e.x=l.plotWidth-s,a=!0),s=i.y,0>s&&("bottom"===c?e.verticalAlign="top":e.y=-s,a=!0),s=i.y+n.height,s>l.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-s,a=!0),a&&(t.placed=!o,t.align(e,null,r))},pi.pie&&(pi.pie.prototype.drawDataLabels=function(){var t,e,i,n,r,o,s,a,l,h,c,u,d,p=this,g=p.data,m=p.chart,v=p.options.dataLabels,b=f(v.connectorPadding,10),y=f(v.connectorWidth,1),x=m.plotWidth,w=m.plotHeight,k=f(v.softConnector,!0),C=v.distance,_=p.center,S=_[2]/2,T=_[1],M=C>0,D=[[],[]],A=[0,0,0,0],P=function(t,e){return e.y-t.y};if(p.visible&&(v.enabled||p._hasPointLabels)){for(tn.prototype.drawDataLabels.apply(p),xi(g,function(t){t.dataLabel&&t.visible&&D[t.half].push(t)}),u=0;!s&&g[u];)s=g[u]&&g[u].dataLabel&&(g[u].dataLabel.getBBox().height||21),u++;for(u=2;u--;){var I,z,H,O=[],E=[],W=D[u],N=W.length;if(p.sortByAngle(W,u-.5),C>0){for(z=T-S-C;T+S+C>=z;z+=s)O.push(z);if(I=O.length,N>I){for(c=[].concat(W),c.sort(P),d=N;d--;)c[d].rank=d;for(d=N;d--;)W[d].rank>=I&&W.splice(d,1);N=W.length}for(d=0;N>d;d++){t=W[d],o=t.labelPos;var R,$,B=9999;for($=0;I>$;$++)R=ke(O[$]-o[1]),B>R&&(B=R,H=$);if(d>H&&null!==O[d])H=d;else if(N-d+H>I&&null!==O[d])for(H=I-N+d;null===O[H];)H++;else for(;null===O[H];)H++;E.push({i:H,y:O[H]}),O[H]=null}E.sort(P)}for(d=0;N>d;d++){var F,Y;t=W[d],o=t.labelPos,n=t.dataLabel,h=t.visible===!1?qe:Ue,Y=o[1],C>0?(F=E.pop(),H=F.i,l=F.y,(Y>l&&null!==O[H+1]||l>Y&&null!==O[H-1])&&(l=Y)):l=Y,a=v.justify?_[0]+(u?-1:1)*(S+C):p.getX(0===H||H===O.length-1?Y:l,u),n._attr={visibility:h,align:o[6]},n._pos={x:a+v.x+({left:b,right:-b}[o[6]]||0),y:l+v.y-10},n.connX=a,n.connY=l,null===this.options.size&&(r=n.width,b>a-r?A[3]=xe(ve(r-a+b),A[3]):a+r>x-b&&(A[1]=xe(ve(a+r-x+b),A[1])),0>l-s/2?A[0]=xe(ve(-l+s/2),A[0]):l+s/2>w&&(A[2]=xe(ve(l+s/2-w),A[2])))}}(0===L(A)||this.verifyDataLabelOverflow(A))&&(this.placeDataLabels(),M&&y&&xi(this.points,function(t){e=t.connector,o=t.labelPos,n=t.dataLabel,n&&n._pos?(h=n._attr.visibility,a=n.connX,l=n.connY,i=k?[Qe,a+("left"===o[6]?5:-5),l,"C",a,l,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],Je,o[4],o[5]]:[Qe,a+("left"===o[6]?5:-5),l,Je,o[2],o[3],Je,o[4],o[5]],e?(e.animate({d:i}),e.attr("visibility",h)):t.connector=e=p.chart.renderer.path(i).attr({"stroke-width":y,stroke:v.connectorColor||t.color||"#606060",visibility:h}).add(p.group)):e&&(t.connector=e.destroy())}))}},pi.pie.prototype.placeDataLabels=function(){xi(this.points,function(t){var e,i=t.dataLabel;i&&(e=i._pos,e?(i.attr(i._attr),i[i.moved?"animate":"attr"](e),i.moved=!0):i&&i.attr({y:-999}))})},pi.pie.prototype.alignDataLabel=$e,pi.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,r=n.center,o=n.minSize||80,s=o;return null!==r[0]?s=xe(i[2]-xe(t[1],t[3]),o):(s=xe(i[2]-t[1]-t[3],o),i[0]+=(t[3]-t[1])/2),null!==r[1]?s=xe(we(s,i[2]-xe(t[0],t[2])),o):(s=xe(we(s,i[2]-t[0]-t[2]),o),i[1]+=(t[0]-t[2])/2),s<i[2]?(i[2]=s,this.translate(i),xi(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),pi.column&&(pi.column.prototype.alignDataLabel=function(t,i,n,r,o){var s=this.chart,a=s.inverted,l=t.dlBox||t.shapeArgs,h=t.below||t.plotY>f(this.translatedThreshold,s.plotSizeY),c=f(n.inside,!!this.options.stacking);l&&(r=e(l),a&&(r={x:s.plotWidth-r.y-r.height,y:s.plotHeight-r.x-r.width,width:r.height,height:r.width}),c||(a?(r.x+=h?0:r.width,r.width=0):(r.y+=h?r.height:0,r.height=0))),n.align=f(n.align,!a||c?"center":h?"right":"left"),n.verticalAlign=f(n.verticalAlign,a||c?"middle":h?"top":"bottom"),tn.prototype.alignDataLabel.call(this,t,i,n,r,o)});var dn=fi.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,r=n&&{cursor:n},o=function(i){var n,r=i.target;for(e.hoverSeries!==t&&t.onMouseOver();r&&!n;)n=r.point,r=r.parentNode;n!==X&&n!==e.hoverPoint&&n.onMouseOver(i)};xi(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(xi(t.trackerGroups,function(e){t[e]&&(t[e].addClass(Ve+"tracker").on("mouseover",o).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(r),q&&t[e].on("touchstart",o))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e,i=this,n=i.options,r=n.trackByArea,o=[].concat(r?i.areaPath:i.graphPath),s=o.length,a=i.chart,l=a.pointer,h=a.renderer,c=a.options.tooltip.snap,u=i.tracker,d=n.cursor,p=d&&{cursor:d},f=i.singlePoints,g=function(){a.hoverSeries!==i&&i.onMouseOver()},m="rgba(192,192,192,"+(Oe?1e-4:.002)+")";if(s&&!r)for(e=s+1;e--;)o[e]===Qe&&o.splice(e+1,0,o[e+1]-c,o[e+2],Je),(e&&o[e]===Qe||e===s)&&o.splice(e,0,Je,o[e-2]+c,o[e-1]);for(e=0;e<f.length;e++)t=f[e],o.push(Qe,t.plotX-c,t.plotY,Je,t.plotX+c,t.plotY);u?u.attr({d:o}):(i.tracker=h.path(o).attr({"stroke-linejoin":"round",visibility:i.visible?Ue:qe,stroke:m,fill:r?m:Ze,"stroke-width":n.lineWidth+(r?0:2*c),zIndex:2}).add(i.group),xi([i.tracker,i.markerGroup],function(t){t.addClass(Ve+"tracker").on("mouseover",g).on("mouseout",function(t){l.onTrackerMouseOut(t)}).css(p),q&&t.on("touchstart",g)}))}};pi.column&&(an.prototype.drawTracker=dn.drawTrackerPoint),pi.pie&&(pi.pie.prototype.drawTracker=dn.drawTrackerPoint),pi.scatter&&(hn.prototype.drawTracker=dn.drawTrackerPoint),t(Ki.prototype,{setItemEvents:function(t,e,i,n,r){var o=this;(i?e:t.legendGroup).on("mouseover",function(){t.setState(ii),e.css(o.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?n:r),t.setState()}).on("click",function(e){var i="legendItemClick",n=function(){t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent(i,e,n):Ti(t,i,e,n)})},createCheckboxForItem:function(t){var e=this;t.checkbox=m("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},e.options.itemCheckboxStyle,e.chart.container),_i(t.checkbox,"click",function(e){var i=e.target;Ti(t,"checkboxClick",{checked:i.checked},function(){t.select()})})}}),U.legend.itemStyle.cursor="pointer",t(B.prototype,{showResetZoom:function(){var t=this,e=U.lang,i=t.options.chart.resetZoomButton,n=i.theme,r=n.states,o="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,r&&r.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,o)},zoomOut:function(){var t=this;Ti(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this,r=n.pointer,s=!1;!t||t.resetSelection?xi(n.axes,function(t){e=t.zoom()}):xi(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;(r[n?"zoomX":"zoomY"]||r[n?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(s=!0))}),i=n.resetZoomButton,s&&!i?n.showResetZoom():!s&&o(i)&&(n.resetZoomButton=i.destroy()),e&&n.redraw(f(n.options.chart.animation,t&&t.animation,n.pointCount<100))},pan:function(t,e){var i,n=this,r=n.hoverPoints;r&&xi(r,function(t){t.setState()}),xi("xy"===e?[1,0]:[1],function(e){var r=t[e?"chartX":"chartY"],o=n[e?"xAxis":"yAxis"][0],s=n[e?"mouseDownX":"mouseDownY"],a=(o.pointRange||0)/2,l=o.getExtremes(),h=o.toValue(s-r,!0)+a,c=o.toValue(s+n[e?"plotWidth":"plotHeight"]-r,!0)-a;o.series.length&&h>we(l.dataMin,l.min)&&c<xe(l.dataMax,l.max)&&(o.setExtremes(h,c,!1,!1,{trigger:"pan"}),i=!0),n[e?"mouseDownX":"mouseDownY"]=r}),i&&n.redraw(!1),g(n.container,{cursor:"move"})}}),t(Ji.prototype,{select:function(t,e){var i=this,n=i.series,r=n.chart;t=f(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[yi(i,n.data)]=i.options,i.setState(t&&ni),e||xi(r.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[yi(t,n.data)]=t.options,t.setState(ei),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this,i=e.series,n=i.chart,r=n.tooltip,o=n.hoverPoint;o&&o!==e&&o.onMouseOut(),e.firePointEvent("mouseOver"),!r||r.shared&&!i.noSharedTooltip||r.refresh(e,t),e.setState(ii),n.hoverPoint=e},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;e&&-1!==yi(this,e)||(this.firePointEvent("mouseOut"),this.setState(),t.hoverPoint=null)},firePointEvent:function(t,e,i){var n=this,r=this.series,o=r.options;(o.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&o.allowPointSelect&&(i=function(t){n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Ti(this,t,e,i)},importEvents:function(){if(!this.hasImportedEvents){var t,i=this,n=e(i.series.options.point,i.options),r=n.events;i.events=r;for(t in r)_i(i,t,r[t]);this.hasImportedEvents=!0}},setState:function(t,i){var n,r,o=this,s=o.plotX,a=o.plotY,l=o.series,h=l.options.states,c=Pi[l.type].marker&&l.options.marker,u=c&&!c.enabled,d=c&&c.states[t],p=d&&d.enabled===!1,f=l.stateMarkerGraphic,g=o.marker||{},m=l.chart,v=o.pointAttr;t=t||ei,i=i&&f,t===o.state&&!i||o.selected&&t!==ni||h[t]&&h[t].enabled===!1||t&&(p||u&&!d.enabled)||t&&g.states&&g.states[t]&&g.states[t].enabled===!1||(o.graphic?(n=c&&o.graphic.symbolName&&v[t].r,o.graphic.attr(e(v[t],n?{x:s-n,y:a-n,width:2*n,height:2*n}:{}))):(t&&d&&(n=d.radius,r=g.symbol||l.symbol,f&&f.currentSymbol!==r&&(f=f.destroy()),f?f[i?"animate":"attr"]({x:s-n,y:a-n}):(l.stateMarkerGraphic=f=m.renderer.symbol(r,s-n,a-n,2*n,2*n).attr(v[t]).add(l.markerGroup),f.currentSymbol=r)),f&&f[t&&m.isInsidePlot(s,a,m.inverted)?"show":"hide"]()),o.state=t)}}),t(tn.prototype,{onMouseOver:function(){var t=this,e=t.chart,i=e.hoverSeries;i&&i!==t&&i.onMouseOut(),t.options.events.mouseOver&&Ti(t,"mouseOver"),t.setState(ii),e.hoverSeries=t},onMouseOut:function(){var t=this,e=t.options,i=t.chart,n=i.tooltip,r=i.hoverPoint;r&&r.onMouseOut(),t&&e.events.mouseOut&&Ti(t,"mouseOut"),!n||e.stickyTracking||n.shared&&!t.noSharedTooltip||n.hide(),t.setState(),i.hoverSeries=null},setState:function(t){var e,i=this,n=i.options,r=i.graph,o=i.graphNeg,s=n.states,a=n.lineWidth;if(t=t||ei,i.state!==t){if(i.state=t,s[t]&&s[t].enabled===!1)return;t&&(a=s[t].lineWidth||a+1),r&&!r.dashstyle&&(e={"stroke-width":a},r.attr(e),o&&o.attr(e))}},setVisible:function(t,e){var i,n=this,r=n.chart,o=n.legendItem,s=r.options.chart.ignoreHiddenSeries,a=n.visible;n.visible=t=n.userOptions.visible=t===X?!a:t,i=t?"show":"hide",xi(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),r.hoverSeries===n&&n.onMouseOut(),o&&r.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&xi(r.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),xi(n.linkedSeries,function(e){e.setVisible(t,!1)}),s&&(r.isDirtyBox=!0),e!==!1&&r.redraw(),Ti(n,i)},setTooltipPoints:function(t){var e,i,n,r,o,s,a,l=this,h=[],c=l.xAxis,u=c&&c.getExtremes(),d=c?c.tooltipLen||c.len:l.chart.plotSizeX,p=[];if(l.options.enableMouseTracking!==!1&&!l.singularTooltips){for(t&&(l.tooltipPoints=null),xi(l.segments||l.points,function(t){h=h.concat(t)}),c&&c.reversed&&(h=h.reverse()),l.orderTooltipPoints&&l.orderTooltipPoints(h),e=h.length,a=0;e>a;a++)if(r=h[a],o=r.x,o>=u.min&&o<=u.max)for(s=h[a+1],i=n===X?0:n+1,n=h[a+1]?we(xe(0,be((r.clientX+(s?s.wrappedClientX||s.clientX:d))/2)),d):d;i>=0&&n>=i;)p[i++]=r;l.tooltipPoints=p}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var e=this;e.selected=t=t===X?!e.selected:t,e.checkbox&&(e.checkbox.checked=t),Ti(e,t?"select":"unselect")},drawTracker:dn.drawTrackerGraph}),x(tn.prototype,"init",function(t){var e,i=this;t.apply(this,Array.prototype.slice.call(arguments,1)),e=i.xAxis,e&&e.options.ordinal&&_i(i,"updatedData",function(){delete e.ordinalIndex})}),x($.prototype,"getTimeTicks",function(t,e,i,n,r,o,s,a){var l,h,c,d,p,f=0,g=0,m={},v=[],b=-Number.MAX_VALUE,y=this.options.tickPixelInterval;if(!this.options.ordinal||!o||o.length<3||i===X)return t.call(this,e,i,n,r);for(d=o.length;d>g;g++){if(p=g&&o[g-1]>n,o[g]<i&&(f=g),g===d-1||o[g+1]-o[g]>5*s||p){if(o[g]>b){for(l=t.call(this,e,o[f],o[g],r);l.length&&l[0]<=b;)l.shift();l.length&&(b=l[l.length-1]),v=v.concat(l)}f=g+1}if(p)break}if(c=l.info,a&&c.unitRange<=J[ai]){for(g=v.length-1,f=1;g>f;f++)new Date(v[f]-ie)[se]()!==new Date(v[f-1]-ie)[se]()&&(m[v[f]]=li,h=!0);h&&(m[v[0]]=li),c.higherRanks=m}if(v.info=c,a&&u(y)){for(var x,w,k,C,_,S=v.length,T=S,M=[],D=[];T--;)w=this.translate(v[T]),k&&(D[T]=k-w),M[T]=k=w;for(D.sort(),C=D[be(D.length/2)],.6*y>C&&(C=null),T=v[S-1]>n?S-1:S,k=void 0;T--;)w=M[T],_=k-w,k&&.8*y>_&&(null===C||.8*C>_)?(m[v[T]]&&!m[v[T+1]]?(x=T+1,k=w):x=T,v.splice(x,1)):k=w}return v}),t($.prototype,{beforeSetTickPositions:function(){var t,e,i,n,r,o,s=this,a=[],l=!1,h=s.getExtremes(),c=h.min,u=h.max;if(s.options.ordinal){if(xi(s.series,function(e,i){if(e.visible!==!1&&e.takeOrdinalPosition!==!1&&(a=a.concat(e.processedXData),t=a.length,a.sort(function(t,e){return t-e}),t))for(i=t-1;i--;)a[i]===a[i+1]&&a.splice(i,1)}),t=a.length,t>2){for(e=a[1]-a[0],o=t-1;o--&&!l;)a[o+1]-a[o]!==e&&(l=!0);!s.options.keepOrdinalPadding&&(a[0]-c>e||u-a[a.length-1]>e)&&(l=!0)}l?(s.ordinalPositions=a,i=s.val2lin(xe(c,a[0]),!0),n=s.val2lin(we(u,a[a.length-1]),!0),s.ordinalSlope=r=(u-c)/(n-i),s.ordinalOffset=c-i*r):s.ordinalPositions=s.ordinalSlope=s.ordinalOffset=X}s.groupIntervalFactor=null},val2lin:function(t,e){var i=this,n=i.ordinalPositions;if(n){var r;return n.length,r=w(n,t),e?r:i.ordinalSlope*(r||0)+i.ordinalOffset}return t},lin2val:function(t,e){var i=this,n=i.ordinalPositions;if(n){var r,o,s,a=i.ordinalSlope,l=i.ordinalOffset,h=n.length-1;if(e)0>t?t=n[0]:t>h?t=n[h]:(h=be(t),s=t-h);else for(;h--;)if(r=a*h+l,t>=r){o=a*(h+1)+l,s=(t-r)/(o-r);break}return s!==X&&n[h]!==X?n[h]+(s?s*(n[h+1]-n[h]):0):t}return t},getExtendedPositions:function(){var t,e,i=this,n=i.chart,r=i.series[0].currentDataGrouping,o=i.ordinalIndex,s=r?r.count+r.unitName:"raw",a=i.getExtremes();return o||(o=i.ordinalIndex={}),o[s]||(t={series:[],getExtremes:function(){return{min:a.dataMin,max:a.dataMax}},options:{ordinal:!0},val2lin:$.prototype.val2lin},xi(i.series,function(i){e={xAxis:t,xData:i.xData,chart:n,destroyGroupedData:$e},e.options={dataGrouping:r?{enabled:!0,forced:!0,approximation:"open",units:[[r.unitName,[r.count]]]}:{enabled:!1}},i.processData.apply(e),t.series.push(e)}),i.beforeSetTickPositions.apply(t),o[s]=t.ordinalPositions),o[s]},getGroupIntervalFactor:function(t,e,i){var n,r=0,o=i.processedXData,s=o.length,a=[],l=this.groupIntervalFactor;if(!l){for(;s-1>r;r++)a[r]=o[r+1]-o[r];a.sort(function(t,e){return t-e}),n=a[be(s/2)],t=xe(t,o[0]),e=we(e,o[s-1]),this.groupIntervalFactor=l=s*n/(e-t)}return l},postProcessTickInterval:function(t){var e=this.ordinalSlope;return e?t/(e/this.closestPointRange):t}}),x(B.prototype,"pan",function(t,e){var i=this,n=i.xAxis[0],r=e.chartX,o=!1;if(n.options.ordinal&&n.series.length){var s,a,l,h,c=i.mouseDownX,u=n.getExtremes(),d=u.dataMax,p=u.min,f=u.max,m=i.hoverPoints,v=n.closestPointRange,b=n.translationSlope*(n.ordinalSlope||v),y=(c-r)/b,x={ordinalPositions:n.getExtendedPositions()},w=n.lin2val,k=n.val2lin;x.ordinalPositions?ke(y)>1&&(m&&xi(m,function(t){t.setState()}),0>y?(l=x,h=n.ordinalPositions?n:x):(l=n.ordinalPositions?n:x,h=x),a=h.ordinalPositions,d>a[a.length-1]&&a.push(d),i.fixedRange=f-p,s=n.toFixedRange(null,null,w.apply(l,[k.apply(l,[p,!0])+y,!0]),w.apply(h,[k.apply(h,[f,!0])+y,!0])),s.min>=we(u.dataMin,p)&&s.max<=xe(d,f)&&n.setExtremes(s.min,s.max,!0,!1,{trigger:"pan"}),i.mouseDownX=r,g(i.container,{cursor:"move"})):o=!0}else o=!0;o&&t.apply(this,Array.prototype.slice.call(arguments,1))}),x(tn.prototype,"getSegments",function(t){var e,i=this,n=i.options.gapSize,r=i.xAxis;t.apply(this,Array.prototype.slice.call(arguments,1)),n&&(e=i.segments,xi(e,function(t,i){for(var o=t.length-1;o--;)t[o+1].x-t[o].x>r.closestPointRange*n&&e.splice(i+1,0,t.splice(o+1,t.length-o))}))});var pn="dataGrouping",fn=tn.prototype,gn=Yi.prototype,mn=fn.processData,vn=fn.generatePoints,bn=fn.destroy,yn=gn.tooltipHeaderFormatter,xn="number",wn={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:i(ri,["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],oi,["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],si,["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],ai,["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],li,["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],hi,["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],ci,["%B %Y","%B","-%B %Y"],ui,["%Y","%Y","-%Y"])},kn={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},Cn=[[ri,[1,2,5,10,20,25,50,100,200,500]],[oi,[1,2,5,10,15,30]],[si,[1,2,5,10,15,30]],[ai,[1,2,3,4,6,8,12]],[li,[1]],[hi,[1]],[ci,[1,3,6]],[ui,null]],_n={sum:function(t){var e,i=t.length;if(!i&&t.hasNulls)e=null;else if(i)for(e=0;i--;)e+=t[i];return e},average:function(t){var e=t.length,i=_n.sum(t);return typeof i===xn&&e&&(i/=e),i},open:function(t){return t.length?t[0]:t.hasNulls?null:X},high:function(t){return t.length?L(t):t.hasNulls?null:X},low:function(t){return t.length?D(t):t.hasNulls?null:X},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:X},ohlc:function(t,e,i,n){return t=_n.open(t),e=_n.high(e),i=_n.low(i),n=_n.close(n),typeof t===xn||typeof e===xn||typeof i===xn||typeof n===xn?[t,e,i,n]:void 0},range:function(t,e){return t=_n.low(t),e=_n.high(e),typeof t===xn||typeof e===xn?[t,e]:void 0}};fn.groupData=function(t,e,i,n){var r,o,s,a,l=this,h=l.data,c=l.options.data,u=[],d=[],p=t.length,f=!!e,g=[[],[],[],[]],m="function"==typeof n?n:_n[n],v=l.pointArrayMap,b=v&&v.length;for(a=0;p>=a&&!(t[a]>=i[0]);a++);for(;p>=a;a++){for(;(i[1]!==X&&t[a]>=i[1]||a===p)&&(r=i.shift(),s=m.apply(0,g),s!==X&&(u.push(r),d.push(s)),g[0]=[],g[1]=[],g[2]=[],g[3]=[],a!==p););if(a===p)break;if(v){var y,x,w=l.cropStart+a,k=h&&h[w]||l.pointClass.prototype.applyOptions.apply({series:l},[c[w]]);for(y=0;b>y;y++)x=k[v[y]],typeof x===xn?g[y].push(x):null===x&&(g[y].hasNulls=!0)}else o=f?e[a]:null,typeof o===xn?g[0].push(o):null===o&&(g[0].hasNulls=!0)}return[u,d]},fn.processData=function(){var t,e=this,i=e.chart,n=e.options,r=n[pn],o=r&&f(r.enabled,i.options._stock);if(e.forceCrop=o,e.groupPixelWidth=null,e.hasProcessed=!0,mn.apply(e,arguments)!==!1&&o){e.destroyGroupedData();var s,a=e.processedXData,l=e.processedYData,h=i.plotSizeX,c=e.xAxis,d=c.options.ordinal,p=e.groupPixelWidth=c.getGroupPixelWidth&&c.getGroupPixelWidth(),g=e.pointRange;if(p){t=!0,e.points=null;var m=c.getExtremes(),v=m.min,b=m.max,y=d&&c.getGroupIntervalFactor(v,b,e)||1,x=p*(b-v)/h*y,w=c.getTimeTicks(c.normalizeTimeTickInterval(x,r.units||Cn),v,b,null,a,e.closestPointRange),k=fn.groupData.apply(e,[a,l,w,r.approximation]),C=k[0],_=k[1];if(r.smoothed){for(s=C.length-1,C[s]=b;s--&&s>0;)C[s]+=x/2;C[0]=v}e.currentDataGrouping=w.info,null===n.pointRange&&(e.pointRange=w.info.totalRange),e.closestPointRange=w.info.totalRange,u(C[0])&&C[0]<c.dataMin&&(c.dataMin=C[0]),e.processedXData=C,e.processedYData=_}else e.currentDataGrouping=null,e.pointRange=g;e.hasGroupedData=t}},fn.destroyGroupedData=function(){var t=this.groupedData;xi(t||[],function(e,i){e&&(t[i]=e.destroy?e.destroy():null)}),this.groupedData=null},fn.generatePoints=function(){vn.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},gn.tooltipHeaderFormatter=function(t){var e,i,n,r,o,s,l,h=this,c=t.series,u=c.options,d=c.tooltipOptions,p=u.dataGrouping,f=d.xDateFormat,g=c.xAxis;if(g&&"datetime"===g.options.type&&p&&a(t.key)){if(i=c.currentDataGrouping,n=p.dateTimeLabelFormats,i)r=n[i.unitName],1===i.count?f=r[0]:(f=r[1],e=r[2]);else if(!f&&n)for(s in J)if(J[s]>=g.closestPointRange||J[s]<=J[li]&&t.key%J[s]>0){f=n[s][0];break}o=K(f,t.key),e&&(o+=K(e,t.key+i.totalRange-1)),l=d.headerFormat.replace("{point.key}",o)}else l=yn.call(h,t);return l},fn.destroy=function(){for(var t=this,e=t.groupedData||[],i=e.length;i--;)e[i]&&e[i].destroy();bn.apply(t)},x(fn,"setOptions",function(t,i){var n=t.call(this,i),r=this.type,o=this.chart.options.plotOptions,s=Pi[r].dataGrouping;return kn[r]&&(s||(s=e(wn,kn[r])),n.dataGrouping=e(s,o.series&&o.series.dataGrouping,o[r].dataGrouping,i.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),n}),x($.prototype,"setScale",function(t){t.call(this),xi(this.series,function(t){t.hasProcessed=!1})}),$.prototype.getGroupPixelWidth=function(){var t,e,i,n=this.series,r=n.length,o=0,s=!1;for(t=r;t--;)i=n[t].options.dataGrouping,i&&(o=xe(o,i.groupPixelWidth));for(t=r;t--;)i=n[t].options.dataGrouping,i&&n[t].hasProcessed&&(e=(n[t].processedXData||n[t].data).length,(n[t].groupPixelWidth||e>this.chart.plotSizeX/o||e&&i.forced)&&(s=!0));return s?o:0},Pi.ohlc=e(Pi.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var Sn=v(pi.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(t){return[t.open,t.high,t.low,t.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){pi.column.prototype.getAttribs.apply(this,arguments);var t=this,i=t.options,n=i.states,r=i.upColor||t.color,o=e(t.pointAttr),s=t.upColorProp;o[""][s]=r,o.hover[s]=n.hover.upColor||r,o.select[s]=n.select.upColor||r,xi(t.points,function(t){t.open<t.close&&(t.pointAttr=o)})},translate:function(){var t=this,e=t.yAxis;pi.column.prototype.translate.apply(t),xi(t.points,function(t){null!==t.open&&(t.plotOpen=e.translate(t.open,0,1,0,1)),null!==t.close&&(t.plotClose=e.translate(t.close,0,1,0,1))})},drawPoints:function(){var t,e,i,n,r,o,s,a,l=this,h=l.points,c=l.chart;xi(h,function(h){h.plotY!==X&&(s=h.graphic,t=h.pointAttr[h.selected?"selected":""],n=t["stroke-width"]%2/2,a=ve(h.plotX)-n,r=ve(h.shapeArgs.width/2),o=["M",a,ve(h.yBottom),"L",a,ve(h.plotY)],null!==h.open&&(e=ve(h.plotOpen)+n,o.push("M",a,e,"L",a-r,e)),null!==h.close&&(i=ve(h.plotClose)+n,o.push("M",a,i,"L",a+r,i)),s?s.animate({d:o}):h.graphic=c.renderer.path(o).attr(t).add(l.group))})},animate:null});pi.ohlc=Sn,Pi.candlestick=e(Pi.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:Pi.ohlc.tooltip,threshold:null,upColor:"white"});var Tn=v(Sn,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){pi.ohlc.prototype.getAttribs.apply(this,arguments);var t=this,e=t.options,i=e.states,n=e.upLineColor||e.lineColor,r=i.hover.upLineColor||n,o=i.select.upLineColor||n;xi(t.points,function(t){t.open<t.close&&(t.pointAttr[""].stroke=n,t.pointAttr.hover.stroke=r,t.pointAttr.select.stroke=o)})},drawPoints:function(){var t,e,i,n,r,o,s,a,l,h,c,u,d=this,p=d.points,f=d.chart,g=d.pointAttr[""];xi(p,function(p){h=p.graphic,p.plotY!==X&&(t=p.pointAttr[p.selected?"selected":""]||g,a=t["stroke-width"]%2/2,l=ve(p.plotX)-a,e=p.plotOpen,i=p.plotClose,n=me.min(e,i),r=me.max(e,i),u=ve(p.shapeArgs.width/2),o=ve(n)!==ve(p.plotY),s=r!==p.yBottom,n=ve(n)+a,r=ve(r)+a,c=["M",l-u,r,"L",l-u,n,"L",l+u,n,"L",l+u,r,"Z","M",l,n,"L",l,o?ve(p.plotY):n,"M",l,r,"L",l,s?ve(p.yBottom):r,"Z"],h?h.animate({d:c}):p.graphic=f.renderer.path(c).attr(t).add(d.group).shadow(d.options.shadow))})}});pi.candlestick=Tn;var Mn=Wi.prototype.symbols;Pi.flags=e(Pi.column,{dataGrouping:null,fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),pi.flags=v(pi.column,{type:"flags",sorted:!1,noSharedTooltip:!0,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:tn.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){pi.column.prototype.translate.apply(this);var t,e,i,n,r,o,s=this,a=s.options,l=s.chart,h=s.points,c=h.length-1,u=a.onSeries,d=u&&l.get(u),p=d&&d.options.step,f=d&&d.points,g=f&&f.length,m=s.xAxis,v=m.getExtremes();if(d&&d.visible&&g)for(o=d.currentDataGrouping,n=f[g-1].x+(o?o.totalRange:0),h.sort(function(t,e){return t.x-e.x});g--&&h[c]&&(t=h[c],i=f[g],!(i.x<=t.x&&i.plotY!==X&&(t.x<=n&&(t.plotY=i.plotY,i.x<t.x&&!p&&(r=f[g+1],r&&r.plotY!==X&&(t.plotY+=(t.x-i.x)/(r.x-i.x)*(r.plotY-i.plotY)))),c--,g++,0>c))););xi(h,function(t,i){t.plotY===X&&(t.x>=v.min&&t.x<=v.max?t.plotY=l.chartHeight-m.bottom-(m.opposite?m.height:0)+m.offset-l.plotTop:t.shapeArgs={}),e=h[i-1],e&&e.plotX===t.plotX&&(e.stackIndex===X&&(e.stackIndex=0),t.stackIndex=e.stackIndex+1)})},drawPoints:function(){var t,i,n,r,o,s,a,l,h,c,u,d=this,p=d.pointAttr[""],f=d.points,g=d.chart,m=g.renderer,v=d.options,b=v.y,y=v.lineWidth%2/2;for(o=f.length;o--;)s=f[o],u=s.plotX>d.xAxis.len,i=s.plotX+(u?y:-y),l=s.stackIndex,r=s.options.shape||v.shape,n=s.plotY,n!==X&&(n=s.plotY+b+y-(l!==X&&l*v.stackDistance)),h=l?X:s.plotX+y,c=l?X:s.plotY,a=s.graphic,n!==X&&i>=0&&!u?(t=s.pointAttr[s.selected?"select":""]||p,a?a.attr({x:i,y:n,r:t.r,anchorX:h,anchorY:c}):a=s.graphic=m.label(s.options.title||v.title||"A",i,n,r,h,c,v.useHTML).css(e(v.style,s.style)).attr(t).attr({align:"flag"===r?"left":"center",width:v.width,height:v.height}).add(d.markerGroup).shadow(v.shadow),s.tooltipPos=[i,n]):a&&(s.graphic=a.destroy())},drawTracker:function(){var t=this,e=t.points;dn.drawTrackerPoint.apply(this),xi(e,function(t){var i=t.graphic;i&&_i(i.element,"mouseover",function(){t.stackIndex>0&&!t.raised&&(t._y=i.y,i.attr({y:t._y-8}),t.raised=!0),xi(e,function(e){e!==t&&e.raised&&e.graphic&&(e.graphic.attr({y:e._y}),e.raised=!1)})})})},animate:$e}),Mn.flag=function(t,e,i,n,r){var o=r&&r.anchorX||t,s=r&&r.anchorY||e;return["M",o,s,"L",t,e+n,t,e,t+i,e,t+i,e+n,t,e+n,"M",o,s,"Z"]},xi(["circle","square"],function(t){Mn[t+"pin"]=function(e,i,n,r,o){var s,a=o&&o.anchorX,l=o&&o.anchorY,h=Mn[t](e,i,n,r);return a&&l&&(s=i>l?i:i+r,h.push("M",a,s,"L",a,l)),h}}),j===fi.VMLRenderer&&xi(["flag","circlepin","squarepin"],function(t){Ni.prototype.symbols[t]=Mn[t]});var Dn,Ln={linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#CCC"]]},An=[].concat(Cn);An[4]=[li,[1,2,3,4]],An[5]=[hi,[1,2,3]],Dn=pi.areaspline===X?"line":"areaspline",t(U,{navigator:{handles:{backgroundColor:"#FFF",borderColor:"#666"},height:40,margin:10,maskFill:"rgba(255, 255, 255, 0.75)",outlineColor:"#444",outlineWidth:1,series:{type:Dn,color:"#4572A7",compare:null,fillOpacity:.4,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:An},dataLabels:{enabled:!1,zIndex:2},id:Ve+"navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:ze?20:14,barBackgroundColor:Ln,barBorderRadius:2,barBorderWidth:1,barBorderColor:"#666",buttonArrowColor:"#666",buttonBackgroundColor:Ln,buttonBorderColor:"#666",buttonBorderRadius:2,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#EEE"],[1,"#FFF"]]},trackBorderColor:"#CCC",trackBorderWidth:1,liveRedraw:Oe&&!ze}}),Y.prototype={drawHandle:function(t,e){var i,n=this,r=n.chart,o=r.renderer,s=n.elementsToDestroy,a=n.handles,l=n.navigatorOptions.handles,h={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":1};n.rendered||(a[e]=o.g("navigator-handle-"+["left","right"][e]).css({cursor:"e-resize"}).attr({zIndex:4-e}).add(),i=o.rect(-4.5,0,9,16,3,1).attr(h).add(a[e]),s.push(i),i=o.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(h).add(a[e]),s.push(i)),a[e][r.isResizing?"animate":"attr"]({translateX:n.scrollerLeft+n.scrollbarHeight+parseInt(t,10),translateY:n.top+n.height/2-8})},drawScrollbarButton:function(t){var e,i=this,n=i.chart,r=n.renderer,o=i.elementsToDestroy,s=i.scrollbarButtons,a=i.scrollbarHeight,l=i.scrollbarOptions;i.rendered||(s[t]=r.g().add(i.scrollbarGroup),e=r.rect(-.5,-.5,a+1,a+1,l.buttonBorderRadius,l.buttonBorderWidth).attr({stroke:l.buttonBorderColor,"stroke-width":l.buttonBorderWidth,fill:l.buttonBackgroundColor}).add(s[t]),o.push(e),e=r.path(["M",a/2+(t?-1:1),a/2-3,"L",a/2+(t?-1:1),a/2+3,a/2+(t?2:-2),a/2]).attr({fill:l.buttonArrowColor}).add(s[t]),o.push(e)),t&&s[t].attr({translateX:i.scrollerWidth-a})
},render:function(t,e,i,n){var r,o,s,a,l,h,c,u,d,p,g,m,v,b=this,y=b.chart,x=y.renderer,w=b.scrollbarGroup,k=b.navigatorGroup,C=b.scrollbar,_=b.xAxis,S=b.scrollbarTrack,T=b.scrollbarHeight,M=b.scrollbarEnabled,D=b.navigatorOptions,L=b.scrollbarOptions,A=L.minWidth,P=b.height,I=b.top,z=b.navigatorEnabled,H=D.outlineWidth,O=H/2,E=0,W=b.outlineHeight,N=L.barBorderRadius,R=L.barBorderWidth,$=I+O;isNaN(t)||(b.navigatorLeft=r=f(_.left,y.plotLeft+T),b.navigatorWidth=o=f(_.len,y.plotWidth-2*T),b.scrollerLeft=s=r-T,b.scrollerWidth=a=a=o+2*T,_.getExtremes&&(v=b.getUnionExtremes(!0),!v||v.dataMin===_.min&&v.dataMax===_.max||_.setExtremes(v.dataMin,v.dataMax,!0,!1)),i=f(i,_.translate(t)),n=f(n,_.translate(e)),(isNaN(i)||1/0===ke(i))&&(i=0,n=a),_.translate(n,!0)-_.translate(i,!0)<y.xAxis[0].minRange||(b.zoomedMax=we(xe(i,n),o),b.zoomedMin=xe(b.fixedWidth?b.zoomedMax-b.fixedWidth:we(i,n),0),b.range=b.zoomedMax-b.zoomedMin,h=ve(b.zoomedMax),l=ve(b.zoomedMin),c=h-l,b.rendered||(z&&(b.navigatorGroup=k=x.g("navigator").attr({zIndex:3}).add(),b.leftShade=x.rect().attr({fill:D.maskFill}).add(k),b.rightShade=x.rect().attr({fill:D.maskFill}).add(k),b.outline=x.path().attr({"stroke-width":H,stroke:D.outlineColor}).add(k)),M&&(b.scrollbarGroup=w=x.g("scrollbar").add(),p=L.trackBorderWidth,b.scrollbarTrack=S=x.rect().attr({x:0,y:-p%2/2,fill:L.trackBackgroundColor,stroke:L.trackBorderColor,"stroke-width":p,r:L.trackBorderRadius||0,height:T}).add(w),b.scrollbar=C=x.rect().attr({y:-R%2/2,height:T,fill:L.barBackgroundColor,stroke:L.barBorderColor,"stroke-width":R,r:N}).add(w),b.scrollbarRifles=x.path().attr({stroke:L.rifleColor,"stroke-width":1}).add(w))),m=y.isResizing?"animate":"attr",z&&(b.leftShade[m]({x:r,y:I,width:l,height:P}),b.rightShade[m]({x:r+h,y:I,width:o-h,height:P}),b.outline[m]({d:[Qe,s,$,Je,r+l+O,$,r+l+O,$+W-T,Qe,r+h-O,$+W-T,Je,r+h-O,$,s+a,$]}),b.drawHandle(l+O,0),b.drawHandle(h+O,1)),M&&w&&(b.drawScrollbarButton(0),b.drawScrollbarButton(1),w[m]({translateX:s,translateY:ve($+P)}),S[m]({width:a}),u=T+l,d=c-R,A>d&&(E=(A-d)/2,d=A,u-=E),b.scrollbarPad=E,C[m]({x:be(u)+R%2/2,width:d}),g=T+l+c/2-.5,b.scrollbarRifles.attr({visibility:c>12?Ue:qe})[m]({d:[Qe,g-3,T/4,Je,g-3,2*T/3,Qe,g,T/4,Je,g,2*T/3,Qe,g+3,T/4,Je,g+3,2*T/3]})),b.scrollbarPad=E,b.rendered=!0))},addEvents:function(){var t,e=this.chart.container,i=this.mouseDownHandler,n=this.mouseMoveHandler,r=this.mouseUpHandler;t=[[e,"mousedown",i],[e,"mousemove",n],[document,"mouseup",r]],q&&t.push([e,"touchstart",i],[e,"touchmove",n],[document,"touchend",r]),xi(t,function(t){_i.apply(null,t)}),this._events=t},removeEvents:function(){xi(this._events,function(t){Si.apply(null,t)}),this._events=X,this.navigatorEnabled&&this.baseSeries&&Si(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var t,i,n,r,o,s=this,a=s.chart,l=s.scrollbarHeight,h=s.navigatorOptions,c=s.height,u=s.top,d=document.body.style,p=s.baseSeries;s.mouseDownHandler=function(e){e=a.pointer.normalize(e);var i,r,l,h,u=s.zoomedMin,p=s.zoomedMax,f=s.top,g=s.scrollbarHeight,m=s.scrollerLeft,v=s.scrollerWidth,b=s.navigatorLeft,y=s.navigatorWidth,x=s.scrollbarPad,w=s.range,k=e.chartX,C=e.chartY,_=a.xAxis[0],S=ze?10:7;C>f&&f+c+g>C&&(h=!s.scrollbarEnabled||f+c>C,h&&me.abs(k-u-b)<S?(s.grabbedLeft=!0,s.otherHandlePos=p,s.fixedExtreme=_.max,a.fixedRange=null):h&&me.abs(k-p-b)<S?(s.grabbedRight=!0,s.otherHandlePos=u,s.fixedExtreme=_.min,a.fixedRange=null):k>b+u-x&&b+p+x>k?(s.grabbedCenter=k,s.fixedWidth=w,a.renderer.isSVG&&(o=d.cursor,d.cursor="ew-resize"),n=k-u):k>m&&m+v>k&&(l=h?k-b-w/2:b>k?u-.2*w:k>m+v-g?u+.2*w:b+u>k?u-w:p,0>l?l=0:l+w>=y&&(l=y-w,i=t.dataMax),l!==u&&(s.fixedWidth=w,r=t.toFixedRange(l,l+w,null,i),_.setExtremes(r.min,r.max,!0,!1,{trigger:"navigator"}))))},s.mouseMoveHandler=function(t){var e,i=s.scrollbarHeight,o=s.navigatorLeft,l=s.navigatorWidth,h=s.scrollerLeft,c=s.scrollerWidth,u=s.range;0!==t.pageX&&(t=a.pointer.normalize(t),e=t.chartX,o>e?e=o:e>h+c-i&&(e=h+c-i),s.grabbedLeft?(r=!0,s.render(0,0,e-o,s.otherHandlePos)):s.grabbedRight?(r=!0,s.render(0,0,s.otherHandlePos,e-o)):s.grabbedCenter&&(r=!0,n>e?e=n:e>l+n-u&&(e=l+n-u),s.render(0,0,e-n,e-n+u)),r&&s.scrollbarOptions.liveRedraw&&setTimeout(function(){s.mouseUpHandler(t)},0))},s.mouseUpHandler=function(e){var i,l,h;r&&(s.zoomedMin===s.otherHandlePos?l=s.fixedExtreme:s.zoomedMax===s.otherHandlePos&&(h=s.fixedExtreme),i=t.toFixedRange(s.zoomedMin,s.zoomedMax,l,h),a.xAxis[0].setExtremes(i.min,i.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:e})),"mousemove"!==e.type&&(s.grabbedLeft=s.grabbedRight=s.grabbedCenter=s.fixedWidth=s.fixedExtreme=s.otherHandlePos=r=n=null,d.cursor=o||"")};var g=a.xAxis.length,m=a.yAxis.length;a.extraBottomMargin=s.outlineHeight+h.margin,s.navigatorEnabled?(s.xAxis=t=new $(a,e({ordinal:p&&p.xAxis.options.ordinal},h.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:g,height:c,offset:0,offsetLeft:l,offsetRight:-l,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),s.yAxis=i=new $(a,e(h.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:c,offset:0,index:m,zoomEnabled:!1})),p||h.series.data?s.addBaseSeries():0===a.series.length&&x(a,"redraw",function(t,e){a.series.length>0&&!s.series&&(s.setBaseSeries(),a.redraw=t),t.call(a,e)})):s.xAxis=t={translate:function(t,e){var i=a.xAxis[0].getExtremes(),n=a.plotWidth-2*l,r=i.dataMin,o=i.dataMax-r;return e?t*o/n+r:n*(t-r)/o},toFixedRange:$.prototype.toFixedRange},x(a,"getMargins",function(e){var n=this.legend,r=n.options;e.call(this),s.top=u=s.navigatorOptions.top||this.chartHeight-s.height-s.scrollbarHeight-this.spacing[2]-("bottom"===r.verticalAlign&&r.enabled&&!r.floating?n.legendHeight+f(r.margin,10):0),t&&i&&(t.options.top=i.options.top=u,t.setAxisSize(),i.setAxisSize())}),s.addEvents()},getUnionExtremes:function(t){var e=this.chart.xAxis[0],i=this.xAxis,n=i.options;return t&&null===e.dataMin?void 0:{dataMin:f(n&&n.min,(u(e.dataMin)&&u(i.dataMin)?we:f)(e.dataMin,i.dataMin)),dataMax:f(n&&n.max,(u(e.dataMax)&&u(i.dataMax)?xe:f)(e.dataMax,i.dataMax))}},setBaseSeries:function(t){var e=this.chart;t=t||e.options.navigator.baseSeries,this.series&&this.series.remove(),this.baseSeries=e.series[t]||"string"==typeof t&&e.get(t)||e.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var i,n,r=this.baseSeries,o=r?r.options:{},s=o.data,a=this.navigatorOptions.series;n=a.data,this.hasNavigatorData=!!n,i=e(o,a,{clip:!1,enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0}),i.data=n||s,this.series=this.chart.initSeries(i),r&&this.navigatorOptions.adaptToUpdatedData!==!1&&(_i(r,"updatedData",this.updatedDataHandler),r.userOptions.events=t(r.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(t,e,i){"undefined"==typeof e&&(e=!1);var n,r,o,s,a,l=this.chart.scroller,h=l.baseSeries,c=h.xAxis,u=c.getExtremes(),d=u.min,p=u.max,f=u.dataMin,g=u.dataMax,m=p-d,v=l.series,b=v.xData,y=!!c.setExtremes;r=p>=b[b.length-1]-(this.closestPointRange||0),n=f>=d,e?(v.options.pointStart=v.xData[0],v.addPoint({x:i,y:0},!1),a=!0):l.hasNavigatorData||(v.options.pointStart=h.xData[0],v.setData(h.options.data,!1),a=!0),n&&(s=f,o=s+m),r&&(o=g,n||(s=xe(o-m,v.xData[0]))),y&&(n||r)?isNaN(s)||c.setExtremes(s,o,!0,!1,{trigger:"updatedData"}):(a&&this.chart.redraw(!1),l.render(xe(d,f),we(p,g)))},destroy:function(){var t=this;t.removeEvents(),xi([t.xAxis,t.yAxis,t.leftShade,t.rightShade,t.outline,t.scrollbarTrack,t.scrollbarRifles,t.scrollbarGroup,t.scrollbar],function(t){t&&t.destroy&&t.destroy()}),t.xAxis=t.yAxis=t.leftShade=t.rightShade=t.outline=t.scrollbarTrack=t.scrollbarRifles=t.scrollbarGroup=t.scrollbar=null,xi([t.scrollbarButtons,t.handles,t.elementsToDestroy],function(t){A(t)})}},fi.Scroller=Y,x($.prototype,"zoom",function(t,e,i){var n,r,o=this.chart,s=o.options,a=s.chart.zoomType,l=s.navigator,h=s.rangeSelector;return this.isXAxis&&(l&&l.enabled||h&&h.enabled)&&("x"===a?o.resetZoomButton="blocked":"y"===a?r=!1:"xy"===a&&(n=this.previousZoom,u(e)?this.previousZoom=[this.min,this.max]:n&&(e=n[0],i=n[1],delete this.previousZoom))),r!==X?r:t.call(this,e,i)}),x(B.prototype,"init",function(t,e,i){_i(this,"beforeRender",function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=new Y(this))}),t.call(this,e,i)}),x(tn.prototype,"addPoint",function(t,e,i,n,r){var a=this.options.turboThreshold;a&&this.xData.length>a&&o(e)&&!s(e)&&this.chart.scroller&&I(20,!0),t.call(this,e,i,n,r)}),t(U,{rangeSelector:{buttonTheme:{width:28,height:16,padding:1,r:0,stroke:"#68A",zIndex:7},inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),U.lang=e(U.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),G.prototype={clickButton:function(t,i){var n,r,o,s,a,l,h=this,c=h.selected,u=h.chart,d=h.buttons,p=h.buttonOptions[t],g=u.xAxis[0],m=u.scroller&&u.scroller.getUnionExtremes()||g||{},v=m.dataMin,b=m.dataMax,y=g&&ve(we(g.max,f(b,g.max))),x=new Date(y),w=p.type,k=p.count,C=p._range;if(null!==v&&null!==b&&t!==h.selected){if("month"===w||"year"===w)l={month:"Month",year:"FullYear"}[w],x["set"+l](x["get"+l]()-k),n=x.getTime(),v=f(v,Number.MIN_VALUE),isNaN(n)||v>n?(n=v,y=we(n+C,b)):C=y-n;else if(C)n=xe(y-C,v),y=we(n+C,b);else if("ytd"===w){if(!g)return _i(u,"beforeRender",function(){h.clickButton(t)}),void 0;b===X&&(v=Number.MAX_VALUE,b=Number.MIN_VALUE,xi(u.series,function(t){var e=t.xData;v=we(e[0],v),b=xe(e[e.length-1],b)}),i=!1),r=new Date(b),a=r.getFullYear(),n=s=xe(v||0,Date.UTC(a,0,1)),r=r.getTime(),y=we(b||r,r)}else"all"===w&&g&&(n=v,y=b);d[c]&&d[c].setState(0),d[t]&&d[t].setState(2),u.fixedRange=C,g?(g.setExtremes(n,y,f(i,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:p}),h.setSelected(t)):(o=u.options.xAxis,o[0]=e(o[0],{range:C,min:s}),h.setSelected(t))}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(t){var e=this,i=t.options.rangeSelector,n=i.buttons||[].concat(e.defaultButtons),r=i.selected,o=e.blurInputs=function(){var t=e.minInput,i=e.maxInput;t&&t.blur(),i&&i.blur()};e.chart=t,e.options=i,e.buttons=[],t.extraTopMargin=25,e.buttonOptions=n,_i(t.container,"mousedown",o),_i(t,"resize",o),xi(n,e.computeButtonRange),r!==X&&n[r]&&this.clickButton(r,!1),_i(t,"load",function(){_i(t.xAxis[0],"afterSetExtremes",function(){e.updateButtonStates(!0)})})},updateButtonStates:function(t){var e=this,i=this.chart,n=i.xAxis[0],r=i.scroller&&i.scroller.getUnionExtremes()||n,o=r.dataMin,s=r.dataMax,a=e.selected,l=e.buttons;t&&i.fixedRange!==ve(n.max-n.min)&&(l[a]&&l[a].setState(0),e.setSelected(null)),xi(e.buttonOptions,function(t,i){var r=t._range,h=r>s-o,c=r<n.minRange,u="all"===t.type&&n.max-n.min>=s-o&&2!==l[i].state,d="ytd"===t.type&&K("%Y",o)===K("%Y",s);r===ve(n.max-n.min)&&i!==a?(e.setSelected(i),l[i].setState(2)):h||c||u||d?l[i].setState(3):3===l[i].state&&l[i].setState(0)})},computeButtonRange:function(t){var e=t.type,i=t.count||1,n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};n[e]?t._range=n[e]*i:("month"===e||"year"===e)&&(t._range=36e5*24*{month:30,year:365}[e]*i)},setInputValue:function(t,e){var i=this.chart.options.rangeSelector;u(e)&&(this[t+"Input"].HCTime=e),this[t+"Input"].value=K(i.inputEditDateFormat||"%Y-%m-%d",this[t+"Input"].HCTime),this[t+"DateBox"].attr({text:K(i.inputDateFormat||"%b %e, %Y",this[t+"Input"].HCTime)})},drawInput:function(i){var r,o,s,a=this,l=a.chart,h=l.renderer.style,c=l.renderer,u=l.options.rangeSelector,d=U.lang,p=a.div,f="min"===i,v=this.inputGroup;this[i+"Label"]=o=c.label(d[f?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:1}).css(e(h,u.labelStyle)).add(v),v.offset+=o.width+5,this[i+"DateBox"]=s=c.label("",v.offset).attr({padding:1,width:u.inputBoxWidth||90,height:u.inputBoxHeight||16,stroke:u.inputBoxBorderColor||"silver","stroke-width":1}).css(e({textAlign:"center"},h,u.inputStyle)).on("click",function(){a[i+"Input"].focus()}).add(v),v.offset+=s.width+(f?10:0),this[i+"Input"]=r=m("input",{name:i,className:Ve+"range-selector",type:"text"},t({position:Xe,border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:h.fontSize,fontFamily:h.fontFamily,top:l.plotTop+Ke},u.inputStyle),p),r.onfocus=function(){g(this,{left:v.translateX+s.x+Ke,top:v.translateY+Ke,width:s.width-2+Ke,height:s.height-2+Ke,border:"2px solid silver"})},r.onblur=function(){g(this,{border:0,width:"1px",height:"1px"}),a.setInputValue(i)},r.onchange=function(){var t=r.value,e=(u.inputDateParser||Date.parse)(t),i=l.xAxis[0],o=i.dataMin,s=i.dataMax;isNaN(e)&&(e=t.split("-"),e=Date.UTC(n(e[0]),n(e[1])-1,n(e[2]))),isNaN(e)||(U.global.useUTC||(e+=1e3*60*(new Date).getTimezoneOffset()),f?e>a.maxInput.HCTime?e=X:o>e&&(e=o):e<a.minInput.HCTime?e=X:e>s&&(e=s),e!==X&&l.xAxis[0].setExtremes(f?e:i.min,f?i.max:e,X,X,{trigger:"rangeSelectorInput"}))}},render:function(e,i){var n,r,o=this,s=o.chart,a=s.renderer,l=s.container,h=s.options,c=h.exporting&&h.navigation&&h.navigation.buttonOptions,u=h.rangeSelector,d=o.buttons,p=U.lang,f=o.div,g=o.inputGroup,v=u.buttonTheme,b=u.inputEnabled!==!1,y=v&&v.states,x=s.plotLeft;o.rendered||(o.zoomText=a.text(p.rangeSelectorZoom,x,s.plotTop-10).css(u.labelStyle).add(),r=x+o.zoomText.getBBox().width+5,xi(o.buttonOptions,function(t,e){d[e]=a.button(t.text,r,s.plotTop-25,function(){o.clickButton(e),o.isActive=!0},v,y&&y.hover,y&&y.select).css({textAlign:"center"}).add(),r+=d[e].width+(u.buttonSpacing||0),o.selected===e&&d[e].setState(2)}),o.updateButtonStates(),b&&(o.div=f=m("div",null,{position:"relative",height:0,zIndex:1}),l.parentNode.insertBefore(f,l),o.inputGroup=g=a.g("input-group").add(),g.offset=0,o.drawInput("min"),o.drawInput("max"))),b&&(n=s.plotTop-35,g.align(t({y:n,width:g.offset,x:c&&n<(c.y||0)+c.height-s.spacing[0]?-40:0},u.inputPosition),!0,s.spacingBox),o.setInputValue("min",e),o.setInputValue("max",i)),o.rendered=!0},destroy:function(){var t,e=this.minInput,i=this.maxInput,n=this.chart,r=this.blurInputs;Si(n.container,"mousedown",r),Si(n,"resize",r),A(this.buttons),e&&(e.onfocus=e.onblur=e.onchange=null),i&&(i.onfocus=i.onblur=i.onchange=null);for(t in this)this[t]&&"chart"!==t&&(this[t].destroy?this[t].destroy():this[t].nodeType&&P(this[t])),this[t]=null}},$.prototype.toFixedRange=function(t,e,i,n){var r=this.chart&&this.chart.fixedRange,o=f(i,this.translate(t,!0)),s=f(n,this.translate(e,!0)),a=r&&(s-o)/r;return a>.7&&1.3>a&&(n?o=s-r:s=o+r),{min:o,max:s}},x(B.prototype,"init",function(t,e,i){_i(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new G(this))}),t.call(this,e,i)}),fi.RangeSelector=G,B.prototype.callbacks.push(function(t){function e(){s=t.xAxis[0].getExtremes(),a.render(s.min,s.max)}function i(){s=t.xAxis[0].getExtremes(),isNaN(s.min)||l.render(s.min,s.max)}function n(t){"navigator-drag"!==t.triggerOp&&a.render(t.min,t.max)}function r(t){l.render(t.min,t.max)}function o(){a&&Si(t.xAxis[0],"afterSetExtremes",n),l&&(Si(t,"resize",i),Si(t.xAxis[0],"afterSetExtremes",r))}var s,a=t.scroller,l=t.rangeSelector;a&&(_i(t.xAxis[0],"afterSetExtremes",n),x(t,"drawChartBox",function(t){var i=this.isDirtyBox;t.call(this),i&&e()}),e()),l&&(_i(t.xAxis[0],"afterSetExtremes",r),_i(t,"resize",i),i()),_i(t,"destroy",o)}),fi.StockChart=function(t,i){var n,r=t.series,o=f(t.navigator&&t.navigator.enabled,!0),s=o?{startOnTick:!1,endOnTick:!1}:null,a={marker:{enabled:!1,states:{hover:{radius:5}}},states:{hover:{lineWidth:2}}},l={shadow:!1,borderWidth:0};return t.xAxis=Ci(p(t.xAxis||{}),function(t){return e({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},s)}),t.yAxis=Ci(p(t.yAxis||{}),function(t){return n=t.opposite,e({labels:{align:n?"right":"left",x:n?-2:2,y:-2},showLastLabel:!1,title:{text:null}},t)}),t.series=null,t=e({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:a,spline:a,area:a,areaspline:a,arearange:a,areasplinerange:a,column:l,columnrange:l,candlestick:l,ohlc:l}},t,{_stock:!0,chart:{inverted:!1}}),t.series=r,new B(t,i)},x(Xi.prototype,"init",function(t,e,i){var n=i.chart.pinchType||"";t.call(this,e,i),this.pinchX=this.pinchHor=-1!==n.indexOf("x"),this.pinchY=this.pinchVert=-1!==n.indexOf("y")}),$.prototype.getPlotLinePath=function(t,e,i,n,r){var o,s,a,l,h=this,c=this.isLinked?this.linkedParent.series:this.series,d=h.chart.renderer,p=h.left,g=h.top,m=[],v=this.isXAxis?u(this.options.yAxis)?[this.chart.yAxis[this.options.yAxis]]:Ci(c,function(t){return t.yAxis}):u(this.options.xAxis)?[this.chart.xAxis[this.options.xAxis]]:Ci(c,function(t){return t.xAxis}),b=[];return xi(v,function(t){-1===yi(t,b)&&b.push(t)}),r=f(r,h.translate(t,null,null,i)),isNaN(r)||(h.horiz?xi(b,function(t){s=t.top,l=s+t.len,o=a=ve(r+h.transB),(o>=p&&o<=p+h.width||n)&&m.push("M",o,s,"L",a,l)}):xi(b,function(t){o=t.left,a=o+t.width,s=l=ve(g+h.height-r),(s>=g&&s<=g+h.height||n)&&m.push("M",o,s,"L",a,l)})),m.length>0?d.crispPolyLine(m,e||1):null},Wi.prototype.crispPolyLine=function(t,e){var i;for(i=0;i<t.length;i+=6)t[i+1]===t[i+4]&&(t[i+1]=t[i+4]=ve(t[i+1])-e%2/2),t[i+2]===t[i+5]&&(t[i+2]=t[i+5]=ve(t[i+2])+e%2/2);return t},j===fi.VMLRenderer&&(Ni.prototype.crispPolyLine=Wi.prototype.crispPolyLine),x($.prototype,"hideCrosshair",function(t,e){t.call(this,e),u(this.crossLabelArray)&&(u(e)?this.crossLabelArray[e]&&this.crossLabelArray[e].hide():xi(this.crossLabelArray,function(t){t.hide()}))}),x($.prototype,"drawCrosshair",function(e,i,n){if(e.call(this,i,n),u(this.crosshair.label)&&this.crosshair.label.enabled&&u(n)){var r,o,s,a,l=this.chart,h=this.options.crosshair.label,c=this.isXAxis?"x":"y",d=this.horiz,p=this.opposite,g=this.left,m=this.top,v=this.crossLabel,b=h.format,y="";if(v||(v=this.crossLabel=l.renderer.label().attr({align:h.align||(d?"center":p?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:d?16:X,fill:h.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:f(h.padding,2),stroke:h.borderColor||null,"stroke-width":h.borderWidth||0}).css(t({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},h.style)).add()),d?(r=n.plotX+g,o=m+(p?0:this.height)):(r=p?this.width+g:0,o=n.plotY+m),m>o||o>m+this.height)return this.hideCrosshair(),void 0;b||h.formatter||(this.isDatetimeAxis&&(y="%b %d, %Y"),b="{value"+(y?":"+y:"")+"}"),v.attr({x:r,y:o,text:b?C(b,{value:n[c]}):h.formatter.call(this,n[c]),visibility:Ue}),s=v.box,d?("inside"===this.options.tickPosition&&!p||"inside"!==this.options.tickPosition&&p)&&(o=v.y-s.height):o=v.y-s.height/2,a=d?{left:g-s.x,right:g+this.width-s.x}:{left:"left"===this.labelAlign?g:0,right:"right"===this.labelAlign?g+this.width:l.chartWidth},v.translateX<a.left&&(r+=a.left-v.translateX),v.translateX+s.width>=a.right&&(r-=v.translateX+s.width-a.right),v.attr({x:r,y:o,visibility:Ue})}});var Pn=fn.init,In=fn.processData,zn=Ji.prototype.tooltipFormatter;fn.init=function(){Pn.apply(this,arguments),this.setCompare(this.options.compare)},fn.setCompare=function(t){this.modifyValue="value"===t||"percent"===t?function(e,i){var n=this.compareValue;return e!==X&&(e="value"===t?e-n:e=100*(e/n)-100,i&&(i.change=e)),e}:null,this.chart.hasRendered&&(this.isDirty=!0)},fn.processData=function(){var t,e,i,n=this,r=0;if(In.apply(this,arguments),n.xAxis&&n.processedYData)for(t=n.processedXData,e=n.processedYData,i=e.length;i>r;r++)if(typeof e[r]===xn&&t[r]>=n.xAxis.min){n.compareValue=e[r];break}},x(fn,"getExtremes",function(t){t.call(this),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))}),$.prototype.setCompare=function(t,e){this.isXAxis||(xi(this.series,function(e){e.setCompare(t)}),f(e,!0)&&this.chart.redraw())},Ji.prototype.tooltipFormatter=function(t){var e=this;return t=t.replace("{point.change}",(e.change>0?"+":"")+b(e.change,f(e.series.tooltipOptions.changeDecimals,2))),zn.apply(this,[t])},t(fi,{Axis:$,Chart:B,Color:Ei,Point:Ji,Tick:R,Renderer:j,Series:tn,SVGElement:N,SVGRenderer:Wi,arrayMin:D,arrayMax:L,charts:Be,dateFormat:K,format:C,pathAnim:Q,getOptions:W,hasBidiBug:Ee,isTouchDevice:ze,numberFormat:b,seriesTypes:pi,setOptions:E,addEvent:_i,removeEvent:Si,createElement:m,discardElement:P,css:g,each:xi,extend:t,map:Ci,merge:e,pick:f,splat:p,extendClass:v,pInt:n,wrap:x,svg:Oe,canvas:We,vml:!Oe&&!We,product:Fe,version:Ye})}(),function(t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{if("function"==typeof define&&define.amd)return define([],t);this.CodeMirror=t()}}(function(){function t(i,n){if(!(this instanceof t))return new t(i,n);this.options=n=n?bo(n):{},bo(zs,n,!1),p(n);var r=n.value;"string"==typeof r&&(r=new na(r,n.mode)),this.doc=r;var o=this.display=new e(i,r);o.wrapper.CodeMirror=this,h(this),a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!cs&&_i(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new co,keySeq:null},Jo&&11>ts&&setTimeout(yo(Ci,this,!0),20),Mi(this),Po(),Qe(this),this.curOp.forceUpdate=!0,Pr(this,r),n.autofocus&&!cs||Mo()==o.input?setTimeout(yo(Zi,this),20):Qi(this);for(var s in Hs)Hs.hasOwnProperty(s)&&Hs[s](this,n[s],Os);y(this);for(var l=0;l<Rs.length;++l)Rs[l](this);ti(this)}function e(t,e){var i=this,n=i.input=Co("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");es?n.style.width="1000px":n.setAttribute("wrap","off"),hs&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),i.inputDiv=Co("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=Co("div",[Co("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=Co("div",[Co("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=Co("div",null,"CodeMirror-scrollbar-filler"),i.gutterFiller=Co("div",null,"CodeMirror-gutter-filler"),i.lineDiv=Co("div",null,"CodeMirror-code"),i.selectionDiv=Co("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=Co("div",null,"CodeMirror-cursors"),i.measure=Co("div",null,"CodeMirror-measure"),i.lineMeasure=Co("div",null,"CodeMirror-measure"),i.lineSpace=Co("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=Co("div",[Co("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Co("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=Co("div",null,null,"position: absolute; height: "+pa+"px; width: 1px;"),i.gutters=Co("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=Co("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Co("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),Jo&&8>ts&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),hs&&(n.style.width="0px"),es||(i.scroller.draggable=!0),ss&&(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"),Jo&&8>ts&&(i.scrollbarH.style.minHeight=i.scrollbarV.style.minWidth="18px"),t&&(t.appendChild?t.appendChild(i.wrapper):t(i.wrapper)),i.viewFrom=i.viewTo=e.first,i.view=[],i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new co,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null}function i(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),n(e)}function n(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,we(t,100),t.state.modeGen++,t.curOp&&pi(t)}function r(t){t.options.lineWrapping?(La(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth=""):(Da(t.display.wrapper,"CodeMirror-wrap"),d(t)),s(t),pi(t),Re(t),setTimeout(function(){m(t)},100)}function o(t){var e=Ke(t.display),i=t.options.lineWrapping,n=i&&Math.max(5,t.display.scroller.clientWidth/Ze(t.display)-3);return function(r){if(nr(t.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return i?o+(Math.ceil(r.text.length/n)||1)*e:o+e}}function s(t){var e=t.doc,i=o(t);e.iter(function(t){var e=i(t);e!=t.height&&Or(t,e)})}function a(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Re(t)}function l(t){h(t),pi(t),setTimeout(function(){b(t)},20)}function h(t){var e=t.display.gutters,i=t.options.gutters;_o(e);for(var n=0;n<i.length;++n){var r=i[n],o=e.appendChild(Co("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none",c(t)}function c(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px",t.display.scrollbarH.style.left=t.options.fixedGutter?e+"px":0}function u(t){if(0==t.height)return 0;for(var e,i=t.text.length,n=t;e=Kn(n);){var r=e.find(0,!0);n=r.from.line,i+=r.from.ch-r.to.ch}for(n=t;e=Zn(n);){var r=e.find(0,!0);i-=n.text.length-r.from.ch,n=r.to.line,i+=n.text.length-r.to.ch}return i}function d(t){var e=t.display,i=t.doc;e.maxLine=Ir(i,i.first),e.maxLineLength=u(e.maxLine),e.maxLineChanged=!0,i.iter(function(t){var i=u(t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}function p(t){var e=go(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function f(t){return t.display.scroller.clientHeight-t.display.wrapper.clientHeight<pa-3}function g(t){var e=t.display.scroller;return{clientHeight:e.clientHeight,barHeight:t.display.scrollbarV.clientHeight,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,hScrollbarTakesSpace:f(t),barWidth:t.display.scrollbarH.clientWidth,docHeight:Math.round(t.doc.height+Te(t.display))}}function m(t,e){e||(e=g(t));var i=t.display,n=zo(i.measure),r=e.docHeight+pa,o=e.scrollWidth>e.clientWidth;o&&e.scrollWidth<=e.clientWidth+1&&n>0&&!e.hScrollbarTakesSpace&&(o=!1);var s=r>e.clientHeight;if(s?(i.scrollbarV.style.display="block",i.scrollbarV.style.bottom=o?n+"px":"0",i.scrollbarV.firstChild.style.height=Math.max(0,r-e.clientHeight+(e.barHeight||i.scrollbarV.clientHeight))+"px"):(i.scrollbarV.style.display="",i.scrollbarV.firstChild.style.height="0"),o?(i.scrollbarH.style.display="block",i.scrollbarH.style.right=s?n+"px":"0",i.scrollbarH.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.barWidth||i.scrollbarH.clientWidth)+"px"):(i.scrollbarH.style.display="",i.scrollbarH.firstChild.style.width="0"),o&&s?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=i.scrollbarFiller.style.width=n+"px"):i.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n+"px",i.gutterFiller.style.width=i.gutters.offsetWidth+"px"):i.gutterFiller.style.display="",!t.state.checkedOverlayScrollbar&&e.clientHeight>0){if(0===n){var a=us&&!as?"12px":"18px";i.scrollbarV.style.minWidth=i.scrollbarH.style.minHeight=a;var l=function(e){io(e)!=i.scrollbarV&&io(e)!=i.scrollbarH&&li(t,Pi)(e)};ha(i.scrollbarV,"mousedown",l),ha(i.scrollbarH,"mousedown",l)}t.state.checkedOverlayScrollbar=!0}}function v(t,e,i){var n=i&&null!=i.top?Math.max(0,i.top):t.scroller.scrollTop;n=Math.floor(n-Se(t));var r=i&&null!=i.bottom?i.bottom:n+t.wrapper.clientHeight,o=Wr(e,n),s=Wr(e,r);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;if(o>a)return{from:a,to:Wr(e,Nr(Ir(e,a))+t.wrapper.clientHeight)};if(Math.min(l,e.lastLine())>=s)return{from:Wr(e,Nr(Ir(e,l))-t.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(s,o+1)}}function b(t){var e=t.display,i=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=w(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=n+"px",s=0;s<i.length;s++)if(!i[s].hidden){t.options.fixedGutter&&i[s].gutter&&(i[s].gutter.style.left=o);var a=i[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=n+r+"px")}}function y(t){if(!t.options.lineNumbers)return!1;var e=t.doc,i=x(t.options,e.first+e.size-1),n=t.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild(Co("div",[Co("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-s),n.lineNumWidth=n.lineNumInnerWidth+s,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",c(t),!0}return!1}function x(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function w(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function k(t,e,i){var n=t.display;this.viewport=e,this.visible=v(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=i,this.dims=A(t)}function C(t,e){var i=t.display,n=t.doc;if(e.editorIsHidden)return gi(t),!1;if(!e.force&&e.visible.from>=i.viewFrom&&e.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&0==yi(t))return!1;y(t)&&(gi(t),e.dims=A(t));var r=n.first+n.size,o=Math.max(e.visible.from-t.options.viewportMargin,n.first),s=Math.min(r,e.visible.to+t.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>s&&i.viewTo-s<20&&(s=Math.min(r,i.viewTo)),vs&&(o=er(t.doc,o),s=ir(t.doc,s));var a=o!=i.viewFrom||s!=i.viewTo||i.lastWrapHeight!=e.wrapperHeight||i.lastWrapWidth!=e.wrapperWidth;bi(t,o,s),i.viewOffset=Nr(Ir(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var l=yi(t);if(!a&&0==l&&!e.force&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var h=Mo();return l>4&&(i.lineDiv.style.display="none"),P(t,i.updateLineNumbers,e.dims),l>4&&(i.lineDiv.style.display=""),h&&Mo()!=h&&h.offsetHeight&&h.focus(),_o(i.cursorDiv),_o(i.selectionDiv),a&&(i.lastWrapHeight=e.wrapperHeight,i.lastWrapWidth=e.wrapperWidth,we(t,400)),i.updateLineNumbers=null,!0}function _(t,e){for(var i=e.force,n=e.viewport,r=!0;;r=!1){if(r&&t.options.lineWrapping&&e.oldScrollerWidth!=t.display.scroller.clientWidth)i=!0;else if(i=!1,n&&null!=n.top&&(n={top:Math.min(t.doc.height+Te(t.display)-pa-t.display.scroller.clientHeight,n.top)}),e.visible=v(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!C(t,e))break;D(t);var o=g(t);ve(t),T(t,o),m(t,o)}ro(t,"update",t),(t.display.viewFrom!=e.oldViewFrom||t.display.viewTo!=e.oldViewTo)&&ro(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo)}function S(t,e){var i=new k(t,e);if(C(t,i)){D(t),_(t,i);var n=g(t);ve(t),T(t,n),m(t,n)}}function T(t,e){t.display.sizer.style.minHeight=t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=Math.max(e.docHeight,e.clientHeight-pa)+"px"}function M(t,e){t.display.sizer.offsetWidth+t.display.gutters.offsetWidth<t.display.scroller.clientWidth-1&&(t.display.sizer.style.minHeight=t.display.heightForcer.style.top="0px",t.display.gutters.style.height=e.docHeight+"px")}function D(t){for(var e=t.display,i=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var r,o=e.view[n];if(!o.hidden){if(Jo&&8>ts){var s=o.node.offsetTop+o.node.offsetHeight;r=s-i,i=s}else{var a=o.node.getBoundingClientRect();r=a.bottom-a.top}var l=o.line.height-r;if(2>r&&(r=Ke(e)),(l>.001||-.001>l)&&(Or(o.line,r),L(o.line),o.rest))for(var h=0;h<o.rest.length;h++)L(o.rest[h])}}}function L(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function A(t){for(var e=t.display,i={},n={},r=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s)i[t.options.gutters[s]]=o.offsetLeft+o.clientLeft+r,n[t.options.gutters[s]]=o.clientWidth;
return{fixedPos:w(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function P(t,e,i){function n(e){var i=e.nextSibling;return es&&us&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),i}for(var r=t.display,o=t.options.lineNumbers,s=r.lineDiv,a=s.firstChild,l=r.view,h=r.viewFrom,c=0;c<l.length;c++){var u=l[c];if(u.hidden);else if(u.node){for(;a!=u.node;)a=n(a);var d=o&&null!=e&&h>=e&&u.lineNumber;u.changes&&(go(u.changes,"gutter")>-1&&(d=!1),I(t,u,h,i)),d&&(_o(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(x(t.options,h)))),a=u.node.nextSibling}else{var p=$(t,u,h,i);s.insertBefore(p,a)}h+=u.size}for(;a;)a=n(a)}function I(t,e,i,n){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?E(t,e):"gutter"==o?N(t,e,i,n):"class"==o?W(e):"widget"==o&&R(e,n)}e.changes=null}function z(t){return t.node==t.text&&(t.node=Co("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),Jo&&8>ts&&(t.node.style.zIndex=2)),t.node}function H(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var i=z(t);t.background=i.insertBefore(Co("div",null,e),i.firstChild)}}function O(t,e){var i=t.display.externalMeasured;return i&&i.line==e.line?(t.display.externalMeasured=null,e.measure=i.measure,i.built):yr(t,e)}function E(t,e){var i=e.text.className,n=O(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,W(e)):i&&(e.text.className=i)}function W(t){H(t),t.line.wrapClass?z(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function N(t,e,i,n){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var r=e.line.gutterMarkers;if(t.options.lineNumbers||r){var o=z(e),s=e.gutter=o.insertBefore(Co("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.text);if(e.line.gutterClass&&(s.className+=" "+e.line.gutterClass),!t.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(Co("div",x(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),r)for(var a=0;a<t.options.gutters.length;++a){var l=t.options.gutters[a],h=r.hasOwnProperty(l)&&r[l];h&&s.appendChild(Co("div",[h],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function R(t,e){t.alignable&&(t.alignable=null);for(var i,n=t.node.firstChild;n;n=i){var i=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}B(t,e)}function $(t,e,i,n){var r=O(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),W(e),N(t,e,i,n),B(e,n),e.node}function B(t,e){if(F(t.line,t,e,!0),t.rest)for(var i=0;i<t.rest.length;i++)F(t.rest[i],t,e,!1)}function F(t,e,i,n){if(t.widgets)for(var r=z(e),o=0,s=t.widgets;o<s.length;++o){var a=s[o],l=Co("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||(l.ignoreEvents=!0),Y(a,l,e,i),n&&a.above?r.insertBefore(l,e.gutter||e.text):r.appendChild(l),ro(a,"redraw")}}function Y(t,e,i,n){if(t.noHScroll){(i.alignable||(i.alignable=[])).push(e);var r=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(r-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function G(t){return bs(t.line,t.ch)}function X(t,e){return ys(t,e)<0?e:t}function j(t,e){return ys(t,e)<0?t:e}function q(t,e){this.ranges=t,this.primIndex=e}function V(t,e){this.anchor=t,this.head=e}function U(t,e){var i=t[e];t.sort(function(t,e){return ys(t.from(),e.from())}),e=go(t,i);for(var n=1;n<t.length;n++){var r=t[n],o=t[n-1];if(ys(o.to(),r.from())>=0){var s=j(o.from(),r.from()),a=X(o.to(),r.to()),l=o.empty()?r.from()==r.head:o.from()==o.head;e>=n&&--e,t.splice(--n,2,new V(l?a:s,l?s:a))}}return new q(t,e)}function K(t,e){return new q([new V(t,e||t)],0)}function Z(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Q(t,e){if(e.line<t.first)return bs(t.first,0);var i=t.first+t.size-1;return e.line>i?bs(i,Ir(t,i).text.length):J(e,Ir(t,e.line).text.length)}function J(t,e){var i=t.ch;return null==i||i>e?bs(t.line,e):0>i?bs(t.line,0):t}function te(t,e){return e>=t.first&&e<t.first+t.size}function ee(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=Q(t,e[n]);return i}function ie(t,e,i,n){if(t.cm&&t.cm.display.shift||t.extend){var r=e.anchor;if(n){var o=ys(i,r)<0;o!=ys(n,r)<0?(r=i,i=n):o!=ys(i,n)<0&&(i=n)}return new V(r,i)}return new V(n||i,i)}function ne(t,e,i,n){he(t,new q([ie(t,t.sel.primary(),e,i)],0),n),t.cm&&ua(t.cm,"cursorMoved",t.cm)}function re(t,e,i){for(var n=[],r=0;r<t.sel.ranges.length;r++)n[r]=ie(t,t.sel.ranges[r],e[r],null);var o=U(n,t.sel.primIndex);he(t,o,i)}function oe(t,e,i,n){var r=t.sel.ranges.slice(0);r[e]=i,he(t,U(r,t.sel.primIndex),n)}function se(t,e,i,n){he(t,K(e,i),n)}function ae(t,e){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var i=0;i<e.length;i++)this.ranges[i]=new V(Q(t,e[i].anchor),Q(t,e[i].head))}};return ua(t,"beforeSelectionChange",t,i),t.cm&&ua(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?U(i.ranges,i.ranges.length-1):e}function le(t,e,i){var n=t.history.done,r=fo(n);r&&r.ranges?(n[n.length-1]=e,ce(t,e,i)):he(t,e,i)}function he(t,e,i){ce(t,e,i),jr(t,t.sel,t.cm?t.cm.curOp.id:0/0,i)}function ce(t,e,i){(lo(t,"beforeSelectionChange")||t.cm&&lo(t.cm,"beforeSelectionChange"))&&(e=ae(t,e));var n=i&&i.bias||(ys(e.primary().head,t.sel.primary().head)<0?-1:1);ue(t,pe(t,e,n,!0)),i&&i.scroll===!1||!t.cm||yn(t.cm)}function ue(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,ao(t.cm)),ro(t,"cursorActivity",t))}function de(t){ue(t,pe(t,t.sel,null,!1),ga)}function pe(t,e,i,n){for(var r,o=0;o<e.ranges.length;o++){var s=e.ranges[o],a=fe(t,s.anchor,i,n),l=fe(t,s.head,i,n);(r||a!=s.anchor||l!=s.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new V(a,l))}return r?U(r,e.primIndex):e}function fe(t,e,i,n){var r=!1,o=e,s=i||1;t.cantEdit=!1;t:for(;;){var a=Ir(t,o.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var h=a.markedSpans[l],c=h.marker;if((null==h.from||(c.inclusiveLeft?h.from<=o.ch:h.from<o.ch))&&(null==h.to||(c.inclusiveRight?h.to>=o.ch:h.to>o.ch))){if(n&&(ua(c,"beforeCursorEnter"),c.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!c.atomic)continue;var u=c.find(0>s?-1:1);if(0==ys(u,o)&&(u.ch+=s,u.ch<0?u=u.line>t.first?Q(t,bs(u.line-1)):null:u.ch>a.text.length&&(u=u.line<t.first+t.size-1?bs(u.line+1,0):null),!u)){if(r)return n?(t.cantEdit=!0,bs(t.first,0)):fe(t,e,i,!0);r=!0,u=e,s=-s}o=u;continue t}}return o}}function ge(t){for(var e=t.display,i=t.doc,n={},r=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),s=0;s<i.sel.ranges.length;s++){var a=i.sel.ranges[s],l=a.empty();(l||t.options.showCursorWhenSelecting)&&be(t,a,r),l||ye(t,a,o)}if(t.options.moveInputWithCursor){var h=Xe(t,i.sel.primary().head,"div"),c=e.wrapper.getBoundingClientRect(),u=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,h.top+u.top-c.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,h.left+u.left-c.left))}return n}function me(t,e){So(t.display.cursorDiv,e.cursors),So(t.display.selectionDiv,e.selection),null!=e.teTop&&(t.display.inputDiv.style.top=e.teTop+"px",t.display.inputDiv.style.left=e.teLeft+"px")}function ve(t){me(t,ge(t))}function be(t,e,i){var n=Xe(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),r=i.appendChild(Co("div","","CodeMirror-cursor"));if(r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var o=i.appendChild(Co("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function ye(t,e,i){function n(t,e,i,n){0>e&&(e=0),e=Math.round(e),n=Math.round(n),a.appendChild(Co("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==i?c-t:i)+"px; height: "+(n-e)+"px"))}function r(e,i,r){function o(i,n){return Ge(t,bs(e,i),"div",u,n)}var a,l,u=Ir(s,e),d=u.text.length;return Wo(Rr(u),i||0,null==r?d:r,function(t,e,s){var u,p,f,g=o(t,"left");if(t==e)u=g,p=f=g.left;else{if(u=o(e-1,"right"),"rtl"==s){var m=g;g=u,u=m}p=g.left,f=u.right}null==i&&0==t&&(p=h),u.top-g.top>3&&(n(p,g.top,null,g.bottom),p=h,g.bottom<u.top&&n(p,g.bottom,null,u.top)),null==r&&e==d&&(f=c),(!a||g.top<a.top||g.top==a.top&&g.left<a.left)&&(a=g),(!l||u.bottom>l.bottom||u.bottom==l.bottom&&u.right>l.right)&&(l=u),h+1>p&&(p=h),n(p,u.top,f-p,u.bottom)}),{start:a,end:l}}var o=t.display,s=t.doc,a=document.createDocumentFragment(),l=Me(t.display),h=l.left,c=o.lineSpace.offsetWidth-l.right,u=e.from(),d=e.to();if(u.line==d.line)r(u.line,u.ch,d.ch);else{var p=Ir(s,u.line),f=Ir(s,d.line),g=Jn(p)==Jn(f),m=r(u.line,u.ch,g?p.text.length+1:null).end,v=r(d.line,g?0:null,d.ch).start;g&&(m.top<v.top-2?(n(m.right,m.top,null,m.bottom),n(h,v.top,v.left,v.bottom)):n(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&n(h,m.bottom,null,v.top)}i.appendChild(a)}function xe(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){e.cursorDiv.style.visibility=(i=!i)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function we(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,yo(ke,t))}function ke(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var i=+new Date+t.options.workTime,n=Bs(e.mode,_e(t,e.frontier)),r=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(e.frontier>=t.display.viewFrom){var s=o.styles,a=gr(t,o,n,!0);o.styles=a.styles;var l=o.styleClasses,h=a.classes;h?o.styleClasses=h:l&&(o.styleClasses=null);for(var c=!s||s.length!=o.styles.length||l!=h&&(!l||!h||l.bgClass!=h.bgClass||l.textClass!=h.textClass),u=0;!c&&u<s.length;++u)c=s[u]!=o.styles[u];c&&r.push(e.frontier),o.stateAfter=Bs(e.mode,n)}else vr(t,o.text,n),o.stateAfter=0==e.frontier%5?Bs(e.mode,n):null;return++e.frontier,+new Date>i?(we(t,t.options.workDelay),!0):void 0}),r.length&&ai(t,function(){for(var e=0;e<r.length;e++)fi(t,r[e],"text")})}}function Ce(t,e,i){for(var n,r,o=t.doc,s=i?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=o.first)return o.first;var l=Ir(o,a-1);if(l.stateAfter&&(!i||a<=o.frontier))return a;var h=ba(l.text,null,t.options.tabSize);(null==r||n>h)&&(r=a-1,n=h)}return r}function _e(t,e,i){var n=t.doc,r=t.display;if(!n.mode.startState)return!0;var o=Ce(t,e,i),s=o>n.first&&Ir(n,o-1).stateAfter;return s=s?Bs(n.mode,s):Fs(n.mode),n.iter(o,e,function(i){vr(t,i.text,s);var a=o==e-1||0==o%5||o>=r.viewFrom&&o<r.viewTo;i.stateAfter=a?Bs(n.mode,s):null,++o}),i&&(n.frontier=o),s}function Se(t){return t.lineSpace.offsetTop}function Te(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Me(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=So(t.measure,Co("pre","x")),i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function De(t,e,i){var n=t.options.lineWrapping,r=n&&t.display.scroller.clientWidth;if(!e.measure.heights||n&&e.measure.width!=r){var o=e.measure.heights=[];if(n){e.measure.width=r;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],h=s[a+1];Math.abs(l.bottom-h.bottom)>2&&o.push((l.bottom+h.top)/2-i.top)}}o.push(i.bottom-i.top)}}function Le(t,e,i){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var n=0;n<t.rest.length;n++)if(Er(t.rest[n])>i)return{map:t.measure.maps[n],cache:t.measure.caches[n],before:!0}}function Ae(t,e){e=Jn(e);var i=Er(e),n=t.display.externalMeasured=new ui(t.doc,e,i);n.lineN=i;var r=n.built=yr(t,n);return n.text=r.pre,So(t.display.lineMeasure,r.pre),n}function Pe(t,e,i,n){return He(t,ze(t,e),i,n)}function Ie(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[mi(t,e)];var i=t.display.externalMeasured;return i&&e>=i.lineN&&e<i.lineN+i.size?i:void 0}function ze(t,e){var i=Er(e),n=Ie(t,i);n&&!n.text?n=null:n&&n.changes&&I(t,n,i,A(t)),n||(n=Ae(t,e));var r=Le(n,e,i);return{line:e,view:n,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function He(t,e,i,n,r){e.before&&(i=-1);var o,s=i+(n||"");return e.cache.hasOwnProperty(s)?o=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(De(t,e.view,e.rect),e.hasHeights=!0),o=Oe(t,e,i,n),o.bogus||(e.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}function Oe(t,e,i,n){for(var r,o,s,a,l=e.map,h=0;h<l.length;h+=3){var c=l[h],u=l[h+1];if(c>i?(o=0,s=1,a="left"):u>i?(o=i-c,s=o+1):(h==l.length-3||i==u&&l[h+3]>i)&&(s=u-c,o=s-1,i>=u&&(a="right")),null!=o){if(r=l[h+2],c==u&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==o)for(;h&&l[h-2]==l[h-3]&&l[h-1].insertLeft;)r=l[(h-=3)+2],a="left";if("right"==n&&o==u-c)for(;h<l.length-3&&l[h+3]==l[h+4]&&!l[h+5].insertLeft;)r=l[(h+=3)+2],a="right";break}}var d;if(3==r.nodeType){for(var h=0;4>h;h++){for(;o&&ko(e.line.text.charAt(c+o));)--o;for(;u>c+s&&ko(e.line.text.charAt(c+s));)++s;if(Jo&&9>ts&&0==o&&s==u-c)d=r.parentNode.getBoundingClientRect();else if(Jo&&t.options.lineWrapping){var p=wa(r,o,s).getClientRects();d=p.length?p["right"==n?p.length-1:0]:Cs}else d=wa(r,o,s).getBoundingClientRect()||Cs;if(d.left||d.right||0==o)break;s=o,o-=1,a="right"}Jo&&11>ts&&(d=Ee(t.display.measure,d))}else{o>0&&(a=n="right");var p;d=t.options.lineWrapping&&(p=r.getClientRects()).length>1?p["right"==n?p.length-1:0]:r.getBoundingClientRect()}if(Jo&&9>ts&&!o&&(!d||!d.left&&!d.right)){var f=r.parentNode.getClientRects()[0];d=f?{left:f.left,right:f.left+Ze(t.display),top:f.top,bottom:f.bottom}:Cs}for(var g=d.top-e.rect.top,m=d.bottom-e.rect.top,v=(g+m)/2,b=e.view.measure.heights,h=0;h<b.length-1&&!(v<b[h]);h++);var y=h?b[h-1]:0,x=b[h],w={left:("right"==a?d.right:d.left)-e.rect.left,right:("left"==a?d.left:d.right)-e.rect.left,top:y,bottom:x};return d.left||d.right||(w.bogus=!0),t.options.singleCursorHeightPerLine||(w.rtop=g,w.rbottom=m),w}function Ee(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Eo(t))return e;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*i,right:e.right*i,top:e.top*n,bottom:e.bottom*n}}function We(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Ne(t){t.display.externalMeasure=null,_o(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)We(t.display.view[e])}function Re(t){Ne(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function $e(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Be(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Fe(t,e,i,n){if(e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var o=sr(e.widgets[r]);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var s=Nr(e);if("local"==n?s+=Se(t.display):s-=t.display.viewOffset,"page"==n||"window"==n){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==n?0:Be());var l=a.left+("window"==n?0:$e());i.left+=l,i.right+=l}return i.top+=s,i.bottom+=s,i}function Ye(t,e,i){if("div"==i)return e;var n=e.left,r=e.top;if("page"==i)n-=$e(),r-=Be();else if("local"==i||!i){var o=t.display.sizer.getBoundingClientRect();n+=o.left,r+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:n-s.left,top:r-s.top}}function Ge(t,e,i,n,r){return n||(n=Ir(t.doc,e.line)),Fe(t,n,Pe(t,n,e.ch,r),i)}function Xe(t,e,i,n,r,o){function s(e,s){var a=He(t,r,e,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Fe(t,n,a,i)}function a(t,e){var i=l[e],n=i.level%2;return t==No(i)&&e&&i.level<l[e-1].level?(i=l[--e],t=Ro(i)-(i.level%2?0:1),n=!0):t==Ro(i)&&e<l.length-1&&i.level<l[e+1].level&&(i=l[++e],t=No(i)-i.level%2,n=!1),n&&t==i.to&&t>i.from?s(t-1):s(t,n)}n=n||Ir(t.doc,e.line),r||(r=ze(t,n));var l=Rr(n),h=e.ch;if(!l)return s(h);var c=jo(l,h),u=a(h,c);return null!=Wa&&(u.other=a(h,Wa)),u}function je(t,e){var i=0,e=Q(t.doc,e);t.options.lineWrapping||(i=Ze(t.display)*e.ch);var n=Ir(t.doc,e.line),r=Nr(n)+Se(t.display);return{left:i,right:i,top:r,bottom:r+n.height}}function qe(t,e,i,n){var r=bs(t,e);return r.xRel=n,i&&(r.outside=!0),r}function Ve(t,e,i){var n=t.doc;if(i+=t.display.viewOffset,0>i)return qe(n.first,0,!0,-1);var r=Wr(n,i),o=n.first+n.size-1;if(r>o)return qe(n.first+n.size-1,Ir(n,o).text.length,!0,1);0>e&&(e=0);for(var s=Ir(n,r);;){var a=Ue(t,s,r,e,i),l=Zn(s),h=l&&l.find(0,!0);if(!l||!(a.ch>h.from.ch||a.ch==h.from.ch&&a.xRel>0))return a;r=Er(s=h.to.line)}}function Ue(t,e,i,n,r){function o(n){var r=Xe(t,bs(i,n),"line",e,h);return a=!0,s>r.bottom?r.left-l:s<r.top?r.left+l:(a=!1,r.left)}var s=r-Nr(e),a=!1,l=2*t.display.wrapper.clientWidth,h=ze(t,e),c=Rr(e),u=e.text.length,d=$o(e),p=Bo(e),f=o(d),g=a,m=o(p),v=a;if(n>m)return qe(i,p,v,1);for(;;){if(c?p==d||p==Vo(e,d,1):1>=p-d){for(var b=f>n||m-n>=n-f?d:p,y=n-(b==d?f:m);ko(e.text.charAt(b));)++b;var x=qe(i,b,b==d?g:v,-1>y?-1:y>1?1:0);return x}var w=Math.ceil(u/2),k=d+w;if(c){k=d;for(var C=0;w>C;++C)k=Vo(e,k,1)}var _=o(k);_>n?(p=k,m=_,(v=a)&&(m+=1e3),u=w):(d=k,f=_,g=a,u-=w)}}function Ke(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==xs){xs=Co("pre");for(var e=0;49>e;++e)xs.appendChild(document.createTextNode("x")),xs.appendChild(Co("br"));xs.appendChild(document.createTextNode("x"))}So(t.measure,xs);var i=xs.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),_o(t.measure),i||1}function Ze(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=Co("span","xxxxxxxxxx"),i=Co("pre",[e]);So(t.measure,i);var n=e.getBoundingClientRect(),r=(n.right-n.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function Qe(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Ss},_s?_s.ops.push(t.curOp):t.curOp.ownsGroup=_s={ops:[t.curOp],delayedCallbacks:[]}}function Je(t){var e=t.delayedCallbacks,i=0;do{for(;i<e.length;i++)e[i]();for(var n=0;n<t.ops.length;n++){var r=t.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++](r.cm)}}while(i<e.length)}function ti(t){var e=t.curOp,i=e.ownsGroup;if(i)try{Je(i)}finally{_s=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;ei(i)}}function ei(t){for(var e=t.ops,i=0;i<e.length;i++)ii(e[i]);for(var i=0;i<e.length;i++)ni(e[i]);for(var i=0;i<e.length;i++)ri(e[i]);for(var i=0;i<e.length;i++)oi(e[i]);for(var i=0;i<e.length;i++)si(e[i])}function ii(t){var e=t.cm,i=e.display;t.updateMaxLine&&d(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<i.viewFrom||t.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new k(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ni(t){t.updatedDisplay=t.mustUpdate&&C(t.cm,t.update)}function ri(t){var e=t.cm,i=e.display;t.updatedDisplay&&D(e),t.barMeasure=g(e),i.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Pe(e,i.maxLine,i.maxLine.text.length).left+3,t.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+t.adjustWidthTo+pa-i.scroller.clientWidth)),(t.updatedDisplay||t.selectionChanged)&&(t.newSelectionNodes=ge(e))}function oi(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&$i(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1),t.newSelectionNodes&&me(e,t.newSelectionNodes),t.updatedDisplay&&T(e,t.barMeasure),(t.updatedDisplay||t.startHeight!=e.doc.height)&&m(e,t.barMeasure),t.selectionChanged&&xe(e),e.state.focused&&t.updateInput&&Ci(e,t.typing)}function si(t){var e=t.cm,i=e.display,n=e.doc;if(null!=t.adjustWidthTo&&Math.abs(t.barMeasure.scrollWidth-e.display.scroller.scrollWidth)>1&&m(e),t.updatedDisplay&&_(e,t.update),null==i.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=t.scrollTop&&(i.scroller.scrollTop!=t.scrollTop||t.forceScroll)){var r=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,t.scrollTop));i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=r}if(null!=t.scrollLeft&&(i.scroller.scrollLeft!=t.scrollLeft||t.forceScroll)){var o=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,t.scrollLeft));i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=o,b(e)}if(t.scrollToPos){var s=gn(e,Q(n,t.scrollToPos.from),Q(n,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&fn(e,s)}var a=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(a)for(var h=0;h<a.length;++h)a[h].lines.length||ua(a[h],"hide");if(l)for(var h=0;h<l.length;++h)l[h].lines.length&&ua(l[h],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.updatedDisplay&&es&&(e.options.lineWrapping&&M(e,t.barMeasure),t.barMeasure.scrollWidth>t.barMeasure.clientWidth&&t.barMeasure.scrollWidth<t.barMeasure.clientWidth+1&&!f(e)&&m(e)),t.changeObjs&&ua(e,"changes",e,t.changeObjs)}function ai(t,e){if(t.curOp)return e();Qe(t);try{return e()}finally{ti(t)}}function li(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Qe(t);try{return e.apply(t,arguments)}finally{ti(t)}}}function hi(t){return function(){if(this.curOp)return t.apply(this,arguments);Qe(this);try{return t.apply(this,arguments)}finally{ti(this)}}}function ci(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Qe(e);try{return t.apply(this,arguments)}finally{ti(e)}}}function ui(t,e,i){this.line=e,this.rest=tr(e),this.size=this.rest?Er(fo(this.rest))-i+1:1,this.node=this.text=null,this.hidden=nr(t,e)}function di(t,e,i){for(var n,r=[],o=e;i>o;o=n){var s=new ui(t.doc,Ir(t.doc,o),o);n=o+s.size,r.push(s)}return r}function pi(t,e,i,n){null==e&&(e=t.doc.first),null==i&&(i=t.doc.first+t.doc.size),n||(n=0);var r=t.display;if(n&&i<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)vs&&er(t.doc,e)<r.viewTo&&gi(t);else if(i<=r.viewFrom)vs&&ir(t.doc,i+n)>r.viewFrom?gi(t):(r.viewFrom+=n,r.viewTo+=n);else if(e<=r.viewFrom&&i>=r.viewTo)gi(t);else if(e<=r.viewFrom){var o=vi(t,i,i+n,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=n):gi(t)}else if(i>=r.viewTo){var o=vi(t,e,e,-1);o?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):gi(t)}else{var s=vi(t,e,e,-1),a=vi(t,i,i+n,1);s&&a?(r.view=r.view.slice(0,s.index).concat(di(t,s.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=n):gi(t)}var l=r.externalMeasured;l&&(i<l.lineN?l.lineN+=n:e<l.lineN+l.size&&(r.externalMeasured=null))}function fi(t,e,i){t.curOp.viewChanged=!0;var n=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var o=n.view[mi(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==go(s,i)&&s.push(i)}}}function gi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function mi(t,e){if(e>=t.display.viewTo)return null;if(e-=t.display.viewFrom,0>e)return null;for(var i=t.display.view,n=0;n<i.length;n++)if(e-=i[n].size,0>e)return n}function vi(t,e,i,n){var r,o=mi(t,e),s=t.display.view;if(!vs||i==t.doc.first+t.doc.size)return{index:o,lineN:i};for(var a=0,l=t.display.viewFrom;o>a;a++)l+=s[a].size;if(l!=e){if(n>0){if(o==s.length-1)return null;r=l+s[o].size-e,o++}else r=l-e;e+=r,i+=r}for(;er(t.doc,i)!=i;){if(o==(0>n?0:s.length-1))return null;i+=n*s[o-(0>n?1:0)].size,o+=n}return{index:o,lineN:i}}function bi(t,e,i){var n=t.display,r=n.view;0==r.length||e>=n.viewTo||i<=n.viewFrom?(n.view=di(t,e,i),n.viewFrom=e):(n.viewFrom>e?n.view=di(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(mi(t,e))),n.viewFrom=e,n.viewTo<i?n.view=n.view.concat(di(t,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,mi(t,i)))),n.viewTo=i}function yi(t){for(var e=t.display.view,i=0,n=0;n<e.length;n++){var r=e[n];r.hidden||r.node&&!r.changes||++i}return i}function xi(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){ki(t),t.state.focused&&xi(t)})}function wi(t){function e(){var n=ki(t);n||i?(t.display.pollingFast=!1,xi(t)):(i=!0,t.display.poll.set(60,e))}var i=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function ki(t){var e=t.display.input,i=t.display.prevInput,n=t.doc;if(!t.state.focused||za(e)&&!i||Ti(t)||t.options.disableInput||t.state.keySeq)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var r=e.value;if(r==i&&!t.somethingSelected())return!1;if(Jo&&ts>=9&&t.display.inputHasSelection===r||us&&/[\uf700-\uf7ff]/.test(r))return Ci(t),!1;var o=!t.curOp;o&&Qe(t),t.display.shift=!1,8203!=r.charCodeAt(0)||n.sel!=t.display.selForContextMenu||i||(i="");for(var s=0,a=Math.min(i.length,r.length);a>s&&i.charCodeAt(s)==r.charCodeAt(s);)++s;var l=r.slice(s),h=Ia(l),c=null;t.state.pasteIncoming&&n.sel.ranges.length>1&&(Ts&&Ts.join("\n")==l?c=0==n.sel.ranges.length%Ts.length&&mo(Ts,Ia):h.length==n.sel.ranges.length&&(c=mo(h,function(t){return[t]})));for(var u=n.sel.ranges.length-1;u>=0;u--){var d=n.sel.ranges[u],p=d.from(),f=d.to();s<i.length?p=bs(p.line,p.ch-(i.length-s)):t.state.overwrite&&d.empty()&&!t.state.pasteIncoming&&(f=bs(f.line,Math.min(Ir(n,f.line).text.length,f.ch+fo(h).length)));var g=t.curOp.updateInput,m={from:p,to:f,text:c?c[u%c.length]:h,origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(an(t.doc,m),ro(t,"inputRead",t,m),l&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&d.head.ch<100&&(!u||n.sel.ranges[u-1].head.line!=d.head.line)){var v=t.getModeAt(d.head),b=Is(m);if(v.electricChars){for(var y=0;y<v.electricChars.length;y++)if(l.indexOf(v.electricChars.charAt(y))>-1){wn(t,b.line,"smart");break}}else v.electricInput&&v.electricInput.test(Ir(n,b.line).text.slice(0,b.ch))&&wn(t,b.line,"smart")}}return yn(t),t.curOp.updateInput=g,t.curOp.typing=!0,r.length>1e3||r.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=r,o&&ti(t),t.state.pasteIncoming=t.state.cutIncoming=!1,!0}function Ci(t,e){if(!t.display.contextMenuPending){var i,n,r=t.doc;if(t.somethingSelected()){t.display.prevInput="";var o=r.sel.primary();i=Ha&&(o.to().line-o.from().line>100||(n=t.getSelection()).length>1e3);var s=i?"-":n||t.getSelection();t.display.input.value=s,t.state.focused&&xa(t.display.input),Jo&&ts>=9&&(t.display.inputHasSelection=s)}else e||(t.display.prevInput=t.display.input.value="",Jo&&ts>=9&&(t.display.inputHasSelection=null));t.display.inaccurateSelection=i}}function _i(t){"nocursor"==t.options.readOnly||cs&&Mo()==t.display.input||t.display.input.focus()}function Si(t){t.state.focused||(_i(t),Zi(t))}function Ti(t){return t.options.readOnly||t.doc.cantEdit}function Mi(t){function e(){t.state.focused&&setTimeout(yo(_i,t),0)}function i(e){so(t,e)||la(e)}function n(e){if(t.somethingSelected())Ts=t.getSelections(),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,r.input.value=Ts.join("\n"),xa(r.input));else{for(var i=[],n=[],o=0;o<t.doc.sel.ranges.length;o++){var s=t.doc.sel.ranges[o].head.line,a={anchor:bs(s,0),head:bs(s+1,0)};n.push(a),i.push(t.getRange(a.anchor,a.head))}"cut"==e.type?t.setSelections(n,null,ga):(r.prevInput="",r.input.value=i.join("\n"),xa(r.input)),Ts=i}"cut"==e.type&&(t.state.cutIncoming=!0)}var r=t.display;ha(r.scroller,"mousedown",li(t,Pi)),Jo&&11>ts?ha(r.scroller,"dblclick",li(t,function(e){if(!so(t,e)){var i=Ai(t,e);if(i&&!Ei(t,e)&&!Li(t.display,e)){sa(e);var n=t.findWordAt(i);ne(t.doc,n.anchor,n.head)}}})):ha(r.scroller,"dblclick",function(e){so(t,e)||sa(e)}),ha(r.lineSpace,"selectstart",function(t){Li(r,t)||sa(t)}),gs||ha(r.scroller,"contextmenu",function(e){Ji(t,e)}),ha(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Ri(t,r.scroller.scrollTop),$i(t,r.scroller.scrollLeft,!0),ua(t,"scroll",t))}),ha(r.scrollbarV,"scroll",function(){r.scroller.clientHeight&&Ri(t,r.scrollbarV.scrollTop)}),ha(r.scrollbarH,"scroll",function(){r.scroller.clientHeight&&$i(t,r.scrollbarH.scrollLeft)}),ha(r.scroller,"mousewheel",function(e){Bi(t,e)}),ha(r.scroller,"DOMMouseScroll",function(e){Bi(t,e)}),ha(r.scrollbarH,"mousedown",e),ha(r.scrollbarV,"mousedown",e),ha(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),ha(r.input,"keyup",function(e){Ui.call(t,e)}),ha(r.input,"input",function(){Jo&&ts>=9&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),wi(t)}),ha(r.input,"keydown",li(t,qi)),ha(r.input,"keypress",li(t,Ki)),ha(r.input,"focus",yo(Zi,t)),ha(r.input,"blur",yo(Qi,t)),t.options.dragDrop&&(ha(r.scroller,"dragstart",function(e){Ni(t,e)}),ha(r.scroller,"dragenter",i),ha(r.scroller,"dragover",i),ha(r.scroller,"drop",li(t,Wi))),ha(r.scroller,"paste",function(e){Li(r,e)||(t.state.pasteIncoming=!0,_i(t),wi(t))}),ha(r.input,"paste",function(){if(es&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=r.input.selectionStart,i=r.input.selectionEnd;r.input.value+="$",r.input.selectionEnd=i,r.input.selectionStart=e,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,wi(t)}),ha(r.input,"cut",n),ha(r.input,"copy",n),ss&&ha(r.sizer,"mouseup",function(){Mo()==r.input&&r.input.blur(),_i(t)})}function Di(t){var e=t.display;(e.lastWrapHeight!=e.wrapper.clientHeight||e.lastWrapWidth!=e.wrapper.clientWidth)&&(e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,t.setSize())}function Li(t,e){for(var i=io(e);i!=t.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==t.sizer&&i!=t.mover)return!0}function Ai(t,e,i,n){var r=t.display;if(!i){var o=io(e);if(o==r.scrollbarH||o==r.scrollbarV||o==r.scrollbarFiller||o==r.gutterFiller)return null}var s,a,l=r.lineSpace.getBoundingClientRect();try{s=e.clientX-l.left,a=e.clientY-l.top}catch(e){return null}var h,c=Ve(t,s,a);if(n&&1==c.xRel&&(h=Ir(t.doc,c.line).text).length==c.ch){var u=ba(h,h.length,t.options.tabSize)-h.length;c=bs(c.line,Math.max(0,Math.round((s-Me(t.display).left)/Ze(t.display))-u))}return c}function Pi(t){if(!so(this,t)){var e=this,i=e.display;if(i.shift=t.shiftKey,Li(i,t))return es||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)),void 0;if(!Ei(e,t)){var n=Ai(e,t);switch(window.focus(),no(t)){case 1:n?Ii(e,t,n):io(t)==i.scroller&&sa(t);break;case 2:es&&(e.state.lastMiddleDown=+new Date),n&&ne(e.doc,n),setTimeout(yo(_i,e),20),sa(t);break;case 3:gs&&Ji(e,t)}}}}function Ii(t,e,i){setTimeout(yo(Si,t),0);var n,r=+new Date;ks&&ks.time>r-400&&0==ys(ks.pos,i)?n="triple":ws&&ws.time>r-400&&0==ys(ws.pos,i)?(n="double",ks={time:r,pos:i}):(n="single",ws={time:r,pos:i});var o=t.doc.sel,s=us?e.metaKey:e.ctrlKey;t.options.dragDrop&&Pa&&!Ti(t)&&"single"==n&&o.contains(i)>-1&&o.somethingSelected()?zi(t,e,i,s):Hi(t,e,i,n,s)}function zi(t,e,i,n){var r=t.display,o=li(t,function(s){es&&(r.scroller.draggable=!1),t.state.draggingText=!1,ca(document,"mouseup",o),ca(r.scroller,"drop",o),Math.abs(e.clientX-s.clientX)+Math.abs(e.clientY-s.clientY)<10&&(sa(s),n||ne(t.doc,i),_i(t),Jo&&9==ts&&setTimeout(function(){document.body.focus(),_i(t)},20))});es&&(r.scroller.draggable=!0),t.state.draggingText=o,r.scroller.dragDrop&&r.scroller.dragDrop(),ha(document,"mouseup",o),ha(r.scroller,"drop",o)
}function Hi(t,e,i,n,r){function o(e){if(0!=ys(g,e))if(g=e,"rect"==n){for(var r=[],o=t.options.tabSize,s=ba(Ir(h,i.line).text,i.ch,o),a=ba(Ir(h,e.line).text,e.ch,o),l=Math.min(s,a),p=Math.max(s,a),f=Math.min(i.line,e.line),m=Math.min(t.lastLine(),Math.max(i.line,e.line));m>=f;f++){var v=Ir(h,f).text,b=uo(v,l,o);l==p?r.push(new V(bs(f,b),bs(f,b))):v.length>b&&r.push(new V(bs(f,b),bs(f,uo(v,p,o))))}r.length||r.push(new V(i,i)),he(h,U(d.ranges.slice(0,u).concat(r),u),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var y=c,x=y.anchor,w=e;if("single"!=n){if("double"==n)var k=t.findWordAt(e);else var k=new V(bs(e.line,0),Q(h,bs(e.line+1,0)));ys(k.anchor,x)>0?(w=k.head,x=j(y.from(),k.anchor)):(w=k.anchor,x=X(y.to(),k.head))}var r=d.ranges.slice(0);r[u]=new V(Q(h,x),w),he(h,U(r,u),ma)}}function s(e){var i=++b,r=Ai(t,e,!0,"rect"==n);if(r)if(0!=ys(r,g)){Si(t),o(r);var a=v(l,h);(r.line>=a.to||r.line<a.from)&&setTimeout(li(t,function(){b==i&&s(e)}),150)}else{var c=e.clientY<m.top?-20:e.clientY>m.bottom?20:0;c&&setTimeout(li(t,function(){b==i&&(l.scroller.scrollTop+=c,s(e))}),50)}}function a(e){b=1/0,sa(e),_i(t),ca(document,"mousemove",y),ca(document,"mouseup",x),h.history.lastSelOrigin=null}var l=t.display,h=t.doc;sa(e);var c,u,d=h.sel;if(r&&!e.shiftKey?(u=h.sel.contains(i),c=u>-1?h.sel.ranges[u]:new V(i,i)):c=h.sel.primary(),e.altKey)n="rect",r||(c=new V(i,i)),i=Ai(t,e,!0,!0),u=-1;else if("double"==n){var p=t.findWordAt(i);c=t.display.shift||h.extend?ie(h,c,p.anchor,p.head):p}else if("triple"==n){var f=new V(bs(i.line,0),Q(h,bs(i.line+1,0)));c=t.display.shift||h.extend?ie(h,c,f.anchor,f.head):f}else c=ie(h,c,i);r?u>-1?oe(h,u,c,ma):(u=h.sel.ranges.length,he(h,U(h.sel.ranges.concat([c]),u),{scroll:!1,origin:"*mouse"})):(u=0,he(h,new q([c],0),ma),d=h.sel);var g=i,m=l.wrapper.getBoundingClientRect(),b=0,y=li(t,function(t){no(t)?s(t):a(t)}),x=li(t,a);ha(document,"mousemove",y),ha(document,"mouseup",x)}function Oi(t,e,i,n,r){try{var o=e.clientX,s=e.clientY}catch(e){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&sa(e);var a=t.display,l=a.lineDiv.getBoundingClientRect();if(s>l.bottom||!lo(t,i))return eo(e);s-=l.top-a.viewOffset;for(var h=0;h<t.options.gutters.length;++h){var c=a.gutters.childNodes[h];if(c&&c.getBoundingClientRect().right>=o){var u=Wr(t.doc,s),d=t.options.gutters[h];return r(t,i,t,u,d,e),eo(e)}}}function Ei(t,e){return Oi(t,e,"gutterClick",!0,ro)}function Wi(t){var e=this;if(!so(e,t)&&!Li(e.display,t)){sa(t),Jo&&(Ms=+new Date);var i=Ai(e,t,!0),n=t.dataTransfer.files;if(i&&!Ti(e))if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,o=Array(r),s=0,a=function(t,n){var a=new FileReader;a.onload=li(e,function(){if(o[n]=a.result,++s==r){i=Q(e.doc,i);var t={from:i,to:i,text:Ia(o.join("\n")),origin:"paste"};an(e.doc,t),le(e.doc,K(i,Is(t)))}}),a.readAsText(t)},l=0;r>l;++l)a(n[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(i)>-1)return e.state.draggingText(t),setTimeout(yo(_i,e),20),void 0;try{var o=t.dataTransfer.getData("Text");if(o){if(e.state.draggingText&&!(us?t.metaKey:t.ctrlKey))var h=e.listSelections();if(ce(e.doc,K(i,i)),h)for(var l=0;l<h.length;++l)pn(e.doc,"",h[l].anchor,h[l].head,"drag");e.replaceSelection(o,"around","paste"),_i(e)}}catch(t){}}}}function Ni(t,e){if(Jo&&(!t.state.draggingText||+new Date-Ms<100))return la(e),void 0;if(!so(t,e)&&!Li(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!os)){var i=Co("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",rs&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),rs&&i.parentNode.removeChild(i)}}function Ri(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Ko||S(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),Ko&&S(t),we(t,100))}function $i(t,e,i){(i?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,b(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function Bi(t,e){var i=e.wheelDeltaX,n=e.wheelDeltaY;null==i&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(i=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta);var r=t.display,o=r.scroller;if(i&&o.scrollWidth>o.clientWidth||n&&o.scrollHeight>o.clientHeight){if(n&&us&&es)t:for(var s=e.target,a=r.view;s!=o;s=s.parentNode)for(var l=0;l<a.length;l++)if(a[l].node==s){t.display.currentWheelTarget=s;break t}if(i&&!Ko&&!rs&&null!=Ls)return n&&Ri(t,Math.max(0,Math.min(o.scrollTop+n*Ls,o.scrollHeight-o.clientHeight))),$i(t,Math.max(0,Math.min(o.scrollLeft+i*Ls,o.scrollWidth-o.clientWidth))),sa(e),r.wheelStartX=null,void 0;if(n&&null!=Ls){var h=n*Ls,c=t.doc.scrollTop,u=c+r.wrapper.clientHeight;0>h?c=Math.max(0,c+h-50):u=Math.min(t.doc.height,u+h+50),S(t,{top:c,bottom:u})}20>Ds&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=i,r.wheelDY=n,setTimeout(function(){if(null!=r.wheelStartX){var t=o.scrollLeft-r.wheelStartX,e=o.scrollTop-r.wheelStartY,i=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,i&&(Ls=(Ls*Ds+i)/(Ds+1),++Ds)}},200)):(r.wheelDX+=i,r.wheelDY+=n))}}function Fi(t,e,i){if("string"==typeof e&&(e=Ys[e],!e))return!1;t.display.pollingFast&&ki(t)&&(t.display.pollingFast=!1);var n=t.display.shift,r=!1;try{Ti(t)&&(t.state.suppressEdits=!0),i&&(t.display.shift=!1),r=e(t)!=fa}finally{t.display.shift=n,t.state.suppressEdits=!1}return r}function Yi(t,e,i){for(var n=0;n<t.state.keyMaps.length;n++){var r=Xs(e,t.state.keyMaps[n],i);if(r)return r}return t.options.extraKeys&&Xs(e,t.options.extraKeys,i)||Xs(e,t.options.keyMap,i)}function Gi(t,e,i,n){var r=t.state.keySeq;if(r){if(js(e))return"handled";As.set(50,function(){t.state.keySeq==r&&(t.state.keySeq=null,Ci(t))}),e=r+" "+e}var o=Yi(t,e,n);return"multi"==o&&(t.state.keySeq=e),"handled"==o&&ro(t,"keyHandled",t,e,i),("handled"==o||"multi"==o)&&(sa(i),xe(t)),r&&!o&&/\'$/.test(e)?(sa(i),!0):!!o}function Xi(t,e){var i=qs(e,!0);return i?e.shiftKey&&!t.state.keySeq?Gi(t,"Shift-"+i,e,function(e){return Fi(t,e,!0)})||Gi(t,i,e,function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?Fi(t,e):void 0}):Gi(t,i,e,function(e){return Fi(t,e)}):!1}function ji(t,e,i){return Gi(t,"'"+i+"'",e,function(e){return Fi(t,e,!0)})}function qi(t){var e=this;if(Si(e),!so(e,t)){Jo&&11>ts&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var n=Xi(e,t);rs&&(Ps=n?i:null,!n&&88==i&&!Ha&&(us?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||Vi(e)}}function Vi(t){function e(t){18!=t.keyCode&&t.altKey||(Da(i,"CodeMirror-crosshair"),ca(document,"keyup",e),ca(document,"mouseover",e))}var i=t.display.lineDiv;La(i,"CodeMirror-crosshair"),ha(document,"keyup",e),ha(document,"mouseover",e)}function Ui(t){16==t.keyCode&&(this.doc.sel.shift=!1),so(this,t)}function Ki(t){var e=this;if(!(so(e,t)||t.ctrlKey&&!t.altKey||us&&t.metaKey)){var i=t.keyCode,n=t.charCode;if(rs&&i==Ps)return Ps=null,sa(t),void 0;if(!(rs&&(!t.which||t.which<10)||ss)||!Xi(e,t)){var r=String.fromCharCode(null==n?i:n);ji(e,t,r)||(Jo&&ts>=9&&(e.display.inputHasSelection=null),wi(e))}}}function Zi(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(ua(t,"focus",t),t.state.focused=!0,La(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(Ci(t),es&&setTimeout(yo(Ci,t,!0),0))),xi(t),xe(t))}function Qi(t){t.state.focused&&(ua(t,"blur",t),t.state.focused=!1,Da(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150)}function Ji(t,e){function i(){if(null!=r.input.selectionStart){var e=t.somethingSelected(),i=r.input.value=""+(e?r.input.value:"");r.prevInput=e?"":"",r.input.selectionStart=1,r.input.selectionEnd=i.length,r.selForContextMenu=t.doc.sel}}function n(){if(r.contextMenuPending=!1,r.inputDiv.style.position="relative",r.input.style.cssText=l,Jo&&9>ts&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=s),xi(t),null!=r.input.selectionStart){(!Jo||Jo&&9>ts)&&i();var e=0,n=function(){r.selForContextMenu==t.doc.sel&&0==r.input.selectionStart?li(t,Ys.selectAll)(t):e++<10?r.detectingSelectAll=setTimeout(n,500):Ci(t)};r.detectingSelectAll=setTimeout(n,200)}}if(!so(t,e,"contextmenu")){var r=t.display;if(!Li(r,e)&&!tn(t,e)){var o=Ai(t,e),s=r.scroller.scrollTop;if(o&&!rs){var a=t.options.resetSelectionOnContextMenu;a&&-1==t.doc.sel.contains(o)&&li(t,he)(t.doc,K(o),ga);var l=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(Jo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",es)var h=window.scrollY;if(_i(t),es&&window.scrollTo(null,h),Ci(t),t.somethingSelected()||(r.input.value=r.prevInput=" "),r.contextMenuPending=!0,r.selForContextMenu=t.doc.sel,clearTimeout(r.detectingSelectAll),Jo&&ts>=9&&i(),gs){la(e);var c=function(){ca(window,"mouseup",c),setTimeout(n,20)};ha(window,"mouseup",c)}else setTimeout(n,50)}}}}function tn(t,e){return lo(t,"gutterContextMenu")?Oi(t,e,"gutterContextMenu",!1,ua):!1}function en(t,e){if(ys(t,e.from)<0)return t;if(ys(t,e.to)<=0)return Is(e);var i=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=Is(e).ch-e.to.ch),bs(i,n)}function nn(t,e){for(var i=[],n=0;n<t.sel.ranges.length;n++){var r=t.sel.ranges[n];i.push(new V(en(r.anchor,e),en(r.head,e)))}return U(i,t.sel.primIndex)}function rn(t,e,i){return t.line==e.line?bs(i.line,t.ch-e.ch+i.ch):bs(i.line+(t.line-e.line),t.ch)}function on(t,e,i){for(var n=[],r=bs(t.first,0),o=r,s=0;s<e.length;s++){var a=e[s],l=rn(a.from,r,o),h=rn(Is(a),r,o);if(r=a.to,o=h,"around"==i){var c=t.sel.ranges[s],u=ys(c.head,c.anchor)<0;n[s]=new V(u?h:l,u?l:h)}else n[s]=new V(l,l)}return new q(n,t.sel.primIndex)}function sn(t,e,i){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(e,i,n,r){e&&(this.from=Q(t,e)),i&&(this.to=Q(t,i)),n&&(this.text=n),void 0!==r&&(this.origin=r)}),ua(t,"beforeChange",t,n),t.cm&&ua(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function an(t,e,i){if(t.cm){if(!t.cm.curOp)return li(t.cm,an)(t,e,i);if(t.cm.state.suppressEdits)return}if(!(lo(t,"beforeChange")||t.cm&&lo(t.cm,"beforeChange"))||(e=sn(t,e,!0))){var n=ms&&!i&&Yn(t,e.from,e.to);if(n)for(var r=n.length-1;r>=0;--r)ln(t,{from:n[r].from,to:n[r].to,text:r?[""]:e.text});else ln(t,e)}}function ln(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ys(e.from,e.to)){var i=nn(t,e);Gr(t,e,i,t.cm?t.cm.curOp.id:0/0),un(t,e,i,$n(t,e));var n=[];Ar(t,function(t,i){i||-1!=go(n,t.history)||(to(t.history,e),n.push(t.history)),un(t,e,null,$n(t,e))})}}function hn(t,e,i){if(!t.cm||!t.cm.state.suppressEdits){for(var n,r=t.history,o=t.sel,s="undo"==e?r.done:r.undone,a="undo"==e?r.undone:r.done,l=0;l<s.length&&(n=s[l],i?!n.ranges||n.equals(t.sel):n.ranges);l++);if(l!=s.length){for(r.lastOrigin=r.lastSelOrigin=null;n=s.pop(),n.ranges;){if(qr(n,a),i&&!n.equals(t.sel))return he(t,n,{clearRedo:!1}),void 0;o=n}var h=[];qr(o,a),a.push({changes:h,generation:r.generation}),r.generation=n.generation||++r.maxGeneration;for(var c=lo(t,"beforeChange")||t.cm&&lo(t.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var u=n.changes[l];if(u.origin=e,c&&!sn(t,u,!1))return s.length=0,void 0;h.push(Br(t,u));var d=l?nn(t,u):fo(s);un(t,u,d,Fn(t,u)),!l&&t.cm&&t.cm.scrollIntoView({from:u.from,to:Is(u)});var p=[];Ar(t,function(t,e){e||-1!=go(p,t.history)||(to(t.history,u),p.push(t.history)),un(t,u,null,Fn(t,u))})}}}}function cn(t,e){if(0!=e&&(t.first+=e,t.sel=new q(mo(t.sel.ranges,function(t){return new V(bs(t.anchor.line+e,t.anchor.ch),bs(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){pi(t.cm,t.first,t.first-e,e);for(var i=t.cm.display,n=i.viewFrom;n<i.viewTo;n++)fi(t.cm,n,"gutter")}}function un(t,e,i,n){if(t.cm&&!t.cm.curOp)return li(t.cm,un)(t,e,i,n);if(e.to.line<t.first)return cn(t,e.text.length-1-(e.to.line-e.from.line)),void 0;if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);cn(t,r),e={from:bs(t.first,0),to:bs(e.to.line+r,e.to.ch),text:[fo(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:bs(o,Ir(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=zr(t,e.from,e.to),i||(i=nn(t,e)),t.cm?dn(t.cm,e,n):Mr(t,e,n),ce(t,i,ga)}}function dn(t,e,i){var n=t.doc,r=t.display,s=e.from,a=e.to,l=!1,h=s.line;t.options.lineWrapping||(h=Er(Jn(Ir(n,s.line))),n.iter(h,a.line+1,function(t){return t==r.maxLine?(l=!0,!0):void 0})),n.sel.contains(e.from,e.to)>-1&&ao(t),Mr(n,e,i,o(t)),t.options.lineWrapping||(n.iter(h,s.line+e.text.length,function(t){var e=u(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,s.line),we(t,400);var c=e.text.length-(a.line-s.line)-1;s.line!=a.line||1!=e.text.length||Tr(t.doc,e)?pi(t,s.line,a.line+1,c):fi(t,s.line,"text");var d=lo(t,"changes"),p=lo(t,"change");if(p||d){var f={from:s,to:a,text:e.text,removed:e.removed,origin:e.origin};p&&ro(t,"change",t,f),d&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(f)}t.display.selForContextMenu=null}function pn(t,e,i,n,r){if(n||(n=i),ys(n,i)<0){var o=n;n=i,i=o}"string"==typeof e&&(e=Ia(e)),an(t,{from:i,to:n,text:e,origin:r})}function fn(t,e){if(!so(t,"scrollCursorIntoView")){var i=t.display,n=i.sizer.getBoundingClientRect(),r=null;if(e.top+n.top<0?r=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!ls){var o=Co("div","",null,"position: absolute; top: "+(e.top-i.viewOffset-Se(t.display))+"px; height: "+(e.bottom-e.top+pa)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(r),t.display.lineSpace.removeChild(o)}}}function gn(t,e,i,n){null==n&&(n=0);for(var r=0;5>r;r++){var o=!1,s=Xe(t,e),a=i&&i!=e?Xe(t,i):s,l=vn(t,Math.min(s.left,a.left),Math.min(s.top,a.top)-n,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+n),h=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=l.scrollTop&&(Ri(t,l.scrollTop),Math.abs(t.doc.scrollTop-h)>1&&(o=!0)),null!=l.scrollLeft&&($i(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-c)>1&&(o=!0)),!o)return s}}function mn(t,e,i,n,r){var o=vn(t,e,i,n,r);null!=o.scrollTop&&Ri(t,o.scrollTop),null!=o.scrollLeft&&$i(t,o.scrollLeft)}function vn(t,e,i,n,r){var o=t.display,s=Ke(t.display);0>i&&(i=0);var a=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-pa,h={};r-i>l&&(r=i+l);var c=t.doc.height+Te(o),u=s>i,d=r>c-s;if(a>i)h.scrollTop=u?0:i;else if(r>a+l){var p=Math.min(i,(d?c:r)-l);p!=a&&(h.scrollTop=p)}var f=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:o.scroller.scrollLeft,g=o.scroller.clientWidth-pa-o.gutters.offsetWidth,m=n-e>g;return m&&(n=e+g),10>e?h.scrollLeft=0:f>e?h.scrollLeft=Math.max(0,e-(m?0:10)):n>g+f-3&&(h.scrollLeft=n+(m?0:10)-g),h}function bn(t,e,i){(null!=e||null!=i)&&xn(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=i&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+i)}function yn(t){xn(t);var e=t.getCursor(),i=e,n=e;t.options.lineWrapping||(i=e.ch?bs(e.line,e.ch-1):e,n=bs(e.line,e.ch+1)),t.curOp.scrollToPos={from:i,to:n,margin:t.options.cursorScrollMargin,isCursor:!0}}function xn(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var i=je(t,e.from),n=je(t,e.to),r=vn(t,Math.min(i.left,n.left),Math.min(i.top,n.top)-e.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+e.margin);t.scrollTo(r.scrollLeft,r.scrollTop)}}function wn(t,e,i,n){var r,o=t.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?r=_e(t,e):i="prev");var s=t.options.tabSize,a=Ir(o,e),l=ba(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var h,c=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&(h=o.mode.indent(r,a.text.slice(c.length),a.text),h==fa||h>150)){if(!n)return;i="prev"}}else h=0,i="not";"prev"==i?h=e>o.first?ba(Ir(o,e-1).text,null,s):0:"add"==i?h=l+t.options.indentUnit:"subtract"==i?h=l-t.options.indentUnit:"number"==typeof i&&(h=l+i),h=Math.max(0,h);var u="",d=0;if(t.options.indentWithTabs)for(var p=Math.floor(h/s);p;--p)d+=s,u+="	";if(h>d&&(u+=po(h-d)),u!=c)pn(o,u,bs(e,0),bs(e,c.length),"+input");else for(var p=0;p<o.sel.ranges.length;p++){var f=o.sel.ranges[p];if(f.head.line==e&&f.head.ch<c.length){var d=bs(e,c.length);oe(o,p,new V(d,d));break}}a.stateAfter=null}function kn(t,e,i,n){var r=e,o=e;return"number"==typeof e?o=Ir(t,Z(t,e)):r=Er(e),null==r?null:(n(o,r)&&t.cm&&fi(t.cm,r,i),o)}function Cn(t,e){for(var i=t.doc.sel.ranges,n=[],r=0;r<i.length;r++){for(var o=e(i[r]);n.length&&ys(o.from,fo(n).to)<=0;){var s=n.pop();if(ys(s.from,o.from)<0){o.from=s.from;break}}n.push(o)}ai(t,function(){for(var e=n.length-1;e>=0;e--)pn(t.doc,"",n[e].from,n[e].to,"+delete");yn(t)})}function _n(t,e,i,n,r){function o(){var e=a+i;return e<t.first||e>=t.first+t.size?u=!1:(a=e,c=Ir(t,e))}function s(t){var e=(r?Vo:Uo)(c,l,i,!0);if(null==e){if(t||!o())return u=!1;l=r?(0>i?Bo:$o)(c):0>i?c.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,h=i,c=Ir(t,a),u=!0;if("char"==n)s();else if("column"==n)s(!0);else if("word"==n||"group"==n)for(var d=null,p="group"==n,f=t.cm&&t.cm.getHelper(e,"wordChars"),g=!0;!(0>i)||s(!g);g=!1){var m=c.text.charAt(l)||"\n",v=xo(m,f)?"w":p&&"\n"==m?"n":!p||/\s/.test(m)?null:"p";if(!p||g||v||(v="s"),d&&d!=v){0>i&&(i=1,s());break}if(v&&(d=v),i>0&&!s(!g))break}var b=fe(t,bs(a,l),h,!0);return u||(b.hitSide=!0),b}function Sn(t,e,i,n){var r,o=t.doc,s=e.left;if("page"==n){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+i*(a-(0>i?1.5:.5)*Ke(t.display))}else"line"==n&&(r=i>0?e.bottom+3:e.top-3);for(;;){var l=Ve(t,s,r);if(!l.outside)break;if(0>i?0>=r:r>=o.height){l.hitSide=!0;break}r+=5*i}return l}function Tn(e,i,n,r){t.defaults[e]=i,n&&(Hs[e]=r?function(t,e,i){i!=Os&&n(t,e,i)}:n)}function Mn(t){for(var e,i,n,r,o=t.split(/-(?!$)/),t=o[o.length-1],s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return e&&(t="Alt-"+t),i&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),n&&(t="Shift-"+t),t}function Dn(t){return"string"==typeof t?Gs[t]:t}function Ln(t,e,i,n,r){if(n&&n.shared)return An(t,e,i,n,r);if(t.cm&&!t.cm.curOp)return li(t.cm,Ln)(t,e,i,n,r);var o=new Us(t,r),s=ys(e,i);if(n&&bo(n,o,!1),s>0||0==s&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=Co("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Qn(t,e.line,e,i,o)||e.line!=i.line&&Qn(t,i.line,e,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");vs=!0}o.addToHistory&&Gr(t,{from:e,to:i,origin:"markText"},t.sel,0/0);var a,l=e.line,h=t.cm;if(t.iter(l,i.line+1,function(t){h&&o.collapsed&&!h.options.lineWrapping&&Jn(t)==h.display.maxLine&&(a=!0),o.collapsed&&l!=e.line&&Or(t,0),Wn(t,new Hn(o,l==e.line?e.ch:null,l==i.line?i.ch:null)),++l}),o.collapsed&&t.iter(e.line,i.line+1,function(e){nr(t,e)&&Or(e,0)}),o.clearOnEnter&&ha(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(ms=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Ks,o.atomic=!0),h){if(a&&(h.curOp.updateMaxLine=!0),o.collapsed)pi(h,e.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var c=e.line;c<=i.line;c++)fi(h,c,"text");o.atomic&&de(h.doc),ro(h,"markerAdded",h,o)}return o}function An(t,e,i,n,r){n=bo(n),n.shared=!1;var o=[Ln(t,e,i,n,r)],s=o[0],a=n.widgetNode;return Ar(t,function(t){a&&(n.widgetNode=a.cloneNode(!0)),o.push(Ln(t,Q(t,e),Q(t,i),n,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=fo(o)}),new Zs(o,s)}function Pn(t){return t.findMarks(bs(t.first,0),t.clipPos(bs(t.lastLine())),function(t){return t.parent})}function In(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.find(),o=t.clipPos(r.from),s=t.clipPos(r.to);if(ys(o,s)){var a=Ln(t,o,s,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function zn(t){for(var e=0;e<t.length;e++){var i=t[e],n=[i.primary.doc];Ar(i.primary.doc,function(t){n.push(t)});for(var r=0;r<i.markers.length;r++){var o=i.markers[r];-1==go(n,o.doc)&&(o.parent=null,i.markers.splice(r--,1))}}}function Hn(t,e,i){this.marker=t,this.from=e,this.to=i}function On(t,e){if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n.marker==e)return n}}function En(t,e){for(var i,n=0;n<t.length;++n)t[n]!=e&&(i||(i=[])).push(t[n]);return i}function Wn(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Nn(t,e,i){if(t)for(var n,r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);if(a||o.from==e&&"bookmark"==s.type&&(!i||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(n||(n=[])).push(new Hn(s,o.from,l?null:o.to))}}return n}function Rn(t,e,i){if(t)for(var n,r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||o.from==e&&"bookmark"==s.type&&(!i||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(n||(n=[])).push(new Hn(s,l?null:o.from-e,null==o.to?null:o.to-e))}}return n}function $n(t,e){var i=te(t,e.from.line)&&Ir(t,e.from.line).markedSpans,n=te(t,e.to.line)&&Ir(t,e.to.line).markedSpans;if(!i&&!n)return null;var r=e.from.ch,o=e.to.ch,s=0==ys(e.from,e.to),a=Nn(i,r,s),l=Rn(n,o,s),h=1==e.text.length,c=fo(e.text).length+(h?r:0);if(a)for(var u=0;u<a.length;++u){var d=a[u];if(null==d.to){var p=On(l,d.marker);p?h&&(d.to=null==p.to?null:p.to+c):d.to=r}}if(l)for(var u=0;u<l.length;++u){var d=l[u];if(null!=d.to&&(d.to+=c),null==d.from){var p=On(a,d.marker);p||(d.from=c,h&&(a||(a=[])).push(d))}else d.from+=c,h&&(a||(a=[])).push(d)}a&&(a=Bn(a)),l&&l!=a&&(l=Bn(l));var f=[a];if(!h){var g,m=e.text.length-2;if(m>0&&a)for(var u=0;u<a.length;++u)null==a[u].to&&(g||(g=[])).push(new Hn(a[u].marker,null,null));for(var u=0;m>u;++u)f.push(g);f.push(l)}return f}function Bn(t){for(var e=0;e<t.length;++e){var i=t[e];null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&t.splice(e--,1)}return t.length?t:null}function Fn(t,e){var i=Kr(t,e),n=$n(t,e);if(!i)return n;if(!n)return i;for(var r=0;r<i.length;++r){var o=i[r],s=n[r];if(o&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],h=0;h<o.length;++h)if(o[h].marker==l.marker)continue t;o.push(l)}else s&&(i[r]=s)}return i}function Yn(t,e,i){var n=null;if(t.iter(e.line,i.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var i=t.markedSpans[e].marker;!i.readOnly||n&&-1!=go(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var r=[{from:e,to:i}],o=0;o<n.length;++o)for(var s=n[o],a=s.find(0),l=0;l<r.length;++l){var h=r[l];if(!(ys(h.to,a.from)<0||ys(h.from,a.to)>0)){var c=[l,1],u=ys(h.from,a.from),d=ys(h.to,a.to);(0>u||!s.inclusiveLeft&&!u)&&c.push({from:h.from,to:a.from}),(d>0||!s.inclusiveRight&&!d)&&c.push({from:a.to,to:h.to}),r.splice.apply(r,c),l+=c.length-1}}return r}function Gn(t){var e=t.markedSpans;if(e){for(var i=0;i<e.length;++i)e[i].marker.detachLine(t);t.markedSpans=null}}function Xn(t,e){if(e){for(var i=0;i<e.length;++i)e[i].marker.attachLine(t);t.markedSpans=e}}function jn(t){return t.inclusiveLeft?-1:0}function qn(t){return t.inclusiveRight?1:0}function Vn(t,e){var i=t.lines.length-e.lines.length;if(0!=i)return i;var n=t.find(),r=e.find(),o=ys(n.from,r.from)||jn(t)-jn(e);if(o)return-o;var s=ys(n.to,r.to)||qn(t)-qn(e);return s?s:e.id-t.id}function Un(t,e){var i,n=vs&&t.markedSpans;if(n)for(var r,o=0;o<n.length;++o)r=n[o],r.marker.collapsed&&null==(e?r.from:r.to)&&(!i||Vn(i,r.marker)<0)&&(i=r.marker);return i}function Kn(t){return Un(t,!0)}function Zn(t){return Un(t,!1)}function Qn(t,e,i,n,r){var o=Ir(t,e),s=vs&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var h=l.marker.find(0),c=ys(h.from,i)||jn(l.marker)-jn(r),u=ys(h.to,n)||qn(l.marker)-qn(r);if(!(c>=0&&0>=u||0>=c&&u>=0)&&(0>=c&&(ys(h.to,i)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||c>=0&&(ys(h.from,n)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function Jn(t){for(var e;e=Kn(t);)t=e.find(-1,!0).line;return t}function tr(t){for(var e,i;e=Zn(t);)t=e.find(1,!0).line,(i||(i=[])).push(t);return i}function er(t,e){var i=Ir(t,e),n=Jn(i);return i==n?e:Er(n)}function ir(t,e){if(e>t.lastLine())return e;var i,n=Ir(t,e);if(!nr(t,n))return e;for(;i=Zn(n);)n=i.find(1,!0).line;return Er(n)+1}function nr(t,e){var i=vs&&e.markedSpans;if(i)for(var n,r=0;r<i.length;++r)if(n=i[r],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&rr(t,e,n))return!0}}function rr(t,e,i){if(null==i.to){var n=i.marker.find(1,!0);return rr(t,n.line,On(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==e.text.length)return!0;for(var r,o=0;o<e.markedSpans.length;++o)if(r=e.markedSpans[o],r.marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(null==r.to||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&rr(t,e,r))return!0}function or(t,e,i){Nr(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&bn(t,null,i)}function sr(t){if(null!=t.height)return t.height;if(!To(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.getGutterElement().offsetWidth+"px;"),So(t.cm.display.measure,Co("div",[t.node],null,e))}return t.height=t.node.offsetHeight}function ar(t,e,i,n){var r=new Qs(t,i,n);return r.noHScroll&&(t.display.alignWidgets=!0),kn(t.doc,e,"widget",function(e){var i=e.widgets||(e.widgets=[]);if(null==r.insertAt?i.push(r):i.splice(Math.min(i.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,!nr(t.doc,e)){var n=Nr(e)<t.doc.scrollTop;Or(e,e.height+sr(r)),n&&bn(t,null,r.height),t.curOp.forceUpdate=!0}return!0}),r}function lr(t,e,i,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Gn(t),Xn(t,i);var r=n?n(t):1;r!=t.height&&Or(t,r)}function hr(t){t.parent=null,Gn(t)}function cr(t,e){if(t)for(;;){var i=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;t=t.slice(0,i.index)+t.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==e[n]?e[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+i[2])}return t}function ur(e,i){if(e.blankLine)return e.blankLine(i);if(e.innerMode){var n=t.innerMode(e,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function dr(e,i,n,r){for(var o=0;10>o;o++){r&&(r[0]=t.innerMode(e,n).mode);var s=e.token(i,n);if(i.pos>i.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}function pr(t,e,i,n){function r(t){return{start:u.start,end:u.pos,string:u.current(),type:o||null,state:t?Bs(s.mode,c):c}}var o,s=t.doc,a=s.mode;e=Q(s,e);var l,h=Ir(s,e.line),c=_e(t,e.line,i),u=new Vs(h.text,t.options.tabSize);for(n&&(l=[]);(n||u.pos<e.ch)&&!u.eol();)u.start=u.pos,o=dr(a,u,c),n&&l.push(r(!0));return n?l:r()}function fr(t,e,i,n,r,o,s){var a=i.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,h=0,c=null,u=new Vs(e,t.options.tabSize),d=t.options.addModeClass&&[null];for(""==e&&cr(ur(i,n),o);!u.eol();){if(u.pos>t.options.maxHighlightLength?(a=!1,s&&vr(t,e,n,u.pos),u.pos=e.length,l=null):l=cr(dr(i,u,n,d),o),d){var p=d[0].name;p&&(l="m-"+(l?p+" "+l:p))}a&&c==l||(h<u.start&&r(u.start,c),h=u.start,c=l),u.start=u.pos}for(;h<u.pos;){var f=Math.min(u.pos,h+5e4);r(f,c),h=f}}function gr(t,e,i,n){var r=[t.state.modeGen],o={};fr(t,e.text,t.doc.mode,i,function(t,e){r.push(t,e)},o,n);for(var s=0;s<t.state.overlays.length;++s){var a=t.state.overlays[s],l=1,h=0;fr(t,e.text,a.mode,!0,function(t,e){for(var i=l;t>h;){var n=r[l];n>t&&r.splice(l,1,t,r[l+1],n),l+=2,h=Math.min(t,n)}if(e)if(a.opaque)r.splice(i,l-i,t,"cm-overlay "+e),l=i+2;else for(;l>i;i+=2){var o=r[i+1];r[i+1]=(o?o+" ":"")+"cm-overlay "+e}},o)}return{styles:r,classes:o.bgClass||o.textClass?o:null}}function mr(t,e,i){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=gr(t,e,e.stateAfter=_e(t,Er(e)));e.styles=n.styles,n.classes?e.styleClasses=n.classes:e.styleClasses&&(e.styleClasses=null),i===t.doc.frontier&&t.doc.frontier++}return e.styles}function vr(t,e,i,n){var r=t.doc.mode,o=new Vs(e,t.options.tabSize);for(o.start=o.pos=n||0,""==e&&ur(r,i);!o.eol()&&o.pos<=t.options.maxHighlightLength;)dr(r,o,i),o.start=o.pos}function br(t,e){if(!t||/^\s*$/.test(t))return null;var i=e.addModeClass?ea:ta;return i[t]||(i[t]=t.replace(/\S+/g,"cm-$&"))}function yr(t,e){var i=Co("span",null,null,es?"padding-right: .1px":null),n={pre:Co("pre",[i]),content:i,col:0,pos:0,cm:t};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o,s=r?e.rest[r-1]:e.line;n.pos=0,n.addToken=wr,(Jo||es)&&t.getOption("lineWrapping")&&(n.addToken=kr(n.addToken)),Oo(t.display.measure)&&(o=Rr(s))&&(n.addToken=Cr(n.addToken,o)),n.map=[];var a=e!=t.display.externalMeasured&&Er(s);Sr(s,n,mr(t,s,a)),s.styleClasses&&(s.styleClasses.bgClass&&(n.bgClass=Lo(s.styleClasses.bgClass,n.bgClass||"")),s.styleClasses.textClass&&(n.textClass=Lo(s.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ho(t.display.measure))),0==r?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return es&&/\bcm-tab\b/.test(n.content.lastChild.className)&&(n.content.className="cm-tab-wrap-hack"),ua(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=Lo(n.pre.className,n.textClass||"")),n}function xr(t){var e=Co("span","","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}function wr(t,e,i,n,r,o){if(e){var s=t.cm.options.specialChars,a=!1;if(s.test(e))for(var l=document.createDocumentFragment(),h=0;;){s.lastIndex=h;var c=s.exec(e),u=c?c.index-h:e.length-h;if(u){var d=document.createTextNode(e.slice(h,h+u));Jo&&9>ts?l.appendChild(Co("span",[d])):l.appendChild(d),t.map.push(t.pos,t.pos+u,d),t.col+=u,t.pos+=u}if(!c)break;if(h+=u+1,"	"==c[0]){var p=t.cm.options.tabSize,f=p-t.col%p,d=l.appendChild(Co("span",po(f),"cm-tab"));t.col+=f}else{var d=t.cm.options.specialCharPlaceholder(c[0]);Jo&&9>ts?l.appendChild(Co("span",[d])):l.appendChild(d),t.col+=1}t.map.push(t.pos,t.pos+1,d),t.pos++}else{t.col+=e.length;var l=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,l),Jo&&9>ts&&(a=!0),t.pos+=e.length}if(i||n||r||a){var g=i||"";n&&(g+=n),r&&(g+=r);var m=Co("span",[l],g);return o&&(m.title=o),t.content.appendChild(m)}t.content.appendChild(l)}}function kr(t){function e(t){for(var e=" ",i=0;i<t.length-2;++i)e+=i%2?" ":"";return e+=" "}return function(i,n,r,o,s,a){t(i,n.replace(/ {3,}/g,e),r,o,s,a)}}function Cr(t,e){return function(i,n,r,o,s,a){r=r?r+" cm-force-border":"cm-force-border";for(var l=i.pos,h=l+n.length;;){for(var c=0;c<e.length;c++){var u=e[c];if(u.to>l&&u.from<=l)break}if(u.to>=h)return t(i,n,r,o,s,a);t(i,n.slice(0,u.to-l),r,o,null,a),o=null,n=n.slice(u.to-l),l=u.to}}}function _r(t,e,i,n){var r=!n&&i.widgetNode;r&&(t.map.push(t.pos,t.pos+e,r),t.content.appendChild(r)),t.pos+=e}function Sr(t,e,i){var n=t.markedSpans,r=t.text,o=0;if(n)for(var s,a,l,h,c,u,d=r.length,p=0,f=1,g="",m=0;;){if(m==p){a=l=h=c="",u=null,m=1/0;for(var v=[],b=0;b<n.length;++b){var y=n[b],x=y.marker;y.from<=p&&(null==y.to||y.to>p)?(null!=y.to&&m>y.to&&(m=y.to,l=""),x.className&&(a+=" "+x.className),x.startStyle&&y.from==p&&(h+=" "+x.startStyle),x.endStyle&&y.to==m&&(l+=" "+x.endStyle),x.title&&!c&&(c=x.title),x.collapsed&&(!u||Vn(u.marker,x)<0)&&(u=y)):y.from>p&&m>y.from&&(m=y.from),"bookmark"==x.type&&y.from==p&&x.widgetNode&&v.push(x)}if(u&&(u.from||0)==p&&(_r(e,(null==u.to?d+1:u.to)-p,u.marker,null==u.from),null==u.to))return;if(!u&&v.length)for(var b=0;b<v.length;++b)_r(e,0,v[b])}if(p>=d)break;for(var w=Math.min(d,m);;){if(g){var k=p+g.length;if(!u){var C=k>w?g.slice(0,w-p):g;e.addToken(e,C,s?s+a:a,h,p+C.length==m?l:"",c)}if(k>=w){g=g.slice(w-p),p=w;break}p=k,h=""}g=r.slice(o,o=i[f++]),s=br(i[f++],e.cm.options)
}}else for(var f=1;f<i.length;f+=2)e.addToken(e,r.slice(o,o=i[f]),br(i[f+1],e.cm.options))}function Tr(t,e){return 0==e.from.ch&&0==e.to.ch&&""==fo(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Mr(t,e,i,n){function r(t){return i?i[t]:null}function o(t,i,r){lr(t,i,r,n),ro(t,"change",t,e)}var s=e.from,a=e.to,l=e.text,h=Ir(t,s.line),c=Ir(t,a.line),u=fo(l),d=r(l.length-1),p=a.line-s.line;if(Tr(t,e)){for(var f=0,g=[];f<l.length-1;++f)g.push(new Js(l[f],r(f),n));o(c,c.text,d),p&&t.remove(s.line,p),g.length&&t.insert(s.line,g)}else if(h==c)if(1==l.length)o(h,h.text.slice(0,s.ch)+u+h.text.slice(a.ch),d);else{for(var g=[],f=1;f<l.length-1;++f)g.push(new Js(l[f],r(f),n));g.push(new Js(u+h.text.slice(a.ch),d,n)),o(h,h.text.slice(0,s.ch)+l[0],r(0)),t.insert(s.line+1,g)}else if(1==l.length)o(h,h.text.slice(0,s.ch)+l[0]+c.text.slice(a.ch),r(0)),t.remove(s.line+1,p);else{o(h,h.text.slice(0,s.ch)+l[0],r(0)),o(c,u+c.text.slice(a.ch),d);for(var f=1,g=[];f<l.length-1;++f)g.push(new Js(l[f],r(f),n));p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,g)}ro(t,"change",t,e)}function Dr(t){this.lines=t,this.parent=null;for(var e=0,i=0;e<t.length;++e)t[e].parent=this,i+=t[e].height;this.height=i}function Lr(t){this.children=t;for(var e=0,i=0,n=0;n<t.length;++n){var r=t[n];e+=r.chunkSize(),i+=r.height,r.parent=this}this.size=e,this.height=i,this.parent=null}function Ar(t,e,i){function n(t,r,o){if(t.linked)for(var s=0;s<t.linked.length;++s){var a=t.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;(!i||l)&&(e(a.doc,l),n(a.doc,t,l))}}}n(t,null,!0)}function Pr(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,s(t),i(t),t.options.lineWrapping||d(t),t.options.mode=e.modeOption,pi(t)}function Ir(t,e){if(e-=t.first,0>e||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var i=t;!i.lines;)for(var n=0;;++n){var r=i.children[n],o=r.chunkSize();if(o>e){i=r;break}e-=o}return i.lines[e]}function zr(t,e,i){var n=[],r=e.line;return t.iter(e.line,i.line+1,function(t){var o=t.text;r==i.line&&(o=o.slice(0,i.ch)),r==e.line&&(o=o.slice(e.ch)),n.push(o),++r}),n}function Hr(t,e,i){var n=[];return t.iter(e,i,function(t){n.push(t.text)}),n}function Or(t,e){var i=e-t.height;if(i)for(var n=t;n;n=n.parent)n.height+=i}function Er(t){if(null==t.parent)return null;for(var e=t.parent,i=go(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var r=0;n.children[r]!=e;++r)i+=n.children[r].chunkSize();return i+e.first}function Wr(t,e){var i=t.first;t:do{for(var n=0;n<t.children.length;++n){var r=t.children[n],o=r.height;if(o>e){t=r;continue t}e-=o,i+=r.chunkSize()}return i}while(!t.lines);for(var n=0;n<t.lines.length;++n){var s=t.lines[n],a=s.height;if(a>e)break;e-=a}return i+n}function Nr(t){t=Jn(t);for(var e=0,i=t.parent,n=0;n<i.lines.length;++n){var r=i.lines[n];if(r==t)break;e+=r.height}for(var o=i.parent;o;i=o,o=i.parent)for(var n=0;n<o.children.length;++n){var s=o.children[n];if(s==i)break;e+=s.height}return e}function Rr(t){var e=t.order;return null==e&&(e=t.order=Na(t.text)),e}function $r(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Br(t,e){var i={from:G(e.from),to:Is(e),text:zr(t,e.from,e.to)};return Vr(t,i,e.from.line,e.to.line+1),Ar(t,function(t){Vr(t,i,e.from.line,e.to.line+1)},!0),i}function Fr(t){for(;t.length;){var e=fo(t);if(!e.ranges)break;t.pop()}}function Yr(t,e){return e?(Fr(t.done),fo(t.done)):t.done.length&&!fo(t.done).ranges?fo(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),fo(t.done)):void 0}function Gr(t,e,i,n){var r=t.history;r.undone.length=0;var o,s=+new Date;if((r.lastOp==n||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastModTime>s-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=Yr(r,r.lastOp==n))){var a=fo(o.changes);0==ys(e.from,e.to)&&0==ys(e.from,a.to)?a.to=Is(e):o.changes.push(Br(t,e))}else{var l=fo(r.done);for(l&&l.ranges||qr(t.sel,r.done),o={changes:[Br(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(i),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=e.origin,a||ua(t,"historyAdded")}function Xr(t,e,i,n){var r=e.charAt(0);return"*"==r||"+"==r&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function jr(t,e,i,n){var r=t.history,o=n&&n.origin;i==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||Xr(t,o,fo(r.done),e))?r.done[r.done.length-1]=e:qr(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=i,n&&n.clearRedo!==!1&&Fr(r.undone)}function qr(t,e){var i=fo(e);i&&i.ranges&&i.equals(t)||e.push(t)}function Vr(t,e,i,n){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,i),Math.min(t.first+t.size,n),function(i){i.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=i.markedSpans),++o})}function Ur(t){if(!t)return null;for(var e,i=0;i<t.length;++i)t[i].marker.explicitlyCleared?e||(e=t.slice(0,i)):e&&e.push(t[i]);return e?e.length?e:null:t}function Kr(t,e){var i=e["spans_"+t.id];if(!i)return null;for(var n=0,r=[];n<e.text.length;++n)r.push(Ur(i[n]));return r}function Zr(t,e,i){for(var n=0,r=[];n<t.length;++n){var o=t[n];if(o.ranges)r.push(i?q.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var h,c=s[l];if(a.push({from:c.from,to:c.to,text:c.text}),e)for(var u in c)(h=u.match(/^spans_(\d+)$/))&&go(e,Number(h[1]))>-1&&(fo(a)[u]=c[u],delete c[u])}}}return r}function Qr(t,e,i,n){i<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function Jr(t,e,i,n){for(var r=0;r<t.length;++r){var o=t[r],s=!0;if(o.ranges){o.copied||(o=t[r]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)Qr(o.ranges[a].anchor,e,i,n),Qr(o.ranges[a].head,e,i,n)}else{for(var a=0;a<o.changes.length;++a){var l=o.changes[a];if(i<l.from.line)l.from=bs(l.from.line+n,l.from.ch),l.to=bs(l.to.line+n,l.to.ch);else if(e<=l.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function to(t,e){var i=e.from.line,n=e.to.line,r=e.text.length-(n-i)-1;Jr(t.done,i,n,r),Jr(t.undone,i,n,r)}function eo(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function io(t){return t.target||t.srcElement}function no(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),us&&t.ctrlKey&&1==e&&(e=3),e}function ro(t,e){function i(t){return function(){t.apply(null,o)}}var n=t._handlers&&t._handlers[e];if(n){var r,o=Array.prototype.slice.call(arguments,2);_s?r=_s.delayedCallbacks:da?r=da:(r=da=[],setTimeout(oo,0));for(var s=0;s<n.length;++s)r.push(i(n[s]))}}function oo(){var t=da;da=null;for(var e=0;e<t.length;++e)t[e]()}function so(t,e,i){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),ua(t,i||e.type,t,e),eo(e)||e.codemirrorIgnore}function ao(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var i=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)-1==go(i,e[n])&&i.push(e[n])}function lo(t,e){var i=t._handlers&&t._handlers[e];return i&&i.length>0}function ho(t){t.prototype.on=function(t,e){ha(this,t,e)},t.prototype.off=function(t,e){ca(this,t,e)}}function co(){this.id=null}function uo(t,e,i){for(var n=0,r=0;;){var o=t.indexOf("	",n);-1==o&&(o=t.length);var s=o-n;if(o==t.length||r+s>=e)return n+Math.min(s,e-r);if(r+=o-n,r+=i-r%i,n=o+1,r>=e)return n}}function po(t){for(;ya.length<=t;)ya.push(fo(ya)+" ");return ya[t]}function fo(t){return t[t.length-1]}function go(t,e){for(var i=0;i<t.length;++i)if(t[i]==e)return i;return-1}function mo(t,e){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n],n);return i}function vo(t,e){var i;if(Object.create)i=Object.create(t);else{var n=function(){};n.prototype=t,i=new n}return e&&bo(e,i),i}function bo(t,e,i){e||(e={});for(var n in t)!t.hasOwnProperty(n)||i===!1&&e.hasOwnProperty(n)||(e[n]=t[n]);return e}function yo(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function xo(t,e){return e?e.source.indexOf("\\w")>-1&&Ca(t)?!0:e.test(t):Ca(t)}function wo(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function ko(t){return t.charCodeAt(0)>=768&&_a.test(t)}function Co(t,e,i,n){var r=document.createElement(t);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function _o(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function So(t,e){return _o(t).appendChild(e)}function To(t,e){if(t.contains)return t.contains(e);for(;e=e.parentNode;)if(e==t)return!0}function Mo(){return document.activeElement}function Do(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function Lo(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)i[n]&&!Do(i[n]).test(e)&&(e+=" "+i[n]);return e}function Ao(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),i=0;i<e.length;i++){var n=e[i].CodeMirror;n&&t(n)}}function Po(){Aa||(Io(),Aa=!0)}function Io(){var t;ha(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Sa=null,Ao(Di)},100))}),ha(window,"blur",function(){Ao(Qi)})}function zo(t){if(null!=Sa)return Sa;var e=Co("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return So(t,e),e.offsetWidth&&(Sa=e.offsetHeight-e.clientHeight),Sa||0}function Ho(t){if(null==Ta){var e=Co("span","");So(t,Co("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Ta=e.offsetWidth<=1&&e.offsetHeight>2&&!(Jo&&8>ts))}return Ta?Co("span",""):Co("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}function Oo(t){if(null!=Ma)return Ma;var e=So(t,document.createTextNode("AA")),i=wa(e,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=wa(e,1,2).getBoundingClientRect();return Ma=n.right-i.right<3}function Eo(t){if(null!=Oa)return Oa;var e=So(t,Co("span","x")),i=e.getBoundingClientRect(),n=wa(e,0,1).getBoundingClientRect();return Oa=Math.abs(i.left-n.left)>1}function Wo(t,e,i,n){if(!t)return n(e,i,"ltr");for(var r=!1,o=0;o<t.length;++o){var s=t[o];(s.from<i&&s.to>e||e==i&&s.to==e)&&(n(Math.max(s.from,e),Math.min(s.to,i),1==s.level?"rtl":"ltr"),r=!0)}r||n(e,i,"ltr")}function No(t){return t.level%2?t.to:t.from}function Ro(t){return t.level%2?t.from:t.to}function $o(t){var e=Rr(t);return e?No(e[0]):0}function Bo(t){var e=Rr(t);return e?Ro(fo(e)):t.text.length}function Fo(t,e){var i=Ir(t.doc,e),n=Jn(i);n!=i&&(e=Er(n));var r=Rr(n),o=r?r[0].level%2?Bo(n):$o(n):0;return bs(e,o)}function Yo(t,e){for(var i,n=Ir(t.doc,e);i=Zn(n);)n=i.find(1,!0).line,e=null;var r=Rr(n),o=r?r[0].level%2?$o(n):Bo(n):n.text.length;return bs(null==e?Er(n):e,o)}function Go(t,e){var i=Fo(t,e.line),n=Ir(t.doc,i.line),r=Rr(n);if(!r||0==r[0].level){var o=Math.max(0,n.text.search(/\S/)),s=e.line==i.line&&e.ch<=o&&e.ch;return bs(i.line,s?0:o)}return i}function Xo(t,e,i){var n=t[0].level;return e==n?!0:i==n?!1:i>e}function jo(t,e){Wa=null;for(var i,n=0;n<t.length;++n){var r=t[n];if(r.from<e&&r.to>e)return n;if(r.from==e||r.to==e){if(null!=i)return Xo(t,r.level,t[i].level)?(r.from!=r.to&&(Wa=i),n):(r.from!=r.to&&(Wa=n),i);i=n}}return i}function qo(t,e,i,n){if(!n)return e+i;do e+=i;while(e>0&&ko(t.text.charAt(e)));return e}function Vo(t,e,i,n){var r=Rr(t);if(!r)return Uo(t,e,i,n);for(var o=jo(r,e),s=r[o],a=qo(t,e,s.level%2?-i:i,n);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return jo(r,a)==o?a:(s=r[o+=i],i>0==s.level%2?s.to:s.from);if(s=r[o+=i],!s)return null;a=i>0==s.level%2?qo(t,s.to,-1,n):qo(t,s.from,1,n)}}function Uo(t,e,i,n){var r=e+i;if(n)for(;r>0&&ko(t.text.charAt(r));)r+=i;return 0>r||r>t.text.length?null:r}var Ko=/gecko\/\d/i.test(navigator.userAgent),Zo=/MSIE \d/.test(navigator.userAgent),Qo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Jo=Zo||Qo,ts=Jo&&(Zo?document.documentMode||6:Qo[1]),es=/WebKit\//.test(navigator.userAgent),is=es&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ns=/Chrome\//.test(navigator.userAgent),rs=/Opera\//.test(navigator.userAgent),os=/Apple Computer/.test(navigator.vendor),ss=/KHTML\//.test(navigator.userAgent),as=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ls=/PhantomJS/.test(navigator.userAgent),hs=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),cs=hs||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),us=hs||/Mac/.test(navigator.platform),ds=/win/i.test(navigator.platform),ps=rs&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ps&&(ps=Number(ps[1])),ps&&ps>=15&&(rs=!1,es=!0);var fs=us&&(is||rs&&(null==ps||12.11>ps)),gs=Ko||Jo&&ts>=9,ms=!1,vs=!1,bs=t.Pos=function(t,e){return this instanceof bs?(this.line=t,this.ch=e,void 0):new bs(t,e)},ys=t.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch};q.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var i=this.ranges[e],n=t.ranges[e];if(0!=ys(i.anchor,n.anchor)||0!=ys(i.head,n.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new V(G(this.ranges[e].anchor),G(this.ranges[e].head));return new q(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(ys(e,n.from())>=0&&ys(t,n.to())<=0)return i}return-1}},V.prototype={from:function(){return j(this.anchor,this.head)},to:function(){return X(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var xs,ws,ks,Cs={left:0,right:0,top:0,bottom:0},_s=null,Ss=0,Ts=null,Ms=0,Ds=0,Ls=null;Jo?Ls=-.53:Ko?Ls=15:ns?Ls=-.7:os&&(Ls=-1/3);var As=new co,Ps=null,Is=t.changeEnd=function(t){return t.text?bs(t.from.line+t.text.length-1,fo(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.prototype={constructor:t,focus:function(){window.focus(),_i(this),wi(this)},setOption:function(t,e){var i=this.options,n=i[t];(i[t]!=e||"mode"==t)&&(i[t]=e,Hs.hasOwnProperty(t)&&li(this,Hs[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Dn(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,i=0;i<e.length;++i)if(e[i]==t||e[i].name==t)return e.splice(i,1),!0},addOverlay:hi(function(e,i){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:i&&i.opaque}),this.state.modeGen++,pi(this)}),removeOverlay:hi(function(t){for(var e=this.state.overlays,i=0;i<e.length;++i){var n=e[i].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(i,1),this.state.modeGen++,pi(this),void 0}}),indentLine:hi(function(t,e,i){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),te(this.doc,t)&&wn(this,t,e,i)}),indentSelection:hi(function(t){for(var e=this.doc.sel.ranges,i=-1,n=0;n<e.length;n++){var r=e[n];if(r.empty())r.head.line>i&&(wn(this,r.head.line,t,!0),i=r.head.line,n==this.doc.sel.primIndex&&yn(this));else{var o=r.from(),s=r.to(),a=Math.max(i,o.line);i=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;i>l;++l)wn(this,l,t);var h=this.doc.sel.ranges;0==o.ch&&e.length==h.length&&h[n].from().ch>0&&oe(this.doc,n,new V(o,h[n].to()),ga)}}}),getTokenAt:function(t,e){return pr(this,t,e)},getLineTokens:function(t,e){return pr(this,bs(t),e,!0)},getTokenTypeAt:function(t){t=Q(this.doc,t);var e,i=mr(this,Ir(this.doc,t.line)),n=0,r=(i.length-1)/2,o=t.ch;if(0==o)e=i[2];else for(;;){var s=n+r>>1;if((s?i[2*s-1]:0)>=o)r=s;else{if(!(i[2*s+1]<o)){e=i[2*s+2];break}n=s+1}}var a=e?e.indexOf("cm-overlay "):-1;return 0>a?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var i=this.doc.mode;return i.innerMode?t.innerMode(i,this.getTokenAt(e).state).mode:i},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!$s.hasOwnProperty(e))return $s;var n=$s[e],r=this.getModeAt(t);if("string"==typeof r[e])n[r[e]]&&i.push(n[r[e]]);else if(r[e])for(var o=0;o<r[e].length;o++){var s=n[r[e][o]];s&&i.push(s)}else r.helperType&&n[r.helperType]?i.push(n[r.helperType]):n[r.name]&&i.push(n[r.name]);for(var o=0;o<n._global.length;o++){var a=n._global[o];a.pred(r,this)&&-1==go(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(t,e){var i=this.doc;return t=Z(i,null==t?i.first+i.size-1:t),_e(this,t+1,e)},cursorCoords:function(t,e){var i,n=this.doc.sel.primary();return i=null==t?n.head:"object"==typeof t?Q(this.doc,t):t?n.from():n.to(),Xe(this,i,e||"page")},charCoords:function(t,e){return Ge(this,Q(this.doc,t),e||"page")},coordsChar:function(t,e){return t=Ye(this,t,e||"page"),Ve(this,t.left,t.top)},lineAtHeight:function(t,e){return t=Ye(this,{top:t,left:0},e||"page").top,Wr(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var i=!1,n=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>n&&(t=n,i=!0);var r=Ir(this.doc,t);return Fe(this,r,{top:0,left:0},e||"page").top+(i?this.doc.height-Nr(r):0)},defaultTextHeight:function(){return Ke(this.display)},defaultCharWidth:function(){return Ze(this.display)},setGutterMarker:hi(function(t,e,i){return kn(this.doc,t,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=i,!i&&wo(n)&&(t.gutterMarkers=null),!0})}),clearGutter:hi(function(t){var e=this,i=e.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[t]&&(i.gutterMarkers[t]=null,fi(e,n,"gutter"),wo(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),setLineProperty:hi(function(t,e,i){return kn(this.doc,t,"gutter",function(t){return t[e]=i,!0})}),addLineWidget:hi(function(t,e,i){return ar(this,t,e,i)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!te(this.doc,t))return null;var e=t;if(t=Ir(this.doc,t),!t)return null}else{var e=Er(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,i,n,r){var o=this.display;t=Xe(this,Q(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==n)s=t.top;else if("above"==n||"near"==n){var l=Math.max(o.wrapper.clientHeight,this.doc.height),h=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>h&&(a=h-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),i&&mn(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:hi(qi),triggerOnKeyPress:hi(Ki),triggerOnKeyUp:Ui,execCommand:function(t){return Ys.hasOwnProperty(t)?Ys[t](this):void 0},findPosH:function(t,e,i,n){var r=1;0>e&&(r=-1,e=-e);for(var o=0,s=Q(this.doc,t);e>o&&(s=_n(this.doc,s,r,i,n),!s.hitSide);++o);return s},moveH:hi(function(t,e){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?_n(i.doc,n.head,t,e,i.options.rtlMoveVisually):0>t?n.from():n.to()},va)}),deleteH:hi(function(t,e){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Cn(this,function(i){var r=_n(n,i.head,t,e,!1);return 0>t?{from:r,to:i.head}:{from:i.head,to:r}})}),findPosV:function(t,e,i,n){var r=1,o=n;0>e&&(r=-1,e=-e);for(var s=0,a=Q(this.doc,t);e>s;++s){var l=Xe(this,a,"div");if(null==o?o=l.left:l.left=o,a=Sn(this,l,r,i),a.hitSide)break}return a},moveV:hi(function(t,e){var i=this,n=this.doc,r=[],o=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(s){if(o)return 0>t?s.from():s.to();var a=Xe(i,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Sn(i,a,t,e);return"page"==e&&s==n.sel.primary()&&bn(i,null,Ge(i,l,"div").top-a.top),l},va),r.length)for(var s=0;s<n.sel.ranges.length;s++)n.sel.ranges[s].goalColumn=r[s]}),findWordAt:function(t){var e=this.doc,i=Ir(e,t.line).text,n=t.ch,r=t.ch;if(i){var o=this.getHelper(t,"wordChars");(t.xRel<0||r==i.length)&&n?--n:++r;for(var s=i.charAt(n),a=xo(s,o)?function(t){return xo(t,o)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!xo(t)};n>0&&a(i.charAt(n-1));)--n;for(;r<i.length&&a(i.charAt(r));)++r}return new V(bs(t.line,n),bs(t.line,r))},toggleOverwrite:function(t){(null==t||t!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?La(this.display.cursorDiv,"CodeMirror-overwrite"):Da(this.display.cursorDiv,"CodeMirror-overwrite"),ua(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Mo()==this.display.input},scrollTo:hi(function(t,e){(null!=t||null!=e)&&xn(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller,e=pa;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:hi(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:bs(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)xn(this),this.curOp.scrollToPos=t;else{var i=vn(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:hi(function(t,e){function i(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var n=this;null!=t&&(n.display.wrapper.style.width=i(t)),null!=e&&(n.display.wrapper.style.height=i(e)),n.options.lineWrapping&&Ne(this);var r=n.display.viewFrom;n.doc.iter(r,n.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){fi(n,r,"widget");break}++r}),n.curOp.forceUpdate=!0,ua(n,"refresh",this)}),operation:function(t){return ai(this,t)},refresh:hi(function(){var t=this.display.cachedTextHeight;pi(this),this.curOp.forceUpdate=!0,Re(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),c(this),(null==t||Math.abs(t-Ke(this.display))>.5)&&s(this),ua(this,"refresh",this)}),swapDoc:hi(function(t){var e=this.doc;return e.cm=null,Pr(this,t),Re(this),Ci(this),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ro(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ho(t);var zs=t.defaults={},Hs=t.optionHandlers={},Os=t.Init={toString:function(){return"CodeMirror.Init"}};Tn("value","",function(t,e){t.setValue(e)},!0),Tn("mode",null,function(t,e){t.doc.modeOption=e,i(t)},!0),Tn("indentUnit",2,i,!0),Tn("indentWithTabs",!1),Tn("smartIndent",!0),Tn("tabSize",4,function(t){n(t),Re(t),pi(t)},!0),Tn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("	")?"":"|	"),"g"),t.refresh()},!0),Tn("specialCharPlaceholder",xr,function(t){t.refresh()},!0),Tn("electricChars",!0),Tn("rtlMoveVisually",!ds),Tn("wholeLineUpdateBefore",!0),Tn("theme","default",function(t){a(t),l(t)},!0),Tn("keyMap","default",function(e,i,n){var r=Dn(i),o=n!=t.Init&&Dn(n);o&&o.detach&&o.detach(e,r),r.attach&&r.attach(e,o||null)}),Tn("extraKeys",null),Tn("lineWrapping",!1,r,!0),Tn("gutters",[],function(t){p(t.options),l(t)},!0),Tn("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?w(t.display)+"px":"0",t.refresh()},!0),Tn("coverGutterNextToScrollbar",!1,m,!0),Tn("lineNumbers",!1,function(t){p(t.options),l(t)},!0),Tn("firstLineNumber",1,l,!0),Tn("lineNumberFormatter",function(t){return t},l,!0),Tn("showCursorWhenSelecting",!1,ve,!0),Tn("resetSelectionOnContextMenu",!0),Tn("readOnly",!1,function(t,e){"nocursor"==e?(Qi(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||Ci(t))}),Tn("disableInput",!1,function(t,e){e||Ci(t)},!0),Tn("dragDrop",!0),Tn("cursorBlinkRate",530),Tn("cursorScrollMargin",0),Tn("cursorHeight",1,ve,!0),Tn("singleCursorHeightPerLine",!0,ve,!0),Tn("workTime",100),Tn("workDelay",100),Tn("flattenSpans",!0,n,!0),Tn("addModeClass",!1,n,!0),Tn("pollInterval",100),Tn("undoDepth",200,function(t,e){t.doc.history.undoDepth=e}),Tn("historyEventDelay",1250),Tn("viewportMargin",10,function(t){t.refresh()},!0),Tn("maxHighlightLength",1e4,n,!0),Tn("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),Tn("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),Tn("autofocus",null);var Es=t.modes={},Ws=t.mimeModes={};t.defineMode=function(e,i){t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Es[e]=i},t.defineMIME=function(t,e){Ws[t]=e},t.resolveMode=function(e){if("string"==typeof e&&Ws.hasOwnProperty(e))e=Ws[e];else if(e&&"string"==typeof e.name&&Ws.hasOwnProperty(e.name)){var i=Ws[e.name];"string"==typeof i&&(i={name:i}),e=vo(i,e),e.name=i.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,i){var i=t.resolveMode(i),n=Es[i.name];if(!n)return t.getMode(e,"text/plain");var r=n(e,i);if(Ns.hasOwnProperty(i.name)){var o=Ns[i.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}if(r.name=i.name,i.helperType&&(r.helperType=i.helperType),i.modeProps)for(var s in i.modeProps)r[s]=i.modeProps[s];return r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Ns=t.modeExtensions={};t.extendMode=function(t,e){var i=Ns.hasOwnProperty(t)?Ns[t]:Ns[t]={};bo(e,i)},t.defineExtension=function(e,i){t.prototype[e]=i},t.defineDocExtension=function(t,e){na.prototype[t]=e},t.defineOption=Tn;var Rs=[];t.defineInitHook=function(t){Rs.push(t)};var $s=t.helpers={};t.registerHelper=function(e,i,n){$s.hasOwnProperty(e)||($s[e]=t[e]={_global:[]}),$s[e][i]=n},t.registerGlobalHelper=function(e,i,n,r){t.registerHelper(e,i,r),$s[e]._global.push({pred:n,val:r})};var Bs=t.copyState=function(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var i={};for(var n in e){var r=e[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i},Fs=t.startState=function(t,e,i){return t.startState?t.startState(e,i):!0};t.innerMode=function(t,e){for(;t.innerMode;){var i=t.innerMode(e);if(!i||i.mode==t)break;e=i.state,t=i.mode}return i||{mode:t,state:e}};var Ys=t.commands={selectAll:function(t){t.setSelection(bs(t.firstLine(),0),bs(t.lastLine()),ga)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),ga)},killLine:function(t){Cn(t,function(e){if(e.empty()){var i=Ir(t.doc,e.head.line).text.length;return e.head.ch==i&&e.head.line<t.lastLine()?{from:e.head,to:bs(e.head.line+1,0)}:{from:e.head,to:bs(e.head.line,i)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){Cn(t,function(e){return{from:bs(e.from().line,0),to:Q(t.doc,bs(e.to().line+1,0))}})},delLineLeft:function(t){Cn(t,function(t){return{from:bs(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){Cn(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return{from:n,to:e.from()}})},delWrappedLineRight:function(t){Cn(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div");return{from:e.from(),to:n}})},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(bs(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(bs(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return Fo(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return Go(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return Yo(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div")},va)},goLineLeft:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:i},"div")},va)},goLineLeftSmart:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return n.ch<t.getLine(n.line).search(/\S/)?Go(t,e.head):n},va)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	")},insertSoftTab:function(t){for(var e=[],i=t.listSelections(),n=t.options.tabSize,r=0;r<i.length;r++){var o=i[r].from(),s=ba(t.getLine(o.line),o.ch,n);e.push(new Array(n-s%n+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){ai(t,function(){for(var e=t.listSelections(),i=[],n=0;n<e.length;n++){var r=e[n].head,o=Ir(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new bs(r.line,r.ch-1)),r.ch>0)r=new bs(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),bs(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=Ir(t.doc,r.line-1).text;s&&t.replaceRange(o.charAt(0)+"\n"+s.charAt(s.length-1),bs(r.line-1,s.length-1),bs(r.line,1),"+transpose")}i.push(new V(r,r))}t.setSelections(i)})},newlineAndIndent:function(t){ai(t,function(){for(var e=t.listSelections().length,i=0;e>i;i++){var n=t.listSelections()[i];t.replaceRange("\n",n.anchor,n.head,"+input"),t.indentLine(n.from().line+1,null,!0),yn(t)}})},toggleOverwrite:function(t){t.toggleOverwrite()}},Gs=t.keyMap={};Gs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Gs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Gs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Gs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Gs["default"]=us?Gs.macDefault:Gs.pcDefault,t.normalizeKeyMap=function(t){var e={};
for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete t[i];continue}for(var r=mo(i.split(" "),Mn),o=0;o<r.length;o++){var s,a;o==r.length-1?(a=i,s=n):(a=r.slice(0,o+1).join(" "),s="...");var l=e[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[i]}for(var h in e)t[h]=e[h];return t};var Xs=t.lookupKey=function(t,e,i){e=Dn(e);var n=e.call?e.call(t):e[t];if(n===!1)return"nothing";if("..."===n)return"multi";if(null!=n&&i(n))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Xs(t,e.fallthrough,i);for(var r=0;r<e.fallthrough.length;r++){var o=Xs(t,e.fallthrough[r],i);if(o)return o}}},js=t.isModifierKey=function(t){var e="string"==typeof t?t:Ea[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},qs=t.keyName=function(t,e){if(rs&&34==t.keyCode&&t["char"])return!1;var i=Ea[t.keyCode],n=i;return null==n||t.altGraphKey?!1:(t.altKey&&"Alt"!=i&&(n="Alt-"+n),(fs?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(n="Ctrl-"+n),(fs?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(n="Cmd-"+n),!e&&t.shiftKey&&"Shift"!=i&&(n="Shift-"+n),n)};t.fromTextArea=function(e,i){function n(){e.value=h.getValue()}if(i||(i={}),i.value=e.value,!i.tabindex&&e.tabindex&&(i.tabindex=e.tabindex),!i.placeholder&&e.placeholder&&(i.placeholder=e.placeholder),null==i.autofocus){var r=Mo();i.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(ha(e.form,"submit",n),!i.leaveSubmitMethodAlone)){var o=e.form,s=o.submit;try{var a=o.submit=function(){n(),o.submit=s,o.submit(),o.submit=a}}catch(l){}}e.style.display="none";var h=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},i);return h.save=n,h.getTextArea=function(){return e},h.toTextArea=function(){h.toTextArea=isNaN,n(),e.parentNode.removeChild(h.getWrapperElement()),e.style.display="",e.form&&(ca(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=s))},h};var Vs=t.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Vs.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var i=e==t;else var i=e&&(t.test?t.test(e):t(e));return i?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ba(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ba(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ba(this.string,null,this.tabSize)-(this.lineStart?ba(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,i){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&e!==!1&&(this.pos+=n[0].length),n)}var r=function(t){return i?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);return r(o)==r(t)?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var Us=t.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t};ho(Us),Us.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Qe(t),lo(this,"clear")){var i=this.find();i&&ro(this,"clear",i.from,i.to)}for(var n=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=On(s.markedSpans,this);t&&!this.collapsed?fi(t,Er(s),"text"):t&&(null!=a.to&&(r=Er(s)),null!=a.from&&(n=Er(s))),s.markedSpans=En(s.markedSpans,a),null==a.from&&this.collapsed&&!nr(this.doc,s)&&t&&Or(s,Ke(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Jn(this.lines[o]),h=u(l);h>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&pi(t,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&de(t.doc)),t&&ro(t,"markerCleared",t,this),e&&ti(t),this.parent&&this.parent.clear()}},Us.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var i,n,r=0;r<this.lines.length;++r){var o=this.lines[r],s=On(o.markedSpans,this);if(null!=s.from&&(i=bs(e?o:Er(o),s.from),-1==t))return i;if(null!=s.to&&(n=bs(e?o:Er(o),s.to),1==t))return n}return i&&{from:i,to:n}},Us.prototype.changed=function(){var t=this.find(-1,!0),e=this,i=this.doc.cm;t&&i&&ai(i,function(){var n=t.line,r=Er(t.line),o=Ie(i,r);if(o&&(We(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!nr(e.doc,n)&&null!=e.height){var s=e.height;e.height=null;var a=sr(e)-s;a&&Or(n,n.height+a)}})},Us.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=go(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Us.prototype.detachLine=function(t){if(this.lines.splice(go(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var Ks=0,Zs=t.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=this};ho(Zs),Zs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ro(this,"clear")}},Zs.prototype.find=function(t,e){return this.primary.find(t,e)};var Qs=t.LineWidget=function(t,e,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=t,this.node=e};ho(Qs),Qs.prototype.clear=function(){var t=this.cm,e=this.line.widgets,i=this.line,n=Er(i);if(null!=n&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(i.widgets=null);var o=sr(this);ai(t,function(){or(t,i,-o),fi(t,n,"widget"),Or(i,Math.max(0,i.height-o))})}},Qs.prototype.changed=function(){var t=this.height,e=this.cm,i=this.line;this.height=null;var n=sr(this)-t;n&&ai(e,function(){e.curOp.forceUpdate=!0,or(e,i,n),Or(i,i.height+n)})};var Js=t.Line=function(t,e,i){this.text=t,Xn(this,e),this.height=i?i(this):1};ho(Js),Js.prototype.lineNo=function(){return Er(this)};var ta={},ea={};Dr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var i=t,n=t+e;n>i;++i){var r=this.lines[i];this.height-=r.height,hr(r),ro(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,i){for(var n=t+e;n>t;++t)if(i(this.lines[t]))return!0}},Lr.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var i=0;i<this.children.length;++i){var n=this.children[i],r=n.chunkSize();if(r>t){var o=Math.min(e,r-t),s=n.height;if(n.removeInner(t,o),this.height-=s-n.height,r==o&&(this.children.splice(i--,1),n.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Dr))){var a=[];this.collapse(a),this.children=[new Dr(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,i){this.size+=e.length,this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(o>=t){if(r.insertInner(t,e,i),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var s=r.lines.splice(r.lines.length-25,25),a=new Dr(s);r.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),i=new Lr(e);if(t.parent){t.size-=i.size,t.height-=i.height;var n=go(t.parent.children,t);t.parent.children.splice(n+1,0,i)}else{var r=new Lr(t.children);r.parent=t,t.children=[r,i],t=r}i.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,i){for(var n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(o>t){var s=Math.min(e,o-t);if(r.iterN(t,s,i))return!0;if(0==(e-=s))break;t=0}else t-=o}}};var ia=0,na=t.Doc=function(t,e,i){if(!(this instanceof na))return new na(t,e,i);null==i&&(i=0),Lr.call(this,[new Dr([new Js("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=bs(i,0);this.sel=K(n),this.history=new $r(null),this.id=++ia,this.modeOption=e,"string"==typeof t&&(t=Ia(t)),Mr(this,{from:n,to:n,text:t}),he(this,K(n),ga)};na.prototype=vo(Lr.prototype,{constructor:na,iter:function(t,e,i){i?this.iterN(t-this.first,e-t,i):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var i=0,n=0;n<e.length;++n)i+=e[n].height;this.insertInner(t-this.first,e,i)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Hr(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:ci(function(t){var e=bs(this.first,0),i=this.first+this.size-1;an(this,{from:e,to:bs(i,Ir(this,i).text.length),text:Ia(t),origin:"setValue"},!0),he(this,K(e))}),replaceRange:function(t,e,i,n){e=Q(this,e),i=i?Q(this,i):e,pn(this,t,e,i,n)},getRange:function(t,e,i){var n=zr(this,Q(this,t),Q(this,e));return i===!1?n:n.join(i||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){return te(this,t)?Ir(this,t):void 0},getLineNumber:function(t){return Er(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Ir(this,t)),Jn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Q(this,t)},getCursor:function(t){var e,i=this.sel.primary();return e=null==t||"head"==t?i.head:"anchor"==t?i.anchor:"end"==t||"to"==t||t===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ci(function(t,e,i){se(this,Q(this,"number"==typeof t?bs(t,e||0):t),null,i)}),setSelection:ci(function(t,e,i){se(this,Q(this,t),Q(this,e||t),i)}),extendSelection:ci(function(t,e,i){ne(this,Q(this,t),e&&Q(this,e),i)}),extendSelections:ci(function(t,e){re(this,ee(this,t,e))}),extendSelectionsBy:ci(function(t,e){re(this,mo(this.sel.ranges,t),e)}),setSelections:ci(function(t,e,i){if(t.length){for(var n=0,r=[];n<t.length;n++)r[n]=new V(Q(this,t[n].anchor),Q(this,t[n].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),he(this,U(r,e),i)}}),addSelection:ci(function(t,e,i){var n=this.sel.ranges.slice(0);n.push(new V(Q(this,t),Q(this,e||t))),he(this,U(n,n.length-1),i)}),getSelection:function(t){for(var e,i=this.sel.ranges,n=0;n<i.length;n++){var r=zr(this,i[n].from(),i[n].to());e=e?e.concat(r):r}return t===!1?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],i=this.sel.ranges,n=0;n<i.length;n++){var r=zr(this,i[n].from(),i[n].to());t!==!1&&(r=r.join(t||"\n")),e[n]=r}return e},replaceSelection:function(t,e,i){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=t;this.replaceSelections(n,e,i||"+input")},replaceSelections:ci(function(t,e,i){for(var n=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];n[o]={from:s.from(),to:s.to(),text:Ia(t[o]),origin:i}}for(var a=e&&"end"!=e&&on(this,n,e),o=n.length-1;o>=0;o--)an(this,n[o]);a?le(this,a):this.cm&&yn(this.cm)}),undo:ci(function(){hn(this,"undo")}),redo:ci(function(){hn(this,"redo")}),undoSelection:ci(function(){hn(this,"undo",!0)}),redoSelection:ci(function(){hn(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,i=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var n=0;n<t.undone.length;n++)t.undone[n].ranges||++i;return{undo:e,redo:i}},clearHistory:function(){this.history=new $r(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Zr(this.history.done),undone:Zr(this.history.undone)}},setHistory:function(t){var e=this.history=new $r(this.history.maxGeneration);e.done=Zr(t.done.slice(0),null,!0),e.undone=Zr(t.undone.slice(0),null,!0)},addLineClass:ci(function(t,e,i){return kn(this,t,"gutter"==e?"gutter":"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[n]){if(Do(i).test(t[n]))return!1;t[n]+=" "+i}else t[n]=i;return!0})}),removeLineClass:ci(function(t,e,i){return kn(this,t,"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",r=t[n];if(!r)return!1;if(null==i)t[n]=null;else{var o=r.match(Do(i));if(!o)return!1;var s=o.index+o[0].length;t[n]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),markText:function(t,e,i){return Ln(this,Q(this,t),Q(this,e),i,"range")},setBookmark:function(t,e){var i={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return t=Q(this,t),Ln(this,t,t,i,"bookmark")},findMarksAt:function(t){t=Q(this,t);var e=[],i=Ir(this,t.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var r=i[n];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,i){t=Q(this,t),e=Q(this,e);var n=[],r=t.line;return this.iter(t.line,e.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];r==t.line&&t.ch>l.to||null==l.from&&r!=t.line||r==e.line&&l.from>e.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++r}),n},getAllMarks:function(){var t=[];return this.iter(function(e){var i=e.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&t.push(i[n].marker)}),t},posFromIndex:function(t){var e,i=this.first;return this.iter(function(n){var r=n.text.length+1;return r>t?(e=t,!0):(t-=r,++i,void 0)}),Q(this,bs(i,e))},indexFromPos:function(t){t=Q(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new na(Hr(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,i=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<i&&(i=t.to);var n=new na(Hr(this,e,i),t.mode||this.modeOption,e);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],In(n,Pn(this)),n},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==e){this.linked.splice(i,1),e.unlinkDoc(this),zn(Pn(this));break}}if(e.history==this.history){var r=[e.id];Ar(e,function(t){r.push(t.id)},!0),e.history=new $r(null),e.history.done=Zr(this.history.done,r),e.history.undone=Zr(this.history.undone,r)}},iterLinkedDocs:function(t){Ar(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),na.prototype.eachLine=na.prototype.iter;var ra="iter insert remove copy getEditor".split(" ");for(var oa in na.prototype)na.prototype.hasOwnProperty(oa)&&go(ra,oa)<0&&(t.prototype[oa]=function(t){return function(){return t.apply(this.doc,arguments)}}(na.prototype[oa]));ho(na);var sa=t.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},aa=t.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},la=t.e_stop=function(t){sa(t),aa(t)},ha=t.on=function(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var n=t._handlers||(t._handlers={}),r=n[e]||(n[e]=[]);r.push(i)}},ca=t.off=function(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else{var n=t._handlers&&t._handlers[e];if(!n)return;for(var r=0;r<n.length;++r)if(n[r]==i){n.splice(r,1);break}}},ua=t.signal=function(t,e){var i=t._handlers&&t._handlers[e];if(i)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;++r)i[r].apply(null,n)},da=null,pa=30,fa=t.Pass={toString:function(){return"CodeMirror.Pass"}},ga={scroll:!1},ma={origin:"*mouse"},va={origin:"+move"};co.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var ba=t.countColumn=function(t,e,i,n,r){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var o=n||0,s=r||0;;){var a=t.indexOf("	",o);if(0>a||a>=e)return s+(e-o);s+=a-o,s+=i-s%i,o=a+1}},ya=[""],xa=function(t){t.select()};hs?xa=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:Jo&&(xa=function(t){try{t.select()}catch(e){}}),[].indexOf&&(go=function(t,e){return t.indexOf(e)}),[].map&&(mo=function(t,e){return t.map(e)});var wa,ka=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ca=t.isWordChar=function(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||ka.test(t))},_a=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;wa=document.createRange?function(t,e,i){var n=document.createRange();return n.setEnd(t,i),n.setStart(t,e),n}:function(t,e,i){var n=document.body.createTextRange();try{n.moveToElementText(t.parentNode)}catch(r){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n},Jo&&11>ts&&(Mo=function(){try{return document.activeElement}catch(t){return document.body}});var Sa,Ta,Ma,Da=t.rmClass=function(t,e){var i=t.className,n=Do(e).exec(i);if(n){var r=i.slice(n.index+n[0].length);t.className=i.slice(0,n.index)+(r?n[1]+r:"")}},La=t.addClass=function(t,e){var i=t.className;Do(e).test(i)||(t.className+=(i?" ":"")+e)},Aa=!1,Pa=function(){if(Jo&&9>ts)return!1;var t=Co("div");return"draggable"in t||"dragDrop"in t}(),Ia=t.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],n=t.length;n>=e;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(i.push(o.slice(0,s)),e+=s+1):(i.push(o),e=r+1)}return i}:function(t){return t.split(/\r\n?|\n/)},za=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(i){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},Ha=function(){var t=Co("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Oa=null,Ea={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};t.keyNames=Ea,function(){for(var t=0;10>t;t++)Ea[t+48]=Ea[t+96]=String(t);for(var t=65;90>=t;t++)Ea[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)Ea[t+111]=Ea[t+63235]="F"+t}();var Wa,Na=function(){function t(t){return 247>=t?i.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1773>=t?n.charAt(t-1536):t>=1774&&2220>=t?"r":t>=8192&&8203>=t?"w":8204==t?"b":"L"}function e(t,e,i){this.level=t,this.from=e,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,h="L";return function(i){if(!r.test(i))return!1;for(var n,c=i.length,u=[],d=0;c>d;++d)u.push(n=t(i.charCodeAt(d)));for(var d=0,p=h;c>d;++d){var n=u[d];"m"==n?u[d]=p:p=n}for(var d=0,f=h;c>d;++d){var n=u[d];"1"==n&&"r"==f?u[d]="n":s.test(n)&&(f=n,"r"==n&&(u[d]="R"))}for(var d=1,p=u[0];c-1>d;++d){var n=u[d];"+"==n&&"1"==p&&"1"==u[d+1]?u[d]="1":","!=n||p!=u[d+1]||"1"!=p&&"n"!=p||(u[d]=p),p=n}for(var d=0;c>d;++d){var n=u[d];if(","==n)u[d]="N";else if("%"==n){for(var g=d+1;c>g&&"%"==u[g];++g);for(var m=d&&"!"==u[d-1]||c>g&&"1"==u[g]?"1":"N",v=d;g>v;++v)u[v]=m;d=g-1}}for(var d=0,f=h;c>d;++d){var n=u[d];"L"==f&&"1"==n?u[d]="L":s.test(n)&&(f=n)}for(var d=0;c>d;++d)if(o.test(u[d])){for(var g=d+1;c>g&&o.test(u[g]);++g);for(var b="L"==(d?u[d-1]:h),y="L"==(c>g?u[g]:h),m=b||y?"L":"R",v=d;g>v;++v)u[v]=m;d=g-1}for(var x,w=[],d=0;c>d;)if(a.test(u[d])){var k=d;for(++d;c>d&&a.test(u[d]);++d);w.push(new e(0,k,d))}else{var C=d,_=w.length;for(++d;c>d&&"L"!=u[d];++d);for(var v=C;d>v;)if(l.test(u[v])){v>C&&w.splice(_,0,new e(1,C,v));var S=v;for(++v;d>v&&l.test(u[v]);++v);w.splice(_,0,new e(2,S,v)),C=v}else++v;d>C&&w.splice(_,0,new e(1,C,d))}return 1==w[0].level&&(x=i.match(/^\s+/))&&(w[0].from=x[0].length,w.unshift(new e(0,0,x[0].length))),1==fo(w).level&&(x=i.match(/\s+$/))&&(fo(w).to-=x[0].length,w.push(new e(0,c-x[0].length,c))),w[0].level!=fo(w).level&&w.push(new e(w[0].level,c,c)),w}}();return t.version="4.8.0",t}),// CodeMirror, copyright (c) by Marijn Haverbeke and others
function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(e,r,o,s){function a(t){var i=l(e,r);if(!i||i.to.line-i.from.line<h)return null;for(var n=e.findMarksAt(i.from),o=0;o<n.length;++o)if(n[o].__isFold&&"fold"!==s){if(!t)return null;i.cleared=!0,n[o].clear()}return i}if(o&&o.call){var l=o;o=null}else var l=n(e,o,"rangeFinder");"number"==typeof r&&(r=t.Pos(r,0));var h=n(e,o,"minFoldSize"),c=a(!0);if(n(e,o,"scanUp"))for(;!c&&r.line>e.firstLine();)r=t.Pos(r.line-1,0),c=a(!1);if(c&&!c.cleared&&"unfold"!==s){var u=i(e,o);t.on(u,"mousedown",function(e){d.clear(),t.e_preventDefault(e)});var d=e.markText(c.from,c.to,{replacedWith:u,clearOnEnter:!0,__isFold:!0});d.on("clear",function(i,n){t.signal(e,"unfold",e,i,n)}),t.signal(e,"fold",e,c.from,c.to)}}function i(){var t=document.createElement("span"),e=document.createElement("i");return e.className="icon icon-ellipsis-horizontal",t.appendChild(e),t.className="CodeMirror-foldmarker",t}function n(t,e,i){if(e&&void 0!==e[i])return e[i];var n=t.options.foldOptions;return n&&void 0!==n[i]?n[i]:r[i]}t.newFoldFunction=function(t,i){return function(n,r){e(n,r,{rangeFinder:t,widget:i})}},t.defineExtension("foldCode",function(t,i,n){e(this,t,i,n)}),t.defineExtension("isFolded",function(t){for(var e=this.findMarksAt(t),i=0;i<e.length;++i)if(e[i].__isFold)return!0}),t.commands.toggleFold=function(t){t.foldCode(t.getCursor())},t.commands.fold=function(t){t.foldCode(t.getCursor(),null,"fold")},t.commands.unfold=function(t){t.foldCode(t.getCursor(),null,"unfold")},t.commands.foldAll=function(e){e.operation(function(){for(var i=e.firstLine(),n=e.lastLine();n>=i;i++)e.foldCode(t.Pos(i,0),null,"fold")})},t.commands.unfoldAll=function(e){e.operation(function(){for(var i=e.firstLine(),n=e.lastLine();n>=i;i++)e.foldCode(t.Pos(i,0),null,"unfold")})},t.registerHelper("fold","combine",function(){var t=Array.prototype.slice.call(arguments,0);return function(e,i){for(var n=0;n<t.length;++n){var r=t[n](e,i);if(r)return r}}}),t.registerHelper("fold","auto",function(t,e){for(var i=t.getHelpers(e,"fold"),n=0;n<i.length;n++){var r=i[n](t,e);if(r)return r}});var r={rangeFinder:t.fold.auto,widget:"",minFoldSize:0,scanUp:!1};t.defineOption("foldOptions",null)}),// CodeMirror, copyright (c) by Marijn Haverbeke and others
function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],t):t(CodeMirror)}(function(t){"use strict";function e(t){this.options=t,this.from=this.to=0}function i(t){return t===!0&&(t={}),null==t.gutter&&(t.gutter="CodeMirror-foldgutter"),null==t.indicatorOpen&&(t.indicatorOpen="CodeMirror-foldgutter-open"),null==t.indicatorFolded&&(t.indicatorFolded="CodeMirror-foldgutter-folded"),t}function n(t,e){for(var i=t.findMarksAt(u(e)),n=0;n<i.length;++n)if(i[n].__isFold&&i[n].find().from.line==e)return!0}function r(t){if("string"==typeof t){var e=document.createElement("div");return e.className=t+" CodeMirror-guttermarker-subtle",e}return t.cloneNode(!0)}function o(e,i,o){var s=e.state.foldGutter.options,a=i;e.eachLine(i,o,function(i){var o=null;if(n(e,a))o=r(s.indicatorFolded);else{var l=u(a,0),h=s.rangeFinder||t.fold.auto,c=h&&h(e,l);c&&c.from.line+1<c.to.line&&(o=r(s.indicatorOpen))}e.setGutterMarker(i,s.gutter,o),++a})}function s(t){var e=t.getViewport(),i=t.state.foldGutter;i&&(t.operation(function(){o(t,e.from,e.to)}),i.from=e.from,i.to=e.to)}function a(t,e,i){var n=t.state.foldGutter.options;i==n.gutter&&t.foldCode(u(e,0),n.rangeFinder)}function l(t){var e=t.state.foldGutter,i=t.state.foldGutter.options;e.from=e.to=0,clearTimeout(e.changeUpdate),e.changeUpdate=setTimeout(function(){s(t)},i.foldOnChangeTimeSpan||600)}function h(t){var e=t.state.foldGutter,i=t.state.foldGutter.options;clearTimeout(e.changeUpdate),e.changeUpdate=setTimeout(function(){var i=t.getViewport();e.from==e.to||i.from-e.to>20||e.from-i.to>20?s(t):t.operation(function(){i.from<e.from&&(o(t,i.from,e.from),e.from=i.from),i.to>e.to&&(o(t,e.to,i.to),e.to=i.to)})},i.updateViewportTimeSpan||400)}function c(t,e){var i=t.state.foldGutter,n=e.line;n>=i.from&&n<i.to&&o(t,n,n+1)}t.defineOption("foldGutter",!1,function(n,r,o){o&&o!=t.Init&&(n.clearGutter(n.state.foldGutter.options.gutter),n.state.foldGutter=null,n.off("gutterClick",a),n.off("change",l),n.off("viewportChange",h),n.off("fold",c),n.off("unfold",c),n.off("swapDoc",s)),r&&(n.state.foldGutter=new e(i(r)),s(n),n.on("gutterClick",a),n.on("change",l),n.on("viewportChange",h),n.on("fold",c),n.on("unfold",c),n.on("swapDoc",s))});var u=t.Pos}),// CodeMirror, copyright (c) by Marijn Haverbeke and others
function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.registerHelper("fold","indent",function(e,i){var n=e.getOption("tabSize"),r=e.getLine(i.line);if(/\S/.test(r)){for(var o=function(e){return t.countColumn(e,null,n)},s=o(r),a=null,l=i.line+1,h=e.lastLine();h>=l;++l){var c=e.getLine(l),u=o(c);if(u>s)a=l;else if(/\S/.test(c))break}return a?{from:t.Pos(i.line,r.length),to:t.Pos(a,e.getLine(a).length)}:void 0}})}),// CodeMirror, copyright (c) by Marijn Haverbeke and others
function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.registerGlobalHelper("fold","comment",function(t){return t.blockCommentStart&&t.blockCommentEnd},function(e,i){var n=e.getModeAt(i),r=n.blockCommentStart,o=n.blockCommentEnd;if(r&&o){for(var s,a=i.line,l=e.getLine(a),h=i.ch,c=0;;){var u=0>=h?-1:l.lastIndexOf(r,h-1);if(-1!=u){if(1==c&&u<i.ch)return;if(/comment/.test(e.getTokenTypeAt(t.Pos(a,u+1)))){s=u+r.length;break}h=u-1}else{if(1==c)return;c=1,h=l.length}}var d,p,f=1,g=e.lastLine();t:for(var m=a;g>=m;++m)for(var v=e.getLine(m),b=m==a?s:0;;){var y=v.indexOf(r,b),x=v.indexOf(o,b);if(0>y&&(y=v.length),0>x&&(x=v.length),b=Math.min(y,x),b==v.length)break;if(b==y)++f;else if(!--f){d=m,p=b;break t}++b}if(null!=d&&(a!=d||p!=s))return{from:t.Pos(a,s),to:t.Pos(d,p)}}})}),// CodeMirror, copyright (c) by Marijn Haverbeke and others
function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t){var e=t.search(n);return-1==e?0:e}var i={},n=/[^\s\u00a0]/,r=t.Pos;t.commands.toggleComment=function(t){for(var e=1/0,i=t.listSelections(),n=null,o=i.length-1;o>=0;o--){var s=i[o].from(),a=i[o].to();s.line>=e||(a.line>=e&&(a=r(e,0)),e=s.line,null==n?t.uncomment(s,a)?n="un":(t.lineComment(s,a,{indent:!0}),n="line"):"un"==n?t.uncomment(s,a):t.lineComment(s,a,{indent:!0}))}},t.defineExtension("lineComment",function(t,o,s){s||(s=i);var a=this,l=a.getModeAt(t),h=s.lineComment||l.lineComment;if(!h)return(s.blockCommentStart||l.blockCommentStart)&&(s.fullLines=!0,a.blockComment(t,o,s)),void 0;var c=a.getLine(t.line);if(null!=c){var u=Math.min(0!=o.ch||o.line==t.line?o.line+1:o.line,a.lastLine()+1),d=null==s.padding?" ":s.padding,p=s.commentBlankLines||t.line==o.line;a.operation(function(){if(s.indent){for(var i=1/0,o=t.line;u>o;++o){var l=a.getLine(o);(p||n.test(l))&&(i=Math.min(e(l),i))}for(var c=new Array(i+1).join(" "),o=t.line;u>o;++o){var l=a.getLine(o),f=c.length;(p||n.test(l))&&(l.slice(0,f)!=c&&(f=e(l)),a.replaceRange(c+h+d,r(o,0),r(o,f)))}}else for(var o=t.line;u>o;++o)(p||n.test(a.getLine(o)))&&a.replaceRange(h+d,r(o,0))})}}),t.defineExtension("blockComment",function(t,e,o){o||(o=i);var s=this,a=s.getModeAt(t),l=o.blockCommentStart||a.blockCommentStart,h=o.blockCommentEnd||a.blockCommentEnd;if(!l||!h)return(o.lineComment||a.lineComment)&&0!=o.fullLines&&s.lineComment(t,e,o),void 0;var c=Math.min(e.line,s.lastLine());c!=t.line&&0==e.ch&&n.test(s.getLine(c))&&--c;var u=null==o.padding?" ":o.padding;t.line>c||s.operation(function(){if(0!=o.fullLines){var i=n.test(s.getLine(c));s.replaceRange(u+h,r(c)),s.replaceRange(l+u,r(t.line,0));var d=o.blockCommentLead||a.blockCommentLead;if(null!=d)for(var p=t.line+1;c>=p;++p)(p!=c||i)&&s.replaceRange(d+u,r(p,0))}else s.replaceRange(h,e),s.replaceRange(l,t)})}),t.defineExtension("uncomment",function(t,e,o){o||(o=i);var s,a=this,l=a.getModeAt(t),h=Math.min(0!=e.ch||e.line==t.line?e.line:e.line-1,a.lastLine()),c=Math.min(t.line,h),u=o.lineComment||l.lineComment,d=[],p=null==o.padding?" ":o.padding;t:if(u){for(var f=c;h>=f;++f){var g=a.getLine(f),m=g.indexOf(u);if(m>-1&&!/comment/.test(a.getTokenTypeAt(r(f,m+1)))&&(m=-1),-1==m&&(f!=h||f==c)&&n.test(g))break t;if(m>-1&&n.test(g.slice(0,m)))break t;d.push(g)}if(a.operation(function(){for(var t=c;h>=t;++t){var e=d[t-c],i=e.indexOf(u),n=i+u.length;0>i||(e.slice(n,n+p.length)==p&&(n+=p.length),s=!0,a.replaceRange("",r(t,i),r(t,n)))}}),s)return!0}var v=o.blockCommentStart||l.blockCommentStart,b=o.blockCommentEnd||l.blockCommentEnd;if(!v||!b)return!1;var y=o.blockCommentLead||l.blockCommentLead,x=a.getLine(c),w=h==c?x:a.getLine(h),k=x.indexOf(v),C=w.lastIndexOf(b);if(-1==C&&c!=h&&(w=a.getLine(--h),C=w.lastIndexOf(b)),-1==k||-1==C||!/comment/.test(a.getTokenTypeAt(r(c,k+1)))||!/comment/.test(a.getTokenTypeAt(r(h,C+1))))return!1;var _=x.lastIndexOf(v,t.ch),S=-1==_?-1:x.slice(0,t.ch).indexOf(b,_+v.length);if(-1!=_&&-1!=S&&S+b.length!=t.ch)return!1;S=w.indexOf(b,e.ch);var T=w.slice(e.ch).lastIndexOf(v,S-e.ch);return _=-1==S||-1==T?-1:e.ch+T,-1!=S&&-1!=_&&_!=e.ch?!1:(a.operation(function(){a.replaceRange("",r(h,C-(p&&w.slice(C-p.length,C)==p?p.length:0)),r(h,C+b.length));var t=k+v.length;if(p&&x.slice(t,t+p.length)==p&&(t+=p.length),a.replaceRange("",r(c,k),r(c,t)),y)for(var e=c+1;h>=e;++e){var i=a.getLine(e),o=i.indexOf(y);if(-1!=o&&!n.test(i.slice(0,o))){var s=o+y.length;p&&i.slice(s,s+p.length)==p&&(s+=p.length),a.replaceRange("",r(e,o),r(e,s))}}}),!0)})}),function(){function t(t,n,r,o){if(this.atOccurrence=!1,this.doc=t,null==o&&"string"==typeof n&&(o=!1),r=r?t.clipPos(r):i(0,0),this.pos={from:r,to:r},"string"!=typeof n)n.global||(n=new RegExp(n.source,n.ignoreCase?"ig":"g")),this.matches=function(e,r){if(e){n.lastIndex=0;for(var o,s,a=t.getLine(r.line).slice(0,r.ch),l=0;;){n.lastIndex=l;var h=n.exec(a);if(!h)break;if(o=h,s=o.index,l=o.index+(o[0].length||1),l==a.length)break}var c=o&&o[0].length||0;c||(0==s&&0==a.length?o=void 0:s!=t.getLine(r.line).length&&c++)}else{n.lastIndex=r.ch;var a=t.getLine(r.line),o=n.exec(a),c=o&&o[0].length||0,s=o&&o.index;s+c==a.length||c||(c=1)}return o&&c?{from:i(r.line,s),to:i(r.line,s+c),match:o}:void 0};else{var s=n;o&&(n=n.toLowerCase());var a=o?function(t){return t.toLowerCase()}:function(t){return t},l=n.split("\n");if(1==l.length)this.matches=n.length?function(r,o){if(r){var l=t.getLine(o.line).slice(0,o.ch),h=a(l),c=h.lastIndexOf(n);if(c>-1)return c=e(l,h,c),{from:i(o.line,c),to:i(o.line,c+s.length)}}else{var l=t.getLine(o.line).slice(o.ch),h=a(l),c=h.indexOf(n);if(c>-1)return c=e(l,h,c)+o.ch,{from:i(o.line,c),to:i(o.line,c+s.length)}}}:function(){};else{var h=s.split("\n");this.matches=function(e,n){var r=l.length-1;if(e){if(n.line-(l.length-1)<t.firstLine())return;if(a(t.getLine(n.line).slice(0,h[r].length))!=l[l.length-1])return;for(var o=i(n.line,h[r].length),s=n.line-1,c=r-1;c>=1;--c,--s)if(l[c]!=a(t.getLine(s)))return;var u=t.getLine(s),d=u.length-h[0].length;if(a(u.slice(d))!=l[0])return;return{from:i(s,d),to:o}}if(!(n.line+(l.length-1)>t.lastLine())){var u=t.getLine(n.line),d=u.length-h[0].length;if(a(u.slice(d))==l[0]){for(var p=i(n.line,d),s=n.line+1,c=1;r>c;++c,++s)if(l[c]!=a(t.getLine(s)))return;if(t.getLine(s).slice(0,h[r].length)==l[r])return{from:p,to:i(s,h[r].length)}}}}}}}function e(t,e,i){if(t.length==e.length)return i;for(var n=Math.min(i,t.length);;){var r=t.slice(0,n).toLowerCase().length;if(i>r)++n;else{if(!(r>i))return n;--n}}}var i=CodeMirror.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){function e(t){var e=i(t,0);return n.pos={from:e,to:e},n.atOccurrence=!1,!1}for(var n=this,r=this.doc.clipPos(t?this.pos.from:this.pos.to);;){if(this.pos=this.matches(t,r))return this.atOccurrence=!0,this.pos.match||!0;if(t){if(!r.line)return e(0);r=i(r.line-1,this.doc.getLine(r.line-1).length)}else{var o=this.doc.lineCount();if(r.line==o-1)return e(o);r=i(r.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(t){if(this.atOccurrence){var e=CodeMirror.splitLines(t);this.doc.replaceRange(e,this.pos.from,this.pos.to),this.pos.to=i(this.pos.from.line+e.length-1,e[e.length-1].length+(1==e.length?this.pos.from.ch:0))}}},CodeMirror.defineExtension("getSearchCursor",function(e,i,n){return new t(this.doc,e,i,n)}),CodeMirror.defineDocExtension("getSearchCursor",function(e,i,n){return new t(this,e,i,n)})}(),// CodeMirror, copyright (c) by Marijn Haverbeke and others
function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t){return new RegExp("^(("+t.join(")|(")+"))\\b")}function i(t){return t.scopes[t.scopes.length-1]}var n=e(["and","or","not","is"]),r=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],o=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],s={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},a={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]},l=["settled_cash","accrued_interest","buying_power","equity_with_loan","total_positions_value","regt_equity","regt_margin","initial_margin_requirement","maintenance_margin_requirement","available_funds","excess_liquidity","cushion","day_trades_remaining","leverage","net_liquidation","net_leverage"],h=["capital_used","cash","pnl","portfolio_value","positions","positions_value","returns","start_date","starting_cash"],c=["amount","cost_basis","last_sale_price","sid"],u=["sid"],d=["order","order_percent","order_target","order_target_value","order_target_percent","order_value","get_open_orders","get_order","cancel_order"],p=["set_max_order_count","set_long_only","set_max_order_size","set_max_position_size","set_do_not_order_list"],f=["get_environment"],g=["schedule_function"],m=["symbols"],v=["set_symbol_lookup_date"],b=["set_slippage","set_commission"],y=["symbol","security_name","security_start_date","security_end_date"],x=["record"],w=["fetch_csv"],k=["get_datetime"],C=["get_fundamentals"],S=["log"],T=["account","portfolio"],M=["current","can_trade","is_stale","history","fetcher_assets"],D=["security_lists"],L=["error","info","warn","debug"],A=["FixedSlippage","VolumeShareSlippage"],P=["DollarVolumeUniverse"],I=["PerShare","PerTrade"],z=["set_benchmark"],H=[];"undefined"!=typeof quanto_data&&"undefined"!=typeof quanto_data.talib_info&&(H=_.keys(quanto_data.talib_info)),t.registerHelper("hintWords","python",r.concat(o)),t.defineMode("python",function(O,E){function W(t,e){if(t.sol()&&"py"==i(e).type){var n=i(e).offset;if(t.eatSpace()){var r=t.indentation();return r>n&&$(t,e,"py"),n>r&&B(t,e),null}var o=N(t,e);return n>0&&B(t,e)&&(o+=" "+Y),o}return N(t,e)}function N(t,e){if(t.eatSpace())return null;var i=t.peek();if("#"==i)return t.skipToEnd(),"comment";if(t.match(/^[0-9\.]/,!1)){var r=!1;if(t.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(r=!0),t.match(/^\d+\.\d*/)&&(r=!0),t.match(/^\.\d+/)&&(r=!0),r)return t.eat(/J/i),"number";var o=!1;if(t.match(/^0x[0-9a-f]+/i)&&(o=!0),t.match(/^0b[01]+/i)&&(o=!0),t.match(/^0o[0-7]+/i)&&(o=!0),t.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(t.eat(/J/i),o=!0),t.match(/^0(?![\dx])/i)&&(o=!0),o)return t.eat(/L/i),"sid("==t.string.substring(t.start-4,t.start)&&")"==t.peek()?"sid-value":"number"}if(t.match(J))return e.tokenize=R(t.current()),e.tokenize(t,e);if(t.match(q)||t.match(j))return null;if(t.match(X)||t.match(V)||t.match(n))return"operator";if(t.match(G))return null;if(t.match(te))return"keyword";if(t.match(ee))return"builtin";if(t.match(/^(self|cls)\b/))return"variable-2";if(t.match(ie))return"."==e.lastToken?"quanto-account":"variable";if(t.match(ne))return"."==e.lastToken?"quanto-portfolio":"variable";if(t.match(re))return"."==e.lastToken?"quanto-position":"variable";if(t.match(se))return"."==e.lastToken?"quanto-sidinfo":"variable";if(t.match(ae))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-symbol";if(t.match(le))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-lookupdate";if(t.match(oe))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-toplevel";if(t.match(he))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-order";if(t.match(ce))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-tradingcontrols";if(t.match(ue))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-environment";if(t.match(de))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-scheduler";if(t.match(pe))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-recordvars";if(t.match(fe))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-fetchcsv";if(t.match(ge))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-getdatetime";if(t.match(me))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-fundamentals";if(t.match(ve))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-log";if(t.match(be))return"."==e.lastToken||"("==t.peek()?"quanto-log-method":"variable";if(t.match(ye))return"."==e.lastToken||"("!=t.peek()?"variable":"quanto-toplevel";if(t.match(xe))return"."==e.lastToken||"("!=t.peek()?"quanto-context-method":"variable";if(t.match(we)){if(t.start-5<0)var s=0;else var s=t.start-5;return"data."==t.string.substring(s,t.start)&&"("==t.peek()?"quanto-data-method":"variable"}return t.match(ke)?"."==e.lastToken||"("!=t.peek()?"quanto-securitylist":"variable":t.match(Ce)?_.str.endsWith(t.string.substring(0,t.start),"slippage.")?"quanto-slippage":"variable":Me&&t.match(Me)?_.str.endsWith(t.string.substring(0,t.start),"ta.")?"quanto-talib":"variable":t.match(Se)?_.str.endsWith(t.string.substring(0,t.start),"universe.")?"quanto-universe":"variable":t.match(Te)?"."==e.lastToken||"("!=t.peek()?"variable":"quanto-benchmark":t.match(_e)?_.str.endsWith(t.string.substring(0,t.start),"commission.")?"quanto-commission":"variable":t.match(U)?"def"==e.lastToken||"class"==e.lastToken?"def":"variable":(t.next(),Y)}function R(t){function e(e,r){for(;!e.eol();)if(e.eatWhile(/[^'"\\]/),e.eat("\\")){if(e.next(),i&&e.eol())return n}else{if(e.match(t))return r.tokenize=W,n;e.eat(/['"]/)}if(i){if(E.singleLineStringErrors)return Y;r.tokenize=W}return n}for(;"rub".indexOf(t.charAt(0).toLowerCase())>=0;)t=t.substr(1);var i=1==t.length,n="string";return e.isString=!0,e}function $(t,e,n){var r=0,o=null;if("py"==n)for(;"py"!=i(e).type;)e.scopes.pop();r=i(e).offset+("py"==n?O.indentUnit:K),"py"==n||t.match(/^(\s|#.*)*$/,!1)||(o=t.column()+1),e.scopes.push({offset:r,type:n,align:o})}function B(t,e){for(var n=t.indentation();i(e).offset>n;){if("py"!=i(e).type)return!0;e.scopes.pop()}return i(e).offset!=n}function F(t,e){var n=e.tokenize(t,e),r=t.current();if("."===r)return"period";if("@"==r)return E.version&&3==parseInt(E.version,10)?t.match(U,!1)?"meta":"operator":t.match(U,!1)?"meta":Y;"variable"!=n&&"builtin"!=n||"meta"!=e.lastStyle||(n="meta"),("pass"==r||"return"==r)&&(e.dedent+=1),"lambda"==r&&(e.lambda=!0),":"!=r||e.lambda||"py"!=i(e).type||$(t,e,"py");var o=1==r.length?"[({".indexOf(r):-1;if(-1!=o&&$(t,e,"])}".slice(o,o+1)),o="])}".indexOf(r),-1!=o){if(i(e).type!=r)return Y;e.scopes.pop()}return e.dedent>0&&t.eol()&&"py"==i(e).type&&(e.scopes.length>1&&e.scopes.pop(),e.dedent-=1),n}var Y="error",G=E.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),X=E.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),j=E.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),q=E.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))");if(E.version&&3==parseInt(E.version,10))var V=E.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!@]"),U=E.identifiers||new RegExp("^[_A-Za-z-][_A-Za-z0-9-]*");else var V=E.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),U=E.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*");var K=E.hangingIndent||O.indentUnit,Z=r,Q=o;if(void 0!=E.extra_keywords&&(Z=Z.concat(E.extra_keywords)),void 0!=E.extra_builtins&&(Q=Q.concat(E.extra_builtins)),E.version&&3==parseInt(E.version,10)){Z=Z.concat(a.keywords),Q=Q.concat(a.builtins);var J=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{Z=Z.concat(s.keywords),Q=Q.concat(s.builtins);var J=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var te=e(Z),ee=e(Q),ie=e(l),ne=e(h),re=e(c),oe=e(b),se=e(y),ae=e(m),le=e(v),he=e(d),ce=e(p),ue=e(f),de=e(g),pe=e(x),fe=e(w),ge=e(k),me=e(C),ve=e(S),be=e(L),ye=e(u),xe=e(T),we=e(M),ke=e(D),Ce=e(A),_e=e(I),Se=e(P),Te=e(z);if(H&&H.length>0)var Me=e(H);var De={startState:function(t){return{tokenize:W,scopes:[{offset:t||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(t,e){var i=e.errorToken;i&&(e.errorToken=!1);var n=F(t,e);e.lastStyle=n;var r=t.current();return r&&n&&(e.lastToken=r),t.eol()&&e.lambda&&(e.lambda=!1),i?n+" "+Y:n},indent:function(e,n){if(e.tokenize!=W)return e.tokenize.isString?t.Pass:0;var r=i(e),o=n&&n.charAt(0)==r.type;return null!=r.align?r.align-(o?1:0):o&&e.scopes.length>1?e.scopes[e.scopes.length-2].offset:r.offset},lineComment:"#",fold:"indent",blockCommentStart:'"""',blockCommentEnd:'"""'};return De}),t.defineMIME("text/x-python","python");var O=function(t){return t.split(" ")};t.defineMIME("text/x-cython",{name:"python",extra_keywords:O("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})});var Markdown;Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function t(t){return t}function e(){return!1}function i(){}function n(){}i.prototype={chain:function(e,i){var n=this[e];if(!n)throw new Error("unknown hook "+e);this[e]=n===t?i:function(t){return i(n(t))}},set:function(t,e){if(!this[t])throw new Error("unknown hook "+t);this[t]=e},addNoop:function(e){this[e]=t},addFalse:function(t){this[t]=e}},Markdown.HookCollection=i,n.prototype={set:function(t,e){this["s_"+t]=e},get:function(t){return this["s_"+t]}},Markdown.Converter=function(){function t(t){return t=t.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(t,e,i,n,r,o){return e=e.toLowerCase(),z.set(e,C(i)),r?n:(o&&H.set(e,o.replace(/"/g,"&quot;")),"")})}function e(t){return t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,r),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,r),t=t.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r),t=t.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,r),t=t.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r)}function r(t,e){var i=e;return i=i.replace(/^\n+/,""),i=i.replace(/\n+$/g,""),i="\n\n~K"+(O.push(i)-1)+"K\n\n"}function o(t,i){t=p(t);var n="<hr />\n";return t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,n),t=t.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,n),t=t.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,n),t=f(t),t=m(t),t=w(t),t=e(t),t=k(t,i)}function s(t){return t=b(t),t=a(t),t=_(t),t=c(t),t=l(t),t=S(t),t=t.replace(/~P/g,"://"),t=C(t),t=x(t),t=t.replace(/  +\n/g," <br>\n")}function a(t){var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=A(e,"!"==t.charAt(1)?"\\`*_/":"\\`*_")})}function l(t){return t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,h),t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,h),t=t.replace(/(\[([^\[\]]+)\])()()()()()/g,h)}function h(t,e,i,n,r,o,s,a){void 0==a&&(a="");var l=e,h=i.replace(/:\/\//g,"~P"),c=n.toLowerCase(),d=r,p=a;if(""==d)if(""==c&&(c=h.toLowerCase().replace(/ ?\n/g," ")),d="#"+c,void 0!=z.get(c))d=z.get(c),void 0!=H.get(c)&&(p=H.get(c));else{if(!(l.search(/\(\s*\)$/m)>-1))return l;d=""}d=L(d),d=A(d,"*_");var f='<a href="'+d+'"';return""!=p&&(p=u(p),p=A(p,"*_"),f+=' title="'+p+'"'),f+=">"+h+"</a>"}function c(t){return t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,d),t=t.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,d)}function u(t){return t.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function d(t,e,i,n,r,o,s,a){var l=e,h=i,c=n.toLowerCase(),d=r,p=a;if(p||(p=""),""==d){if(""==c&&(c=h.toLowerCase().replace(/ ?\n/g," ")),d="#"+c,void 0==z.get(c))return l;d=z.get(c),void 0!=H.get(c)&&(p=H.get(c))}h=A(u(h),"*_[]()"),d=A(d,"*_");var f='<img src="'+d+'" alt="'+h+'"';return p=u(p),p=A(p,"*_"),f+=' title="'+p+'"',f+=" />"}function p(t){return t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,e){return"<h1>"+s(e)+"</h1>\n\n"}),t=t.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(t,e){return"<h2>"+s(e)+"</h2>\n\n"}),t=t.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(t,e,i){var n=e.length;return"<h"+n+">"+s(i)+"</h"+n+">\n\n"})}function f(t){t+="~0";var e=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return E?t=t.replace(e,function(t,e,i){var n=e,r=i.search(/[*+-]/g)>-1?"ul":"ol",o=g(n,r);return o=o.replace(/\s+$/,""),o="<"+r+">"+o+"</"+r+">\n"}):(e=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(e,function(t,e,i,n){var r=e,o=i,s=n.search(/[*+-]/g)>-1?"ul":"ol",a=g(o,s);return a=r+"<"+s+">\n"+a+"</"+s+">\n"})),t=t.replace(/~0/,"")}function g(t,e){E++,t=t.replace(/\n{2,}$/,"\n"),t+="~0";var i=W[e],n=new RegExp("(^[ \\t]*)("+i+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+i+")[ \\t]+))","gm"),r=!1;return t=t.replace(n,function(t,e,i,n){var a=n,l=/\n\n$/.test(a),h=l||a.search(/\n{2,}/)>-1;return h||r?a=o(M(a),!0):(a=f(M(a)),a=a.replace(/\n$/,""),a=s(a)),r=l,"<li>"+a+"</li>\n"}),t=t.replace(/~0/g,""),E--,t}function m(t){return t+="~0",t=t.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,e,i){var n=e,r=i;return n=y(M(n)),n=D(n),n=n.replace(/^\n+/g,""),n=n.replace(/\n+$/g,""),n='<pre class="prettyprint"><code>'+n+"\n</code></pre>","\n\n"+n+"\n\n"+r}),t=t.replace(/~0/,"")}function v(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(O.push(t)-1)+"K\n\n"}function b(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,i,n){var r=n;return r=r.replace(/^([ \t]*)/g,""),r=r.replace(/[ \t]*$/g,""),r=y(r),r=r.replace(/:\/\//g,"~P"),e+"<code>"+r+"</code>"})}function y(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=A(t,"*_{}[]\\",!1)}function x(t){return t=t.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4"),t=t.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4")}function w(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,e){var i=e;return i=i.replace(/^[ \t]*>[ \t]?/gm,"~0"),i=i.replace(/~0/g,""),i=i.replace(/^[ \t]+$/gm,""),i=o(i),i=i.replace(/(^|\n)/g,"$1  "),i=i.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var i=e;return i=i.replace(/^  /gm,"~0"),i=i.replace(/~0/g,"")}),v("<blockquote>\n"+i+"\n</blockquote>")})}function k(t,e){t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var i=t.split(/\n{2,}/g),n=[],r=/~K(\d+)K/,o=i.length,a=0;o>a;a++){var l=i[a];r.test(l)?n.push(l):/\S/.test(l)&&(l=s(l),l=l.replace(/^([ \t]*)/g,"<p>"),l+="</p>",n.push(l))}if(!e){o=n.length;for(var a=0;o>a;a++)for(var h=!0;h;)h=!1,n[a]=n[a].replace(/~K(\d+)K/g,function(t,e){return h=!0,O[e]})}return n.join("\n\n")}function C(t){return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t=t.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}function _(t){return t=t.replace(/\\(\\)/g,P),t=t.replace(/\\([`*_{}\[\]()>#+-.!])/g,P)}function S(t){t=t.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4");var e=function(t,e){return'<a href="'+e+'">'+I.plainLinkText(e)+"</a>"};t=t.replace(/<((https?|ftp):[^'">\s]+)>/gi,e);var i=function(t,e){var i,n,r="mailto:";return e.substring(0,r.length)!=r?(i=r+e,n=e):(i=e,n=e.substring(r.length,e.length)),'<a href="'+i+'">'+I.plainLinkText(n)+"</a>"};return t=t.replace(/<((?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+))>/gi,i)}function T(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var i=parseInt(e);return String.fromCharCode(i)})}function M(t){return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t=t.replace(/~0/g,"")}function D(t){if(!/\t/.test(t))return t;var e,i=["    ","   ","  "," "],n=0;return t.replace(/[\n\t]/g,function(t,r){return"\n"===t?(n=r+1,t):(e=(r-n)%4,n=r+1,i[e])})}function L(t){if(!t)return"";var e=t.length;return t.replace(N,function(i,n){if("~D"==i)return"%24";if(":"==i){if(n==e-1||/[0-9\/]/.test(t.charAt(n+1)))return":";if("mailto:"===t.substring(0,"mailto:".length))return":";if("magnet:"===t.substring(0,"magnet:".length))return":"}return"%"+i.charCodeAt(0).toString(16)})}function A(t,e,i){var n="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(n="\\\\"+n);var r=new RegExp(n,"g");return t=t.replace(r,P)}function P(t,e){var i=e.charCodeAt(0);return"~E"+i+"E"}var I=this.hooks=new i;I.addNoop("plainLinkText"),I.addNoop("preConversion"),I.addNoop("postConversion");var z,H,O,E;this.makeHtml=function(i){if(z)throw new Error("Recursive call to converter.makeHtml");return z=new n,H=new n,O=[],E=0,i=I.preConversion(i),i=i.replace(/~/g,"~T"),i=i.replace(/\$/g,"~D"),i=i.replace(/\r\n/g,"\n"),i=i.replace(/\r/g,"\n"),i="\n\n"+i+"\n\n",i=D(i),i=i.replace(/^[ \t]+$/gm,""),i=e(i),i=t(i),i=o(i),i=T(i),i=i.replace(/~D/g,"$$"),i=i.replace(/~T/g,"~"),i=I.postConversion(i),O=H=z=null,i};var W={ol:"\\d+[.]",ul:"[*+-]"},N=/(?:["'*()[\]:]|~D)/g}}(),function(){function t(){}function e(t){this.buttonBar=u.getElementById("wmd-button-bar"+t),this.preview=u.getElementById("wmd-preview"+t),this.input=u.getElementById("wmd-input"+t)}function i(t,e){var i,r,o,s=this,a=[],h=0,c="none",u=function(t,e){c!=t&&(c=t,e||p()),g.isIE&&"moving"==c?o=null:r=setTimeout(d,1)},d=function(t){o=new n(e,t),r=void 0};this.setCommandMode=function(){c="command",p(),r=setTimeout(d,0)},this.canUndo=function(){return h>1},this.canRedo=function(){return a[h+1]?!0:!1},this.undo=function(){s.canUndo()&&(i?(i.restore(),i=null):(a[h]=new n(e),a[--h].restore(),t&&t())),c="none",e.input.focus(),d()},this.redo=function(){s.canRedo()&&(a[++h].restore(),t&&t()),c="none",e.input.focus(),d()};var p=function(){var r=o||new n(e);return r?"moving"==c?(i||(i=r),void 0):(i&&(a[h-1].text!=i.text&&(a[h++]=i),i=null),a[h++]=r,a[h+1]=null,t&&t(),void 0):!1},f=function(t){var e=!1;if(t.ctrlKey||t.metaKey){var i=t.charCode||t.keyCode,n=String.fromCharCode(i);switch(n){case"y":s.redo(),e=!0;break;case"z":t.shiftKey?s.redo():s.undo(),e=!0}}return e?(t.preventDefault&&t.preventDefault(),window.event&&(window.event.returnValue=!1),void 0):void 0},m=function(t){if(!t.ctrlKey&&!t.metaKey){var e=t.keyCode;e>=33&&40>=e||e>=63232&&63235>=e?u("moving"):8==e||46==e||127==e?u("deleting"):13==e?u("newlines"):27==e?u("escape"):(16>e||e>20)&&91!=e&&u("typing")}},v=function(){l.addEvent(e.input,"keypress",function(t){!t.ctrlKey&&!t.metaKey||89!=t.keyCode&&90!=t.keyCode||t.preventDefault()});var t=function(){(g.isIE||o&&o.text!=e.input.value)&&void 0==r&&(c="paste",p(),d())};l.addEvent(e.input,"keydown",f),l.addEvent(e.input,"keydown",m),l.addEvent(e.input,"mousedown",function(){u("moving")}),e.input.onpaste=t,e.input.ondrop=t},b=function(){v(),d(!0),p()};b()}function n(e,i){var n=this,r=e.input;this.init=function(){l.isVisible(r)&&(i||!u.activeElement||u.activeElement===r)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=r.scrollTop,(!this.text&&r.selectionStart||0===r.selectionStart)&&(this.text=r.value))},this.setInputAreaSelection=function(){if(l.isVisible(r))if(void 0===r.selectionStart||g.isOpera){if(u.selection){if(u.activeElement&&u.activeElement!==r)return;r.focus();var t=r.createTextRange();t.moveStart("character",-r.value.length),t.moveEnd("character",-r.value.length),t.moveEnd("character",n.end),t.moveStart("character",n.start),t.select()}}else r.focus(),r.selectionStart=n.start,r.selectionEnd=n.end,r.scrollTop=n.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(e.ieCachedRange||!r.selectionStart&&0!==r.selectionStart){if(u.selection){n.text=l.fixEolChars(r.value);var t=e.ieCachedRange||u.selection.createRange(),i=l.fixEolChars(t.text),o="",s=o+i+o;t.text=s;var a=l.fixEolChars(r.value);t.moveStart("character",-s.length),t.text=i,n.start=a.indexOf(o),n.end=a.lastIndexOf(o)-o.length;var h=n.text.length-l.fixEolChars(r.value).length;if(h){for(t.moveStart("character",-i.length);h--;)i+="\n",n.end+=1;t.text=i}e.ieCachedRange&&(n.scrollTop=e.ieCachedScrollTop),e.ieCachedRange=null,this.setInputAreaSelection()}}else n.start=r.selectionStart,n.end=r.selectionEnd},this.restore=function(){void 0!=n.text&&n.text!=r.value&&(r.value=n.text),this.setInputAreaSelection(),r.scrollTop=n.scrollTop},this.getChunks=function(){var e=new t;return e.before=l.fixEolChars(n.text.substring(0,n.start)),e.startTag="",e.selection=l.fixEolChars(n.text.substring(n.start,n.end)),e.endTag="",e.after=l.fixEolChars(n.text.substring(n.end)),e.scrollTop=n.scrollTop,e},this.setChunks=function(t){t.before=t.before+t.startTag,t.after=t.endTag+t.after,this.start=t.before.length,this.end=t.before.length+t.selection.length,this.text=t.before+t.selection+t.after,this.scrollTop=t.scrollTop},this.init()}function r(t,e,i){var n,r,o,s=3e3,a="delayed",c=function(t,e){l.addEvent(t,"input",e),t.onpaste=e,t.ondrop=e,l.addEvent(t,"keypress",e),l.addEvent(t,"keydown",e)},d=function(){var t=0;return window.innerHeight?t=window.pageYOffset:u.documentElement&&u.documentElement.scrollTop?t=u.documentElement.scrollTop:u.body&&(t=u.body.scrollTop),t},p=function(){if(e.preview){var i=e.input.value;if(!i||i!=o){o=i;var n=(new Date).getTime();i=t.makeHtml(i);var s=(new Date).getTime();r=s-n,C(i)}}},f=function(){if(n&&(clearTimeout(n),n=void 0),"manual"!==a){var t=0;"delayed"===a&&(t=r),t>s&&(t=s),n=setTimeout(p,t)}},m=function(t){return t.scrollHeight<=t.clientHeight?1:t.scrollTop/(t.scrollHeight-t.clientHeight)},v=function(){e.preview&&(e.preview.scrollTop=(e.preview.scrollHeight-e.preview.clientHeight)*m(e.preview))};this.refresh=function(t){t?(o="",p()):f()},this.processingTime=function(){return r};var b,y=!0,x=function(t){var i=e.preview,n=i.parentNode,r=i.nextSibling;n.removeChild(i),i.innerHTML=t,r?n.insertBefore(i,r):n.appendChild(i)},w=function(t){e.preview.innerHTML=t},k=function(t){if(b)return b(t);try{w(t),b=w}catch(e){b=x,b(t)}},C=function(t){var n=h.getTop(e.input)-d();if(e.preview&&(k(t),i()),v(),y)return y=!1,void 0;var r=h.getTop(e.input)-d();g.isIE?setTimeout(function(){window.scrollBy(0,r-n)},0):window.scrollBy(0,r-n)},_=function(){c(e.input,f),p(),e.preview&&(e.preview.scrollTop=0)};_()}function o(t,e,i,r,o){function s(t){if(d.focus(),t.textOp){i&&i.setCommandMode();var o=new n(e);if(!o)return;var s=o.getChunks(),a=function(){d.focus(),s&&o.setChunks(s),o.restore(),r.refresh()},l=t.textOp(s,a);l||a()}t.execute&&t.execute(i)}function a(t,e){e?(t.disabled=!1,t.isHelp||(t.onclick=function(){return this.onmouseout&&this.onmouseout(),s(this),!1})):t.disabled=!0}function h(t){return"string"==typeof t&&(t=o[t]),function(){t.apply(o,arguments)}}function c(e){var i=e.buttonBar,n=document.createElement("div");n.id="wmd-button-row"+t,n.className="btn-toolbar",n=i.appendChild(n);var r=function(e,i,r){var o=document.createElement("button");return o.className="btn "+e,o.id=e+t,i&&(o.textOp=i),a(o,!0),r?r.appendChild(o):n.appendChild(o),o},o=function(e){var i=document.createElement("div");return i.className="btn-group wmd-button-group"+e,i.id="wmd-button-group"+e+t,n.appendChild(i),i};group1=o(1),p.bold=r("wmd-bold-button",h("doBold"),group1),p.italic=r("wmd-italic-button",h("doItalic"),group1),group2=o(2),p.link=r("wmd-link-button",h(function(t,e){return this.doLinkOrImage(t,e,!1)}),group2),p.code=r("wmd-code-button",h("doCode"),group2),p.quote=r("wmd-quote-button",h("doBlockquote"),group2),group3=o(3),p.olist=r("wmd-olist-button",h(function(t,e){this.doList(t,e,!0)}),group3),p.ulist=r("wmd-ulist-button",h(function(t,e){this.doList(t,e,!1)}),group3),group4=o(4),p.undo=r("wmd-undo-button",null,group4),p.undo.execute=function(t){t&&t.undo()},p.redo=r("wmd-redo-button",null,group4),p.redo.execute=function(t){t&&t.redo()},group5=o("-add-backtest"),$(e.buttonBar).find(".wmd-button-group-add-backtest").append('<div class="dropdown quanto-dropdown"><button class="dropdown-toggle btn btn-default attach-button" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span class="quanto-icon attachment-icon"><span class="attach-label">Attach</span></span></button><ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1"><li><a class="attach-backtest" href="#"></span>Backtest</a></li><li><a class="attach-notebook" href="#"></span>Notebook</a></li></ul></div>'),$(document).on("click",".attach-notebook",function(){return $(document).trigger("insert_notebook_in_reply"),!1}),$(document).on("click",".attach-backtest",function(){return $(document).trigger("insert_backtest_in_reply"),!1}),u()}function u(){i&&(a(p.undo,i.canUndo()),a(p.redo,i.canRedo()))}var d=e.input,p={};c(e);var f="keydown";g.isOpera&&(f="keypress"),l.addEvent(d,f,function(t){if((t.ctrlKey||t.metaKey)&&!t.altKey&&!t.shiftKey){var e=t.charCode||t.keyCode,i=String.fromCharCode(e).toLowerCase();switch(i){case"b":s(p.bold);break;case"i":s(p.italic);break;case"l":s(p.link);break;case"q":s(p.quote);break;case"k":s(p.code);break;case"o":s(p.olist);break;case"u":s(p.ulist);break;case"y":s(p.redo);break;case"z":t.shiftKey?s(p.redo):s(p.undo);break;default:return}t.preventDefault&&t.preventDefault(),window.event&&(window.event.returnValue=!1)}}),l.addEvent(d,"keyup",function(t){if(t.shiftKey&&!t.ctrlKey&&!t.metaKey){var e=t.charCode||t.keyCode;if(13===e){var i={};i.textOp=h("doAutoindent"),s(i)}}}),g.isIE&&l.addEvent(d,"keydown",function(t){var e=t.keyCode;return 27===e?!1:void 0}),this.setUndoRedoButtonStates=u}function s(t){this.hooks=t}function a(t){return t.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(t,e,i){return e=e.replace(/\?.*$/,function(t){return t.replace(/\+/g," ")}),e=decodeURIComponent(e),e=encodeURI(e).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),e=e.replace(/\?.*$/,function(t){return t.replace(/\+/g,"%2b")}),i&&(i=i.trim?i.trim():i.replace(/^\s*/,"").replace(/\s*$/,""),i=$.trim(i).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),i?e+' "'+i+'"':e})}var l={},h={},c={},u=window.document,d=window.RegExp,p=window.navigator,f={lineLength:72},g={isIE:/msie/.test(p.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(p.userAgent.toLowerCase())||/msie 5/.test(p.userAgent.toLowerCase()),isOpera:/opera/.test(p.userAgent.toLowerCase())},m="",v='<p>http://example.com/images/diagram.jpg "optional title"</p>',b="http://",y="http://";Markdown.Editor=function(t,n,a){n=n||"";var l=this.hooks=new Markdown.HookCollection;l.addNoop("onPreviewRefresh"),l.addNoop("postBlockquoteCreation"),l.addFalse("insertImageDialog"),this.getConverter=function(){return t};var h,c=this;this.run=function(){if(!h){h=new e(n);var d,p,f=new s(l),g=new r(t,h,function(){l.onPreviewRefresh()});/\?noundo/.test(u.location.href)||(d=new i(function(){g.refresh(),p&&p.setUndoRedoButtonStates()},h),this.textOperation=function(t){d.setCommandMode(),t(),c.refreshPreview()}),p=new o(n,h,d,g,f,a),p.setUndoRedoButtonStates();var m=c.refreshPreview=function(){g.refresh(!0)};m()}}},t.prototype.findTags=function(t,e){var i,n=this;t&&(i=l.extendRegExp(t,"","$"),this.before=this.before.replace(i,function(t){return n.startTag=n.startTag+t,""}),i=l.extendRegExp(t,"^",""),this.selection=this.selection.replace(i,function(t){return n.startTag=n.startTag+t,""})),e&&(i=l.extendRegExp(e,"","$"),this.selection=this.selection.replace(i,function(t){return n.endTag=t+n.endTag,""}),i=l.extendRegExp(e,"^",""),this.after=this.after.replace(i,function(t){return n.endTag=t+n.endTag,""}))},t.prototype.trimWhitespace=function(t){var e,i,n=this;t?e=i="":(e=function(t){return n.before+=t,""},i=function(t){return n.after=t+n.after,""}),this.selection=this.selection.replace(/^(\s*)/,e).replace(/(\s*)$/,i)},t.prototype.skipLines=function(t,e,i){void 0===t&&(t=1),void 0===e&&(e=1),t++,e++;var n,r;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+d.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+d.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+d.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+d.$1,this.before){for(n=r="";t--;)n+="\\n?",r+="\n";i&&(n="\\n*"),this.before=this.before.replace(new d(n+"$",""),r)}if(this.after){for(n=r="";e--;)n+="\\n?",r+="\n";i&&(n="\\n*"),this.after=this.after.replace(new d(n,""),r)}},l.isVisible=function(t){return window.getComputedStyle?"none"!==window.getComputedStyle(t,null).getPropertyValue("display"):t.currentStyle?"none"!==t.currentStyle.display:void 0},l.addEvent=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i,!1)},l.removeEvent=function(t,e,i){t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener(e,i,!1)},l.fixEolChars=function(t){return t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n")},l.extendRegExp=function(t,e,i){(null===e||void 0===e)&&(e=""),(null===i||void 0===i)&&(i="");var n,r=t.toString();return r=r.replace(/\/([gim]*)$/,function(t,e){return n=e,""}),r=r.replace(/(^\/|\/$)/g,""),r=e+r+i,new d(r,n)},h.getTop=function(t,e){var i=t.offsetTop;if(!e)for(;t=t.offsetParent;)i+=t.offsetTop;return i},h.getHeight=function(t){return t.offsetHeight||t.scrollHeight},h.getWidth=function(t){return t.offsetWidth||t.scrollWidth},h.getPageSize=function(){var t,e,i,n;self.innerHeight&&self.scrollMaxY?(t=u.body.scrollWidth,e=self.innerHeight+self.scrollMaxY):u.body.scrollHeight>u.body.offsetHeight?(t=u.body.scrollWidth,e=u.body.scrollHeight):(t=u.body.offsetWidth,e=u.body.offsetHeight),self.innerHeight?(i=self.innerWidth,n=self.innerHeight):u.documentElement&&u.documentElement.clientHeight?(i=u.documentElement.clientWidth,n=u.documentElement.clientHeight):u.body&&(i=u.body.clientWidth,n=u.body.clientHeight);var r=Math.max(t,i),o=Math.max(e,n);return[r,o,i,n]},c.prompt=function(t,e,i,n){var r,o;void 0===i&&(i="");var s=function(t){var e=t.charCode||t.keyCode;27===e&&a(!0)},a=function(t){l.removeEvent(u.body,"keydown",s);var e=o.value;return t?e=null:(e=e.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(e)||(e="http://"+e)),$(r).modal("hide"),n(e),!1},h=function(){r=u.createElement("div"),r.className="fade modal linkmodal quanto-modal",dialog_container=u.createElement("div"),dialog_container.className="modal-dialog",r.appendChild(dialog_container),content_container=u.createElement("div"),content_container.className="modal-content",dialog_container.appendChild(content_container);var e=u.createElement("div");e.className="modal-header",e.innerHTML='<a class="close" data-dismiss="modal"></a>'+t,content_container.appendChild(e);var n=u.createElement("div");n.className="modal-body",content_container.appendChild(n);var h=u.createElement("form"),c=h.style;h.className="quanto-form",h.onsubmit=function(){return a(!1)},c.padding="0",c.margin="0",n.appendChild(h);var d=u.createElement("div");d.className="form-group",h.appendChild(d),o=u.createElement("input"),o.className=o.type="text",o.value=i,c=o.style,c.display="block",d.appendChild(o);var p=u.createElement("button");p.className="btn new-btn blue",p.type="button",p.onclick=function(){return a(!1)},p.innerHTML="Insert",d.appendChild(p),l.addEvent(u.body,"keydown",s),u.body.appendChild(r)};setTimeout(function(){h();var t=i.length;if(void 0!==o.selectionStart)o.selectionStart=0,o.selectionEnd=t;else if(o.createTextRange){var e=o.createTextRange();e.collapse(!1),e.moveStart("character",-t),e.moveEnd("character",t),e.select()}$(r).on("shown",function(){o.focus()}),$(r).on("hidden",function(){r.parentNode.removeChild(r)}),$(r).modal("show")},0)};var x=s.prototype;x.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",x.unwrap=function(t){var e=new d("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");
t.selection=t.selection.replace(e,"$1 $2")},x.wrap=function(t,e){this.unwrap(t);var i=new d("(.{1,"+e+"})( +|$\\n?)","gm"),n=this;t.selection=t.selection.replace(i,function(t,e){return new d("^"+n.prefixes,"").test(t)?t:e+"\n"}),t.selection=t.selection.replace(/\s+$/,"")},x.doBold=function(t,e){return this.doBorI(t,e,2,"strong text")},x.doItalic=function(t,e){return this.doBorI(t,e,1,"emphasized text")},x.doBorI=function(t,e,i,n){t.trimWhitespace(),t.selection=t.selection.replace(/\n{2,}/g,"\n");var r=/(\**$)/.exec(t.before)[0],o=/(^\**)/.exec(t.after)[0],s=Math.min(r.length,o.length);if(s>=i&&(2!=s||1!=i))t.before=t.before.replace(d("[*]{"+i+"}$",""),""),t.after=t.after.replace(d("^[*]{"+i+"}",""),"");else if(!t.selection&&o){t.after=t.after.replace(/^([*_]*)/,""),t.before=t.before.replace(/(\s?)$/,"");var a=d.$1;t.before=t.before+o+a}else{t.selection||o||(t.selection=n);var l=1>=i?"*":"**";t.before=t.before+l,t.after=l+t.after}},x.stripLinkDefs=function(t,e){return t=t.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(t,i,n,r,o){return e[i]=t.replace(/\s*$/,""),r?(e[i]=t.replace(/["(](.+?)[")]$/,""),r+o):""})},x.addLinkDef=function(t,e){var i=0,n={};t.before=this.stripLinkDefs(t.before,n),t.selection=this.stripLinkDefs(t.selection,n),t.after=this.stripLinkDefs(t.after,n);var r="",o=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,s=function(t){i++,t=t.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+i+"]:"),r+="\n"+t},a=function(t,e,r,l,h,c){return r=r.replace(o,a),n[h]?(s(n[h]),e+r+l+i+c):t};t.before=t.before.replace(o,a),e?s(e):t.selection=t.selection.replace(o,a);var l=i;return t.after=t.after.replace(o,a),t.after&&(t.after=t.after.replace(/\n*$/,"")),t.after||(t.selection=t.selection.replace(/\n*$/,"")),t.after+="\n\n"+r,l},x.doLinkOrImage=function(t,e,i){if(t.trimWhitespace(),t.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),!(t.endTag.length>1&&t.startTag.length>0)){if(t.selection=t.startTag+t.selection+t.endTag,t.startTag=t.endTag="",/\n\n/.test(t.selection))return this.addLinkDef(t,null),void 0;var n=this,r=function(r){if(null!==r){t.selection=(" "+t.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var o=" [999]: "+a(r),s=n.addLinkDef(t,o);t.startTag=i?"![":"[",t.endTag="]["+s+"]",t.selection||(t.selection=i?"enter image description here":"enter link description here")}e()};return i?this.hooks.insertImageDialog(r)||c.prompt("Insert Image",v,b,r):c.prompt("Insert Link",m,y,r),!0}t.startTag=t.startTag.replace(/!?\[/,""),t.endTag="",this.addLinkDef(t,null)},x.doAutoindent=function(t){var e=this,i=!1;t.before=t.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),t.selection||/^[ \t]*(?:\n|$)/.test(t.after)||(t.after=t.after.replace(/^[^\n]*/,function(e){return t.selection=e,""}),i=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(t.before)&&e.doList&&e.doList(t),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(t.before)&&e.doBlockquote&&e.doBlockquote(t),/(\n|^)(\t|[ ]{4,}).*\n$/.test(t.before)&&e.doCode&&e.doCode(t),i&&(t.after=t.selection+t.after,t.selection="")},x.doBlockquote=function(t){t.selection=t.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(e,i,n,r){return t.before+=i,t.after=r+t.after,n}),t.before=t.before.replace(/(>[ \t]*)$/,function(e,i){return t.selection=i+t.selection,""}),t.selection=t.selection.replace(/^(\s|>)+$/,""),t.selection=t.selection||"Blockquote";var e,i="",n="";if(t.before){for(var r=t.before.replace(/\n$/,"").split("\n"),o=!1,s=0;s<r.length;s++){var a=!1;e=r[s],o=o&&e.length>0,/^>/.test(e)?(a=!0,!o&&e.length>1&&(o=!0)):a=/^[ \t]*$/.test(e)?!0:o,a?i+=e+"\n":(n+=i+e,i="\n")}/(^|\n)>/.test(i)||(n+=i,i="")}t.startTag=i,t.before=n,t.after&&(t.after=t.after.replace(/^\n?/,"\n")),t.after=t.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(e){return t.endTag=e,""});var l=function(e){var i=e?"> ":"";t.startTag&&(t.startTag=t.startTag.replace(/\n((>|\s)*)\n$/,function(t,e){return"\n"+e.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"})),t.endTag&&(t.endTag=t.endTag.replace(/^\n((>|\s)*)\n/,function(t,e){return"\n"+e.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"}))};/^(?![ ]{0,3}>)/m.test(t.selection)?(this.wrap(t,f.lineLength-2),t.selection=t.selection.replace(/^/gm,"> "),l(!0),t.skipLines()):(t.selection=t.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(t),l(!1),!/^(\n|^)[ ]{0,3}>/.test(t.selection)&&t.startTag&&(t.startTag=t.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(t.selection)&&t.endTag&&(t.endTag=t.endTag.replace(/^\n{0,2}/,"\n\n"))),t.selection=this.hooks.postBlockquoteCreation(t.selection),/\n/.test(t.selection)||(t.selection=t.selection.replace(/^(> *)/,function(e,i){return t.startTag+=i,""}))},x.doCode=function(t){/\S[ ]*$/.test(t.before),/^[ ]*\S/.test(t.after),_.str.endsWith(t.before,"```\n")||(t.before+="```\n"),0!=t.after.indexOf("\n```")&&(t.after="\n```"+t.after)},x.doList=function(t,e,i){var n=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,r=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,o="-",s=1,a=function(){var t;return i?(t=" "+s+". ",s++):t=" "+o+" ",t},l=function(t){return void 0===i&&(i=/^\s*\d/.test(t)),t=t.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return a()})};if(t.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!t.before||/\n$/.test(t.before)||/^\n/.test(t.startTag)||(t.before+=t.startTag,t.startTag=""),t.startTag){var h=/\d+[.]/.test(t.startTag);if(t.startTag="",t.selection=t.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(t),t.skipLines(),h&&(t.after=t.after.replace(r,l)),i==h)return}var c=1;t.before=t.before.replace(n,function(t){return/^\s*([*+-])/.test(t)&&(o=d.$1),c=/[^\n]\n\n[^\n]/.test(t)?1:0,l(t)});var u=a(),p=1;t.after=t.after.replace(r,function(t){return p=/[^\n]\n\n[^\n]/.test(t)?1:0,l(t)}),t.trimWhitespace(!0),t.skipLines(c,p,!0),t.startTag=u;var g=u.replace(/./g," ");this.wrap(t,f.lineLength-g.length),t.selection=t.selection.replace(/\n/g,"\n"+g)},x.doHeading=function(t){if(t.selection=t.selection.replace(/\s+/g," "),t.selection=t.selection.replace(/(^\s+|\s+$)/g,""),!t.selection)return t.startTag="## ",t.selection="Heading",t.endTag=" ##",void 0;var e=0;t.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(t.startTag)&&(e=d.lastMatch.length),t.startTag=t.endTag="",t.findTags(null,/\s?(-+|=+)/),/=+/.test(t.endTag)&&(e=1),/-+/.test(t.endTag)&&(e=2),t.startTag=t.endTag="",t.skipLines(1,1);var i=0==e?2:e-1;if(i>0){var n=i>=2?"-":"=",r=t.selection.length;for(r>f.lineLength&&(r=f.lineLength),t.endTag="\n";r--;)t.endTag+=n}},x.doHorizontalRule=function(t){t.startTag="----------\n",t.selection="",t.skipLines(2,1,!0)}}(),function(){function t(t){return t.replace(/<[^>]*>?/gi,e)}function e(t){return t.match(o)||t.match(s)||t.match(a)||t.match(l)?t:"<div class='backtest-marker'>"==t?(window.match_start=!0,t):"undefined"!=typeof window.match_start&&window.match_start&&"</div>"==t?(this.match_start=!1,t):""}function i(t){if(""==t)return"";var e=/<\/?\w+[^>]*(\s|$|>)/g,i=t.toLowerCase().match(e),n=(i||[]).length;if(0==n)return t;for(var r,o,s,a="<p><img><br><li><hr>",l=[],h=[],c=!1,u=0;n>u;u++)if(r=i[u].replace(/<\/?(\w+).*/,"$1"),!(l[u]||a.search("<"+r+">")>-1)){if(o=i[u],s=-1,!/^<\//.test(o))for(var d=u+1;n>d;d++)if(!l[d]&&i[d]=="</"+r+">"){s=d;break}-1==s?c=h[u]=!0:l[s]=!0}if(!c)return t;var u=0;return t=t.replace(e,function(t){var e=h[u]?"":t;return u++,e})}var n,r;"object"==typeof exports&&"function"==typeof require?(n=exports,r=require("./Markdown.Converter").Converter):(n=window.Markdown,r=n.Converter),n.getSanitizingConverter=function(){var e=new r;return e.hooks.chain("postConversion",t),e.hooks.chain("postConversion",i),e};var o=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="(https?:(\/\/|\/)|ftp:(\/\/|\/)|mailto:|magnet:)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,a=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i,l=/^(<pre(\sclass="prettyprint linenums")?>|<\/pre>)$/i}(),/*!
 * jQuery UI Datepicker 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.bind("mouseout",function(t){var i=$(t.target).closest(e);i.length&&i.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(i){var n=$(i.target).closest(e);!$.datepicker._isDisabledDatepicker(instActive.inline?t.parent()[0]:instActive.input[0])&&n.length&&(n.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n.addClass("ui-state-hover"),n.hasClass("ui-datepicker-prev")&&n.addClass("ui-datepicker-prev-hover"),n.hasClass("ui-datepicker-next")&&n.addClass("ui-datepicker-next-hover"))})}function extendRemove(t,e){$.extend(t,e);for(var i in e)(null==e[i]||e[i]==undefined)&&(t[i]=e[i]);return t}function isArray(t){return t&&($.browser.safari&&"object"==typeof t&&t.length||t.constructor&&t.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,e){var i=t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(t,e){var i=$(t);e.append=$([]),e.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(t,i,n){e.settings[i]=n}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),this._autoSize(e),$.data(t,PROP_NAME,e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i=this._get(e,"appendText"),n=this._get(e,"isRTL");e.append&&e.append.remove(),i&&(e.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),t[n?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove();var r=this._get(e,"showOn");if(("focus"==r||"both"==r)&&t.focus(this._showDatepicker),"button"==r||"both"==r){var o=this._get(e,"buttonText"),s=this._get(e,"buttonImage");e.trigger=$(this._get(e,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:s,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==s?o:$("<img/>").attr({src:s,alt:o,title:o}))),t[n?"before":"after"](e.trigger),e.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==t[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(t[0])):$.datepicker._showDatepicker(t[0]),!1})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e=new Date(2009,11,20),i=this._get(t,"dateFormat");if(i.match(/[DM]/)){var n=function(t){for(var e=0,i=0,n=0;n<t.length;n++)t[n].length>e&&(e=t[n].length,i=n);return i};e.setMonth(n(this._get(t,i.match(/MM/)?"monthNames":"monthNamesShort"))),e.setDate(n(this._get(t,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}t.input.attr("size",this._formatDate(t,e).length)}},_inlineDatepicker:function(t,e){var i=$(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(t,i,n){e.settings[i]=n}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),$.data(t,PROP_NAME,e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,n,r){var o=this._dialogInst;if(!o){this.uuid+=1;var s="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+s+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},$.data(this._dialogInput[0],PROP_NAME,o)}if(extendRemove(o.settings,n||{}),e=e&&e.constructor==Date?this._formatDate(o,e):e,this._dialogInput.val(e),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+h,l/2-150+c]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,o),this},_destroyDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();$.removeData(t,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&e.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();if("input"==n)t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var r=e.children("."+this._inlineClass);r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e})}},_disableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();if("input"==n)t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var r=e.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var n=this._getInst(t);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?$.extend({},$.datepicker._defaults):n?"all"==e?$.extend({},n.settings):this._get(n,e):null;var r=e||{};if("string"==typeof e&&(r={},r[e]=i),n){this._curInst==n&&this._hideDatepicker();var o=this._getDateDatepicker(t,!0),s=this._getMinMaxDate(n,"min"),a=this._getMinMaxDate(n,"max");extendRemove(n.settings,r),null!==s&&r.dateFormat!==undefined&&r.minDate===undefined&&(n.settings.minDate=this._formatDate(n,s)),null!==a&&r.dateFormat!==undefined&&r.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,a)),this._attachments($(t),n),this._autoSize(n),this._setDate(n,o),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e=$.datepicker._getInst(t.target),i=!0,n=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,$.datepicker._datepickerShowing)switch(t.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var r=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",e.dpDiv);r[0]&&$.datepicker._selectDay(t.target,e.selectedMonth,e.selectedYear,r[0]);var o=$.datepicker._get(e,"onSelect");if(o){var s=$.datepicker._formatDate(e);o.apply(e.input?e.input[0]:null,[s,e])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.datepicker._clearDate(t.target),i=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.datepicker._gotoToday(t.target),i=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,n?1:-1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,-7,"D"),i=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,n?-1:1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,7,"D"),i=t.ctrlKey||t.metaKey;break;default:i=!1}else 36==t.keyCode&&t.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e=$.datepicker._getInst(t.target);if($.datepicker._get(e,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(e,"dateFormat")),n=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(t){var e=$.datepicker._getInst(t.target);if(e.input.val()!=e.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,$.datepicker._getFormatConfig(e));i&&($.datepicker._setDateFromField(e),$.datepicker._updateAlternate(e),$.datepicker._updateDatepicker(e))}catch(n){$.datepicker.log(n)}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!=t.nodeName.toLowerCase()&&(t=$("input",t.parentNode)[0]),!$.datepicker._isDisabledDatepicker(t)&&$.datepicker._lastInput!=t){var e=$.datepicker._getInst(t);$.datepicker._curInst&&$.datepicker._curInst!=e&&($.datepicker._curInst.dpDiv.stop(!0,!0),e&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(e,"beforeShow"),n=i?i.apply(t,[t,e]):{};if(n!==!1){extendRemove(e.settings,n),e.lastVal=null,$.datepicker._lastInput=t,$.datepicker._setDateFromField(e),$.datepicker._inDialog&&(t.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(t),$.datepicker._pos[1]+=t.offsetHeight);var r=!1;$(t).parents().each(function(){return r|="fixed"==$(this).css("position"),!r}),r&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var o={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(e),o=$.datepicker._checkOffset(e,o,r),e.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),!e.inline){$.datepicker._get(e,"showAnim"),$.datepicker._get(e,"duration");var s=function(){var t=e.dpDiv.find("iframe.ui-datepicker-cover");if(t.length){var i=$.datepicker._getBorders(e.dpDiv);t.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex($(t).zIndex()+1),$.datepicker._datepickerShowing=!0;var a=$.datepicker._get(e,"afterShow");"undefined"!=typeof a&&a.apply(t,[t,e]),e.dpDiv.css("display","block"),s(),e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus(),$.datepicker._curInst=e}}}},_updateDatepicker:function(t){var e=this;e.maxRows=4;var i=$.datepicker._getBorders(t.dpDiv);instActive=t,t.dpDiv.find(".ui-datepicker-header").remove(),t.dpDiv.find(".ui-datepicker-calendar").remove();var n=t.dpDiv.find(".quantopian-insert");n.length>0?"top"==n.data("position")?t.dpDiv.append(this._generateHTML(t)):t.dpDiv.prepend(this._generateHTML(t)):t.dpDiv.append(this._generateHTML(t)),this._attachHandlers(t);var r=t.dpDiv.find("iframe.ui-datepicker-cover");r.length&&r.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()}),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var o=this._getNumberOfMonths(t),s=o[1],a=17;if(t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",a*s+"em"),t.dpDiv[(1!=o[0]||1!=o[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.datepicker._curInst&&$.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus(),t.yearshtml){var l=t.yearshtml;setTimeout(function(){l===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),l=t.yearshtml=null},0)}},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(t,e,i){var n=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return e.left-=this._get(t,"isRTL")?n-o:0,e.left-=i&&e.left==t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top==t.input.offset().top+s?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+n>a&&a>n?Math.abs(e.left+n-a):0),e.top-=Math.min(e.top,e.top+r>l&&l>r?Math.abs(r+s):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"==t.type||1!=t.nodeType||$.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];var n=$(t).offset();return[n.left,n.top]},_hideDatepicker:function(t){var e=this._curInst;if(e&&(!t||e==$.data(t,PROP_NAME))&&this._datepickerShowing){var i=this._get(e,"showAnim"),n=this._get(e,"duration"),r=function(){$.datepicker._tidyDialog(e)};$.effects&&$.effects[i]?e.dpDiv.hide(i,$.datepicker._get(e,"showOptions"),n,r):e.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,r),e.dpDiv.css("display","none"),i||r(),this._datepickerShowing=!1;var o=this._get(e,"onClose");o&&o.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if($.datepicker._curInst){var e=$(t.target),i=$.datepicker._getInst(e[0]);(e[0].id!=$.datepicker._mainDivId&&0==e.parents("#"+$.datepicker._mainDivId).length&&!e.hasClass($.datepicker.markerClassName)&&!e.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||e.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var n=$(t),r=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(r,e+("M"==i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(t){var e=$(t),i=this._getInst(e[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(t,e,i){var n=$(t),r=this._getInst(n[0]);r["selected"+("M"==i?"Month":"Year")]=r["draw"+("M"==i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(n)},_selectDay:function(t,e,i,n){var r=$(t);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(r[0])){var o=this._getInst(r[0]);o.selectedDay=o.currentDay=$("a",n).html(),o.selectedMonth=o.currentMonth=e,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(t){var e=$(t);this._getInst(e[0]),this._selectDate(e,"")},_selectDate:function(t,e){var i=$(t),n=this._getInst(i[0]);e=null!=e?e:this._formatDate(n),n.input&&n.input.val(e),this._updateAlternate(n);var r=this._get(n,"onSelect");r?r.apply(n.input?n.input[0]:null,[e,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e=this._get(t,"altField");if(e){var i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),r=this.formatDate(i,n,this._getFormatConfig(t));$(e).each(function(){$(this).val(r)})}},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+4-(e.getDay()||7));var i=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((i-e)/864e5)/7)+1},parseDate:function(t,e,i){if(null==t||null==e)throw"Invalid arguments";if(e="object"==typeof e?e.toString():e+"",""==e)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,h=-1,c=-1,u=-1,d=!1,p=function(e){var i=b+1<t.length&&t.charAt(b+1)==e;return i&&b++,i},f=function(t){var i=p(t),n="@"==t?14:"!"==t?20:"y"==t&&i?4:"o"==t?3:2,r=new RegExp("^\\d{1,"+n+"}"),o=e.substring(v).match(r);if(!o)throw"Missing number at position "+v;return v+=o[0].length,parseInt(o[0],10)},g=function(t,i,n){var r=$.map(p(t)?n:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)}),o=-1;if($.each(r,function(t,i){var n=i[1];return e.substr(v,n.length).toLowerCase()==n.toLowerCase()?(o=i[0],v+=n.length,!1):void 0}),-1!=o)return o+1;throw"Unknown name at position "+v},m=function(){if(e.charAt(v)!=t.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;b<t.length;b++)if(d)"'"!=t.charAt(b)||p("'")?m():d=!1;else switch(t.charAt(b)){case"d":c=f("d");break;case"D":g("D",r,o);break;case"o":u=f("o");break;case"m":h=f("m");break;case"M":h=g("M",s,a);break;case"y":l=f("y");break;case"@":var y=new Date(f("@"));l=y.getFullYear(),h=y.getMonth()+1,c=y.getDate();break;case"!":var y=new Date((f("!")-this._ticksTo1970)/1e4);l=y.getFullYear(),h=y.getMonth()+1,c=y.getDate();break;case"'":p("'")?m():d=!0;break;default:m()}if(v<e.length)throw"Extra/unparsed characters found in date: "+e.substring(v);if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),u>-1)for(h=1,c=u;;){var x=this._getDaysInMonth(l,h-1);if(x>=c)break;h++,c-=x}var y=this._daylightSavingAdjust(new Date(l,h-1,c));if(y.getFullYear()!=l||y.getMonth()+1!=h||y.getDate()!=c)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,a=function(e){var i=d+1<t.length&&t.charAt(d+1)==e;return i&&d++,i},l=function(t,e,i){var n=""+e;if(a(t))for(;n.length<i;)n="0"+n;return n},h=function(t,e,i,n){return a(t)?n[e]:i[e]},c="",u=!1;if(e)for(var d=0;d<t.length;d++)if(u)"'"!=t.charAt(d)||a("'")?c+=t.charAt(d):u=!1;else switch(t.charAt(d)){case"d":c+=l("d",e.getDate(),2);break;case"D":c+=h("D",e.getDay(),n,r);break;case"o":c+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=l("m",e.getMonth()+1,2);break;case"M":c+=h("M",e.getMonth(),o,s);break;case"y":c+=a("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":u=!0;break;default:c+=t.charAt(d)}return c},_possibleChars:function(t){for(var e="",i=!1,n=function(e){var i=r+1<t.length&&t.charAt(r+1)==e;return i&&r++,i},r=0;r<t.length;r++)if(i)"'"!=t.charAt(r)||n("'")?e+=t.charAt(r):i=!1;else switch(t.charAt(r)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":n("'")?e+="'":i=!0;break;default:e+=t.charAt(r)}return e},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!=t.lastVal){var i,n,r=this._get(t,"dateFormat"),o=t.lastVal=t.input?t.input.val():null;i=n=this._getDefaultDate(t);var s=this._getFormatConfig(t);try{i=this.parseDate(r,o,s)||n}catch(a){this.log(a),o=e?"":o}t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear(),t.currentDay=o?i.getDate():0,t.currentMonth=o?i.getMonth():0,t.currentYear=o?i.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(t,e,i){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(e){try{return $.datepicker.parseDate($.datepicker._get(t,"dateFormat"),e,$.datepicker._getFormatConfig(t))}catch(i){}for(var n=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(t):null)||new Date,r=n.getFullYear(),o=n.getMonth(),s=n.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(e);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(r,o))}l=a.exec(e)}return new Date(r,o,s)},o=null==e||""===e?i:"string"==typeof e?r(e):"number"==typeof e?isNaN(e)?i:n(e):new Date(e.getTime());return o=o&&"Invalid Date"==o.toString()?i:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,r=t.selectedMonth,o=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),r==t.selectedMonth&&o==t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""==t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-e,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+e,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e=new Date;e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var i=this._get(t,"isRTL"),n=this._get(t,"showButtonPanel"),r=this._get(t,"hideIfNoPrevNext"),o=this._get(t,"navigationAsDateFormat"),s=this._getNumberOfMonths(t),a=this._get(t,"showCurrentAtPos"),l=this._get(t,"stepMonths"),h=1!=s[0]||1!=s[1],c=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(t,"min"),d=this._getMinMaxDate(t,"max"),p=t.drawMonth-a,f=t.drawYear;if(0>p&&(p+=12,f--),d){var g=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-s[0]*s[1]+1,d.getDate()));for(g=u&&u>g?u:g;this._daylightSavingAdjust(new Date(f,p,1))>g;)p--,0>p&&(p=11,f--)}t.drawMonth=p,t.drawYear=f;var m=this._get(t,"prevText");m=o?this.formatDate(m,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(t)):m;var v=this._canAdjustMonth(t,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><i class="icon icon-chevron-'+(i?"right":"left")+'">'+m+"</i></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><i class="icon icon-chevron-'+(i?"right":"left")+'">'+m+"</i></a>",b=this._get(t,"nextText");b=o?this.formatDate(b,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(t)):b;var y=this._canAdjustMonth(t,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+b+'"><i class="icon icon-chevron-'+(i?"left":"right")+'">'+b+"</i></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><i class="icon icon-chevron-'+(i?"left":"right")+'">'+b+"</i></a>",x=this._get(t,"currentText"),w=this._get(t,"gotoCurrent")&&t.currentDay?c:e;x=o?this.formatDate(x,w,this._getFormatConfig(t)):x;var k=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(t,"closeText")+"</button>",C=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?k:"")+(this._isInRange(t,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+x+"</button>":"")+(i?"":k)+"</div>":"",_=parseInt(this._get(t,"firstDay"),10);_=isNaN(_)?0:_;var S=this._get(t,"showWeek"),T=this._get(t,"dayNames");this._get(t,"dayNamesShort");var M=this._get(t,"dayNamesMin"),D=this._get(t,"monthNames"),L=this._get(t,"monthNamesShort"),A=this._get(t,"beforeShowDay"),P=this._get(t,"showOtherMonths"),I=this._get(t,"selectOtherMonths");this._get(t,"calculateWeek")||this.iso8601Week;for(var z=this._getDefaultDate(t),H="",O=0;O<s[0];O++){var E="";this.maxRows=4;for(var W=0;W<s[1];W++){var N=this._daylightSavingAdjust(new Date(f,p,t.selectedDay)),R=" ui-corner-all",B="";if(h){if(B+='<div class="ui-datepicker-group',s[1]>1)switch(W){case 0:B+=" ui-datepicker-group-first",R=" ui-corner-"+(i?"right":"left");break;case s[1]-1:B+=" ui-datepicker-group-last",R=" ui-corner-"+(i?"left":"right");break;default:B+=" ui-datepicker-group-middle",R=""}B+='">'}B+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&0==O?i?y:v:"")+(/all|right/.test(R)&&0==O?i?v:y:"")+this._generateMonthYearHeader(t,p,f,u,d,O>0||W>0,D,L)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var F=S?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",Y=0;7>Y;Y++){var G=(Y+_)%7;F+="<th"+((Y+_+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+T[G]+'">'+M[G]+"</span></th>"}B+=F+"</tr></thead><tbody>";var X=this._getDaysInMonth(f,p);f==t.selectedYear&&p==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,X));var j=(this._getFirstDayOfMonth(f,p)-_+7)%7,q=Math.ceil((j+X)/7),V=h?this.maxRows>q?this.maxRows:q:q;this.maxRows=V;for(var U=this._daylightSavingAdjust(new Date(f,p,1-j)),K=0;V>K;K++){B+="<tr>";for(var Z=S?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(U)+"</td>":"",Y=0;7>Y;Y++){var Q=A?A.apply(t.input?t.input[0]:null,[U]):[!0,""],J=U.getMonth()!=p,te=J&&!I||!Q[0]||u&&u>U||d&&U>d;Z+='<td class="'+((Y+_+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(U.getTime()==N.getTime()&&p==t.selectedMonth&&t._keyEvent||z.getTime()==U.getTime()&&z.getTime()==N.getTime()?" "+this._dayOverClass:"")+(te?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!P?"":" "+Q[1]+(U.getTime()==c.getTime()?" "+this._currentClass:"")+(U.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(J&&!P||!Q[2]?"":' title="'+Q[2]+'"')+(te?"":' data-handler="selectDay" data-event="click" data-month="'+U.getMonth()+'" data-year="'+U.getFullYear()+'"')+">"+(J&&!P?"&#xa0;":te?'<span class="ui-state-default">'+U.getDate()+"</span>":'<a class="ui-state-default'+(U.getTime()==e.getTime()?" ui-state-highlight":"")+(U.getTime()==c.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+U.getDate()+"</a>")+"</td>",U.setDate(U.getDate()+1),U=this._daylightSavingAdjust(U)
}B+=Z+"</tr>"}p++,p>11&&(p=0,f++),B+="</tbody></table>"+(h?"</div>"+(s[0]>0&&W==s[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),E+=B}H+=E}return H+=C+($.browser.msie&&parseInt($.browser.version,10)<7&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,H},_generateMonthYearHeader:function(t,e,i,n,r,o,s,a){var l=this._get(t,"changeMonth"),h=this._get(t,"changeYear"),c=this._get(t,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',d="";if(o||!l)d+='<span class="ui-datepicker-month">'+s[e]+"</span>";else{var p=n&&n.getFullYear()==i,f=r&&r.getFullYear()==i;d+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var g=0;12>g;g++)(!p||g>=n.getMonth())&&(!f||g<=r.getMonth())&&(d+='<option value="'+g+'"'+(g==e?' selected="selected"':"")+">"+a[g]+"</option>");d+="</select>"}if(c||(u+=d+(!o&&l&&h?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!h)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var m=this._get(t,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(t){var e=t.match(/c[+-].*/)?i+parseInt(t.substring(1),10):t.match(/[+-].*/)?v+parseInt(t,10):parseInt(t,10);return isNaN(e)?v:e},y=b(m[0]),x=Math.max(y,b(m[1]||""));for(y=n?Math.max(y,n.getFullYear()):y,x=r?Math.min(x,r.getFullYear()):x,t.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';x>=y;y++)t.yearshtml+='<option value="'+y+'"'+(y==i?' selected="selected"':"")+">"+y+"</option>";t.yearshtml+="</select>",u+=t.yearshtml,t.yearshtml=null}return u+=this._get(t,"yearSuffix"),c&&(u+=(!o&&l&&h?"":"&#xa0;")+d),u+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"==i?e:0),r=t.drawMonth+("M"==i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,r))+("D"==i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,r,o)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),r=i&&i>e?i:e;return r=n&&r>n?n:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var r=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(0>e?e:r[0]*r[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max");return(!i||e.getTime()>=i.getTime())&&(!n||e.getTime()<=n.getTime())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),$.fn.datepicker=function(t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!=t&&"getDate"!=t&&"widget"!=t?"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this].concat(e)):$.datepicker._attachDatepicker(this,t)}):$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(){function t(t,e,i){function n(e,i,n){if(e.text){var s=d?0:e.text.length-1,l=d?e.text.length:-1;if(e.text.length>a)return null;for(null!=n&&(s=n+p);s!=l;s+=p){var h=e.text.charAt(s);if(v.test(h)&&t.getTokenTypeAt(r(i,s+1))==g){var c=o[h];if(">"==c.charAt(1)==d)m.push(h);else{if(m.pop()!=c.charAt(0))return{pos:s,match:!1};if(!m.length)return{pos:s,match:!0}}}}}}var s=t.state.matchBrackets,a=s&&s.maxScanLineLength||1e4,l=e||t.getCursor(),h=t.getLineHandle(l.line),c=l.ch-1,u=c>=0&&o[h.text.charAt(c)]||o[h.text.charAt(++c)];if(!u)return null;var d=">"==u.charAt(1),p=d?1:-1;if(i&&d!=(c==l.ch))return null;for(var f,g=t.getTokenTypeAt(r(l.line,c+1)),m=[h.text.charAt(c)],v=/[(){}[\]]/,b=l.line,y=d?Math.min(b+100,t.lineCount()):Math.max(-1,b-100);b!=y&&!(f=b==l.line?n(h,b,c):n(t.getLineHandle(b),b));b+=p);return{from:r(l.line,c),to:f&&r(b,f.pos),match:f&&f.match,forward:d}}function e(e,i){var o=e.state.matchBrackets.maxHighlightLineLength||1e3,s=t(e);if(!(!s||e.getLine(s.from.line).length>o||s.to&&e.getLine(s.to.line).length>o)){var a=s.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",l=e.markText(s.from,r(s.from.line,s.from.ch+1),{className:a}),h=s.to&&e.markText(s.to,r(s.to.line,s.to.ch+1),{className:a});n&&e.state.focused&&e.display.input.focus();var c=function(){e.operation(function(){l.clear(),h&&h.clear()})};return i?(setTimeout(c,800),void 0):c}}function i(t){t.operation(function(){s&&(s(),s=null),t.somethingSelected()||(s=e(t,!1))})}var n=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),r=CodeMirror.Pos,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},s=null;CodeMirror.defineOption("matchBrackets",!1,function(t,e,n){n&&n!=CodeMirror.Init&&t.off("cursorActivity",i),e&&(t.state.matchBrackets="object"==typeof e?e:{},t.on("cursorActivity",i))}),CodeMirror.defineExtension("matchBrackets",function(){e(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(e,i){return t(this,e,i)})}(),/*!
 * bootstrap-select v1.5.1
 * http://silviomoreto.github.io/bootstrap-select/
 *
 * Copyright 2013 bootstrap-select
 * Licensed under the MIT license
 */
!function(t){"use strict";t.expr[":"].icontains=function(e,i,n){return t(e).text().toUpperCase().indexOf(n[3].toUpperCase())>=0};var e=function(i,n,r){r&&(r.stopPropagation(),r.preventDefault()),this.$element=t(i),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=t.extend({},t.fn.selectpicker.defaults,this.$element.data(),"object"==typeof n&&n),null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=e.prototype.val,this.render=e.prototype.render,this.refresh=e.prototype.refresh,this.setStyle=e.prototype.setStyle,this.selectAll=e.prototype.selectAll,this.deselectAll=e.prototype.deselectAll,this.init()};e.prototype={constructor:e,init:function(){var e=this,i=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),void 0!==i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this)},createDropdown:function(){var e=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",n=this.autofocus?" autofocus":"",r=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"",s=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">Select All</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">Deselect All</button></div></div>':"",a='<div class="btn-group bootstrap-select'+e+i+'">'+'<button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+n+">"+'<span class="filter-option pull-left"></span>&nbsp;'+'<span class="caret"></span>'+"</button>"+'<div class="dropdown-menu open">'+r+o+s+'<ul class="dropdown-menu inner selectpicker" role="menu">'+"</ul>"+"</div>"+"</div>";return t(a)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul").append(e),t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menu.find("ul").append(t)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var e=this,i=[],n="";return this.$element.find("option").each(function(){var n=t(this),r=n.attr("class")||"",o=n.attr("style")||"",s=n.data("content")?n.data("content"):n.html(),a=void 0!==n.data("subtext")?'<small class="muted text-muted">'+n.data("subtext")+"</small>":"",l=void 0!==n.data("icon")?'<i class="'+e.options.iconBase+" "+n.data("icon")+'"></i> ':"";if(""!==l&&(n.is(":disabled")||n.parent().is(":disabled"))&&(l="<span>"+l+"</span>"),n.data("content")||(s=l+'<span class="text">'+s+a+"</span>"),e.options.hideDisabled&&(n.is(":disabled")||n.parent().is(":disabled")))i.push('<a style="min-height: 0; padding: 0"></a>');else if(n.parent().is("optgroup")&&n.data("divider")!==!0)if(0===n.index()){var h=n.parent().attr("label"),c=void 0!==n.parent().data("subtext")?'<small class="muted text-muted">'+n.parent().data("subtext")+"</small>":"",u=n.parent().data("icon")?'<i class="'+n.parent().data("icon")+'"></i> ':"";h=u+'<span class="text">'+h+c+"</span>",0!==n[0].index?i.push('<div class="div-contain"><div class="divider"></div></div><dt>'+h+"</dt>"+e.createA(s,"opt "+r,o)):i.push("<dt>"+h+"</dt>"+e.createA(s,"opt "+r,o))}else i.push(e.createA(s,"opt "+r,o));else n.data("divider")===!0?i.push('<div class="div-contain"><div class="divider"></div></div>'):t(this).data("hidden")===!0?i.push(""):i.push(e.createA(s,r,o))}),t.each(i,function(t,e){n+="<li rel="+t+">"+e+"</li>"}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t(n)},createA:function(t,e,i){return'<a tabindex="0" class="'+e+'" style="'+i+'">'+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i>'+t+"</a>"},render:function(e){var i=this;e!==!1&&this.$element.find("option").each(function(e){i.setDisabled(e,t(this).is(":disabled")||t(this).parent().is(":disabled")),i.setSelected(e,t(this).is(":selected"))}),this.tabIndex();var n=this.$element.find("option:selected").map(function(){var e,n=t(this),r=n.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+n.data("icon")+'"></i> ':"";return e=i.options.showSubtext&&n.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+n.data("subtext")+"</small>":"",n.data("content")&&i.options.showContent?n.data("content"):void 0!==n.attr("title")?n.attr("title"):r+n.html()+e}).toArray(),r=this.multiple?n.join(this.options.multipleSeparator):n[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var o=this.options.selectedTextFormat.split(">"),s=this.options.hideDisabled?":not([disabled])":"";(o.length>1&&n.length>o[1]||1==o.length&&n.length>=2)&&(r=this.options.countSelectedText.replace("{0}",n.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+s).length))}this.options.title=this.$element.attr("title"),r||(r=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(r)),this.$newElement.find(".filter-option").html(r)},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi,""));var i=t?t:this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),e=t.addClass("open").find("> .dropdown-menu"),i=e.find("li > a").outerHeight(),n=this.options.header?e.find(".popover-title").outerHeight():0,r=this.options.liveSearch?e.find(".bootstrap-select-searchbox").outerHeight():0,o=this.options.actionsBox?e.find(".bs-actionsbox").outerHeight():0;t.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",r).data("actionsHeight",o)}},setSize:function(){var e,i,n,r=this,o=this.$menu,s=o.find(".inner"),a=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),h=this.$newElement.data("headerHeight"),c=this.$newElement.data("searchHeight"),u=this.$newElement.data("actionsHeight"),d=o.find("li .divider").outerHeight(!0),p=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"))+parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width")),f=this.options.hideDisabled?":not(.disabled)":"",g=t(window),m=p+parseInt(o.css("margin-top"))+parseInt(o.css("margin-bottom"))+2,v=function(){i=r.$newElement.offset().top-g.scrollTop(),n=g.height()-i-a};if(v(),this.options.header&&o.css("padding-top",0),"auto"==this.options.size){var b=function(){var t,a=r.$lis.not(".hide");v(),e=n-m,r.options.dropupAuto&&r.$newElement.toggleClass("dropup",i>n&&e-m<o.height()),r.$newElement.hasClass("dropup")&&(e=i-m),t=a.length+a.find("dt").length>3?3*l+m-2:0,o.css({"max-height":e+"px",overflow:"hidden","min-height":t+h+c+u+"px"}),s.css({"max-height":e-h-c-u-p+"px","overflow-y":"auto","min-height":Math.max(t-p,0)+"px"})};b(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",b),t(window).off("resize.getSize").on("resize.getSize",b),t(window).off("scroll.getSize").on("scroll.getSize",b)}else if(this.options.size&&"auto"!=this.options.size&&o.find("li"+f).length>this.options.size){var y=o.find("li"+f+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),x=o.find("li").slice(0,y+1).find(".div-contain").length;e=l*this.options.size+x*d+p,r.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>n&&e<o.height()),o.css({"max-height":e+h+c+u+"px",overflow:"hidden"}),s.css({"max-height":e-p+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var t=this.$newElement.clone().appendTo("body"),e=t.find("> .dropdown-menu").css("width");t.remove(),this.$newElement.css("width",e)}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var e,i,n=this,r="<div />",o=t(r),s=function(t){o.addClass(t.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,o.css({top:e.top+i,left:e.left,width:t[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){n.isDisabled()||(s(t(this)),o.appendTo(n.options.container),o.toggleClass("open",!t(this).hasClass("open")),o.append(n.$menu))}),t(window).resize(function(){s(n.$newElement)}),t(window).on("scroll",function(){s(n.$newElement)}),t("html").on("click",function(e){t(e.target).closest(n.$newElement).length<1&&o.removeClass("open")})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},setSelected:function(e,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),t(this.$lis[e]).toggleClass("selected",i)},setDisabled:function(e,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),i?t(this.$lis[e]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):t(this.$lis[e]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var t=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this;t("body").on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),this.$newElement.on("click",function(){e.setSize(),e.options.liveSearch||e.multiple||setTimeout(function(){e.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(i){var n=t(this).parent().index(),r=e.$element.val(),o=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!t(this).parent().hasClass("disabled")){var s=e.$element.find("option"),a=s.eq(n),l=a.prop("selected"),h=a.parent("optgroup"),c=e.options.maxOptions,u=h.data("maxOptions")||!1;if(e.multiple){if(a.prop("selected",!l),e.setSelected(n,!l),c!==!1||u!==!1){var d=c<s.filter(":selected").length,p=u<h.find("option:selected").length,f=e.options.maxOptionsText,g=f[0].replace("{n}",c),m=f[1].replace("{n}",u),v=t('<div class="notify"></div>');(c&&d||u&&p)&&(f[2]&&(g=g.replace("{var}",f[2][c>1?0:1]),m=m.replace("{var}",f[2][u>1?0:1])),a.prop("selected",!1),e.$menu.append(v),c&&d&&(v.append(t("<div>"+g+"</div>")),e.$element.trigger("maxReached.bs.select")),u&&p&&(v.append(t("<div>"+m+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(n,!1)},10),v.delay(750).fadeOut(300,function(){t(this).remove()}))}}else s.prop("selected",!1),a.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(n,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(r!=e.$element.val()&&e.multiple||o!=e.$element.prop("selectedIndex")&&!e.multiple)&&e.$element.change()}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(t){t.target==this&&(t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus())}),this.$menu.on("click",".popover-title .close",function(){e.$button.focus()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).is(".bs-select-all")?e.selectAll():e.deselectAll(),e.$element.change()}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var e=this,i=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){e.$menu.find(".active").removeClass("active"),e.$searchbox.val()&&(e.$searchbox.val(""),e.$menu.find("li").show(),i.parent().length&&i.remove()),e.multiple||e.$menu.find(".selected").addClass("active"),setTimeout(function(){e.$searchbox.focus()},10)}),this.$searchbox.on("input propertychange",function(){e.$searchbox.val()?(e.$lis.removeClass("hide").find("a").not(":icontains("+e.$searchbox.val()+")").parent().addClass("hide"),e.$menu.find("li").filter(":visible:not(.no-results)").length?i.parent().length&&i.remove():(i.parent().length&&i.remove(),i.html(e.options.noneResultsText+' "'+e.$searchbox.val()+'"').show(),e.$menu.find("li").last().after(i))):(e.$menu.find("li").removeClass("hide"),i.parent().length&&i.remove()),e.$menu.find("li.active").removeClass("active"),e.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),t(this).focus()}),this.$menu.on("mouseenter","a",function(i){e.$menu.find(".active").removeClass("active"),t(i.currentTarget).parent().not(".disabled").addClass("active")}),this.$menu.on("mouseleave","a",function(){e.$menu.find(".active").removeClass("active")})},val:function(t){return void 0!==t?(this.$element.val(t),this.$element.change(),this.$element):this.$element.val()},selectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!0),t(this.$lis).filter(":not(.disabled)").addClass("selected"),this.render(!1)},deselectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!1),t(this.$lis).filter(":not(.disabled)").removeClass("selected"),this.render(!1)},keydown:function(e){var i,n,r,o,s,a,l,h,c,u,d,p,f={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(i=t(this),r=i.parent(),i.is("input")&&(r=i.parent().parent()),u=r.data("this"),u.options.liveSearch&&(r=i.parent().parent()),u.options.container&&(r=u.$menu),n=t("[role=menu] li:not(.divider) a",r),p=u.$menu.parent().hasClass("open"),!p&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(u.setSize(),u.$menu.parent().addClass("open"),p=u.$menu.parent().hasClass("open"),u.$searchbox.focus()),u.options.liveSearch&&(/(^9$|27)/.test(e.keyCode)&&p&&0===u.$menu.find(".active").length&&(e.preventDefault(),u.$menu.parent().removeClass("open"),u.$button.focus()),n=t("[role=menu] li:not(.divider):visible",r),i.val()||/(38|40)/.test(e.keyCode)||0===n.filter(".active").length&&(n=u.$newElement.find("li").filter(":icontains("+f[e.keyCode]+")"))),n.length){if(/(38|40)/.test(e.keyCode))o=n.index(n.filter(":focus")),a=n.parent(":not(.disabled):visible").first().index(),l=n.parent(":not(.disabled):visible").last().index(),s=n.eq(o).parent().nextAll(":not(.disabled):visible").eq(0).index(),h=n.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),c=n.eq(s).parent().prevAll(":not(.disabled):visible").eq(0).index(),u.options.liveSearch&&(n.each(function(e){t(this).is(":not(.disabled)")&&t(this).data("index",e)}),o=n.index(n.filter(".active")),a=n.filter(":not(.disabled):visible").first().data("index"),l=n.filter(":not(.disabled):visible").last().data("index"),s=n.eq(o).nextAll(":not(.disabled):visible").eq(0).data("index"),h=n.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index"),c=n.eq(s).prevAll(":not(.disabled):visible").eq(0).data("index")),d=i.data("prevIndex"),38==e.keyCode&&(u.options.liveSearch&&(o-=1),o!=c&&o>h&&(o=h),a>o&&(o=a),o==d&&(o=l)),40==e.keyCode&&(u.options.liveSearch&&(o+=1),-1==o&&(o=0),o!=c&&s>o&&(o=s),o>l&&(o=l),o==d&&(o=a)),i.data("prevIndex",o),u.options.liveSearch?(e.preventDefault(),i.is(".dropdown-toggle")||(n.removeClass("active"),n.eq(o).addClass("active").find("a").focus(),i.focus())):n.eq(o).focus();else if(!i.is("input")){var g,m,v=[];n.each(function(){t(this).parent().is(":not(.disabled)")&&t.trim(t(this).text().toLowerCase()).substring(0,1)==f[e.keyCode]&&v.push(t(this).parent().index())}),g=t(document).data("keycount"),g++,t(document).data("keycount",g),m=t.trim(t(":focus").text().toLowerCase()).substring(0,1),m!=f[e.keyCode]?(g=1,t(document).data("keycount",g)):g>=v.length&&(t(document).data("keycount",0),g>v.length&&(g=1)),n.eq(v[g-1]).focus()}/(13|32|^9$)/.test(e.keyCode)&&p&&(/(32)/.test(e.keyCode)||e.preventDefault(),u.options.liveSearch?/(32)/.test(e.keyCode)||(u.$menu.find(".active a").click(),i.focus()):t(":focus").click(),t(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode)&&p&&(u.multiple||u.options.liveSearch)||/(27)/.test(e.keyCode)&&!p)&&(u.$menu.parent().removeClass("open"),u.$button.focus())}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove(),this.$element.remove()}},t.fn.selectpicker=function(i,n){var r,o=arguments,s=this.each(function(){if(t(this).is("select")){var s=t(this),a=s.data("selectpicker"),l="object"==typeof i&&i;if(a){if(l)for(var h in l)a.options[h]=l[h]}else s.data("selectpicker",a=new e(this,l,n));if("string"==typeof i){var c=i;a[c]instanceof Function?([].shift.apply(o),r=a[c].apply(a,o)):r=a.options[c]}}});return void 0!==r?r:s},t.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,multipleSeparator:", ",iconBase:"icon",tickIcon:"icon-ok",maxOptions:!1},t(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",e.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",function(t){t.stopPropagation()})}(window.jQuery),function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}t.prototype.diff_main=function(t,e,i,n){if("undefined"==typeof n&&(n=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==t||null==e)throw Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];"undefined"==typeof i&&(i=!0);var r=i,o=this.diff_commonPrefix(t,e);i=t.substring(0,o),t=t.substring(o),e=e.substring(o);var o=this.diff_commonSuffix(t,e),s=t.substring(t.length-o);return t=t.substring(0,t.length-o),e=e.substring(0,e.length-o),t=this.diff_compute_(t,e,r,n),i&&t.unshift([0,i]),s&&t.push([0,s]),this.diff_cleanupMerge(t),t},t.prototype.diff_compute_=function(t,e,i,n){if(!t)return[[1,e]];if(!e)return[[-1,t]];var r=t.length>e.length?t:e,o=t.length>e.length?e:t,s=r.indexOf(o);return-1!=s?(i=[[1,r.substring(0,s)],[0,o],[1,r.substring(s+o.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i):1==o.length?[[-1,t],[1,e]]:(r=this.diff_halfMatch_(t,e))?(o=r[0],t=r[1],s=r[2],e=r[3],r=r[4],o=this.diff_main(o,s,i,n),i=this.diff_main(t,e,i,n),o.concat([[0,r]],i)):i&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,n):this.diff_bisect_(t,e,n)},t.prototype.diff_lineMode_=function(t,e,i){var n=this.diff_linesToChars_(t,e);t=n.chars1,e=n.chars2,n=n.lineArray,t=this.diff_main(t,e,!1,i),this.diff_charsToLines_(t,n),this.diff_cleanupSemantic(t),t.push([0,""]);for(var r=n=e=0,o="",s="";e<t.length;){switch(t[e][0]){case 1:r++,s+=t[e][1];break;case-1:n++,o+=t[e][1];break;case 0:if(n>=1&&r>=1){for(t.splice(e-n-r,n+r),e=e-n-r,n=this.diff_main(o,s,!1,i),r=n.length-1;r>=0;r--)t.splice(e,0,n[r]);e+=n.length}n=r=0,s=o=""}e++}return t.pop(),t},t.prototype.diff_bisect_=function(t,e,i){for(var n=t.length,r=e.length,o=Math.ceil((n+r)/2),s=o,a=2*o,l=Array(a),h=Array(a),c=0;a>c;c++)l[c]=-1,h[c]=-1;l[s+1]=0,h[s+1]=0;for(var c=n-r,u=0!=c%2,d=0,p=0,f=0,g=0,m=0;o>m&&!((new Date).getTime()>i);m++){for(var v=-m+d;m-p>=v;v+=2){var b,y=s+v;b=v==-m||v!=m&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1;for(var x=b-v;n>b&&r>x&&t.charAt(b)==e.charAt(x);)b++,x++;if(l[y]=b,b>n)p+=2;else if(x>r)d+=2;else if(u&&(y=s+c-v,y>=0&&a>y&&-1!=h[y])){var w=n-h[y];if(b>=w)return this.diff_bisectSplit_(t,e,b,x,i)}}for(v=-m+f;m-g>=v;v+=2){for(y=s+v,w=v==-m||v!=m&&h[y-1]<h[y+1]?h[y+1]:h[y-1]+1,b=w-v;n>w&&r>b&&t.charAt(n-w-1)==e.charAt(r-b-1);)w++,b++;if(h[y]=w,w>n)g+=2;else if(b>r)f+=2;else if(!u&&(y=s+c-v,y>=0&&a>y&&-1!=l[y]&&(b=l[y],x=s+b-y,w=n-w,b>=w)))return this.diff_bisectSplit_(t,e,b,x,i)}}return[[-1,t],[1,e]]},t.prototype.diff_bisectSplit_=function(t,e,i,n,r){var o=t.substring(0,i),s=e.substring(0,n);return t=t.substring(i),e=e.substring(n),o=this.diff_main(o,s,!1,r),r=this.diff_main(t,e,!1,r),o.concat(r)},t.prototype.diff_linesToChars_=function(t,e){function i(t){for(var e="",i=0,o=-1,s=n.length;o<t.length-1;){o=t.indexOf("\n",i),-1==o&&(o=t.length-1);var a=t.substring(i,o+1),i=o+1;(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,n[s++]=a)}return e}var n=[],r={};n[0]="";var o=i(t),s=i(e);return{chars1:o,chars2:s,lineArray:n}},t.prototype.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i][1],r=[],o=0;o<n.length;o++)r[o]=e[n.charCodeAt(o)];t[i][1]=r.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,o=0;r>i;)t.substring(o,r)==e.substring(o,r)?o=i=r:n=r,r=Math.floor((n-i)/2+i);return r},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,o=0;r>i;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=i=r:n=r,r=Math.floor((n-i)/2+i);return r},t.prototype.diff_commonOverlap_=function(t,e){var i=t.length,n=e.length;if(0==i||0==n)return 0;if(i>n?t=t.substring(i-n):n>i&&(e=e.substring(0,i)),i=Math.min(i,n),t==e)return i;for(var n=0,r=1;;){var o=t.substring(i-r),o=e.indexOf(o);if(-1==o)return n;r+=o,(0==o||t.substring(i-r)==e.substring(0,r))&&(n=r,r++)}},t.prototype.diff_halfMatch_=function(t,e){function i(t,e,i){for(var n,r,o,a,l=t.substring(i,i+Math.floor(t.length/4)),h=-1,c="";-1!=(h=e.indexOf(l,h+1));){var u=s.diff_commonPrefix(t.substring(i),e.substring(h)),d=s.diff_commonSuffix(t.substring(0,i),e.substring(0,h));c.length<d+u&&(c=e.substring(h-d,h)+e.substring(h,h+u),n=t.substring(0,i-d),r=t.substring(i+u),o=e.substring(0,h-d),a=e.substring(h+u))}return 2*c.length>=t.length?[n,r,o,a,c]:null}if(0>=this.Diff_Timeout)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>n.length||2*r.length<n.length)return null;var o,s=this,a=i(n,r,Math.ceil(n.length/4)),n=i(n,r,Math.ceil(n.length/2));if(!a&&!n)return null;o=n?a?a[4].length>n[4].length?a:n:n:a;var l;return t.length>e.length?(a=o[0],n=o[1],r=o[2],l=o[3]):(r=o[0],l=o[1],a=o[2],n=o[3]),o=o[4],[a,n,r,l,o]},t.prototype.diff_cleanupSemantic=function(t){for(var e=!1,i=[],n=0,r=null,o=0,s=0,a=0,l=0,h=0;o<t.length;)0==t[o][0]?(i[n++]=o,s=l,a=h,h=l=0,r=t[o][1]):(1==t[o][0]?l+=t[o][1].length:h+=t[o][1].length,r&&r.length<=Math.max(s,a)&&r.length<=Math.max(l,h)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,n--,o=n>0?i[n-1]:-1,h=l=a=s=0,r=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;)-1==t[o-1][0]&&1==t[o][0]&&(e=t[o-1][1],i=t[o][1],n=this.diff_commonOverlap_(e,i),r=this.diff_commonOverlap_(i,e),n>=r?(n>=e.length/2||n>=i.length/2)&&(t.splice(o,0,[0,i.substring(0,n)]),t[o-1][1]=e.substring(0,e.length-n),t[o+1][1]=i.substring(n),o++):(r>=e.length/2||r>=i.length/2)&&(t.splice(o,0,[0,e.substring(0,r)]),t[o-1][0]=1,t[o-1][1]=i.substring(0,i.length-r),t[o+1][0]=-1,t[o+1][1]=e.substring(r),o++),o++),o++},t.prototype.diff_cleanupSemanticLossless=function(e){function i(e,i){if(!e||!i)return 6;var n=e.charAt(e.length-1),r=i.charAt(0),o=n.match(t.nonAlphaNumericRegex_),s=r.match(t.nonAlphaNumericRegex_),a=o&&n.match(t.whitespaceRegex_),l=s&&r.match(t.whitespaceRegex_),n=a&&n.match(t.linebreakRegex_),r=l&&r.match(t.linebreakRegex_),h=n&&e.match(t.blanklineEndRegex_),c=r&&i.match(t.blanklineStartRegex_);return h||c?5:n||r?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var r=e[n-1][1],o=e[n][1],s=e[n+1][1],a=this.diff_commonSuffix(r,o);if(a)var l=o.substring(o.length-a),r=r.substring(0,r.length-a),o=l+o.substring(0,o.length-a),s=l+s;for(var a=r,l=o,h=s,c=i(r,o)+i(o,s);o.charAt(0)===s.charAt(0);){var r=r+o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1),u=i(r,o)+i(o,s);u>=c&&(c=u,a=r,l=o,h=s)}e[n-1][1]!=a&&(a?e[n-1][1]=a:(e.splice(n-1,1),n--),e[n][1]=l,h?e[n+1][1]=h:(e.splice(n+1,1),n--))}n++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,i=[],n=0,r=null,o=0,s=!1,a=!1,l=!1,h=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(l||h)?(i[n++]=o,s=l,a=h,r=t[o][1]):(n=0,r=null),l=h=!1):(-1==t[o][0]?h=!0:l=!0,r&&(s&&a&&l&&h||r.length<this.Diff_EditCost/2&&3==s+a+l+h)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,r=null,s&&a?(l=h=!0,n=0):(n--,o=n>0?i[n-1]:-1,l=h=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,i=0,n=0,r=0,o="",s="";i<t.length;)switch(t[i][0]){case 1:r++,s+=t[i][1],i++;break;case-1:n++,o+=t[i][1],i++;break;case 0:n+r>1?(0!==n&&0!==r&&(e=this.diff_commonPrefix(s,o),0!==e&&(i-n-r>0&&0==t[i-n-r-1][0]?t[i-n-r-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),i++),s=s.substring(e),o=o.substring(e)),e=this.diff_commonSuffix(s,o),0!==e&&(t[i][1]=s.substring(s.length-e)+t[i][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===n?t.splice(i-r,n+r,[1,s]):0===r?t.splice(i-n,n+r,[-1,o]):t.splice(i-n-r,n+r,[-1,o],[1,s]),i=i-n-r+(n?1:0)+(r?1:0)+1):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,n=r=0,s=o=""}for(""===t[t.length-1][1]&&t.pop(),n=!1,i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),n=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),n=!0)),i++;n&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,e){var i,n=0,r=0,o=0,s=0;for(i=0;i<t.length&&(1!==t[i][0]&&(n+=t[i][1].length),-1!==t[i][0]&&(r+=t[i][1].length),!(n>e));i++)o=n,s=r;return t.length!=i&&-1===t[i][0]?s:s+(e-o)},t.prototype.diff_prettyHtml=function(t){for(var e=[],i=/&/g,n=/</g,r=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],l=t[s][1],l=l.replace(i,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(a){case 1:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},t.prototype.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)-1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},t.prototype.diff_levenshtein=function(t){for(var e=0,i=0,n=0,r=0;r<t.length;r++){var o=t[r][0],s=t[r][1];switch(o){case 1:i+=s.length;break;case-1:n+=s.length;break;case 0:e+=Math.max(i,n),n=i=0}}return e+=Math.max(i,n)},t.prototype.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case 1:e[i]="+"+encodeURI(t[i][1]);break;case-1:e[i]="-"+t[i][1].length;break;case 0:e[i]="="+t[i][1].length}return e.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,e){for(var i=[],n=0,r=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{i[n++]=[1,decodeURI(a)]}catch(l){throw Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var h=parseInt(a,10);if(isNaN(h)||0>h)throw Error("Invalid number in diff_fromDelta: "+a);a=t.substring(r,r+=h),i[n++]="="==o[s].charAt(0)?[0,a]:[-1,a];break;default:if(o[s])throw Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(r!=t.length)throw Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return i},t.prototype.match_main=function(t,e,i){if(null==t||null==e||null==i)throw Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==e?0:t.length?t.substring(i,i+e.length)==e?i:this.match_bitap_(t,e,i):-1},t.prototype.match_bitap_=function(t,e,i){function n(t,n){var r=t/e.length,s=Math.abs(i-n);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}if(e.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this,s=this.Match_Threshold,a=t.indexOf(e,i);-1!=a&&(s=Math.min(n(0,a),s),a=t.lastIndexOf(e,i+e.length),-1!=a&&(s=Math.min(n(0,a),s)));for(var l,h,c,u=1<<e.length-1,a=-1,d=e.length+t.length,p=0;p<e.length;p++){for(l=0,h=d;h>l;)n(p,i+h)<=s?l=h:d=h,h=Math.floor((d-l)/2+l);d=h,l=Math.max(1,i-h+1);var f=Math.min(i+h,t.length)+e.length;for(h=Array(f+2),h[f+1]=(1<<p)-1;f>=l;f--){var g=r[t.charAt(f-1)];if(h[f]=0===p?(1|h[f+1]<<1)&g:(1|h[f+1]<<1)&g|(1|(c[f+1]|c[f])<<1)|c[f+1],h[f]&u&&(g=n(p,f-1),s>=g)){if(s=g,a=f-1,!(a>i))break;l=Math.max(1,2*i-a)}}if(n(p+1,i)>s)break;c=h}return a},t.prototype.match_alphabet_=function(t){for(var e={},i=0;i<t.length;i++)e[t.charAt(i)]=0;for(i=0;i<t.length;i++)e[t.charAt(i)]|=1<<t.length-i-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var i=e.substring(t.start2,t.start2+t.length1),n=0;e.indexOf(i)!=e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)n+=this.Patch_Margin,i=e.substring(t.start2-n,t.start2+t.length1+n);n+=this.Patch_Margin,(i=e.substring(t.start2-n,t.start2))&&t.diffs.unshift([0,i]),(n=e.substring(t.start2+t.length1,t.start2+t.length1+n))&&t.diffs.push([0,n]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+n.length,t.length2+=i.length+n.length}},t.prototype.patch_make=function(e,i,n){var r;if("string"==typeof e&&"string"==typeof i&&"undefined"==typeof n)r=e,i=this.diff_main(r,i,!0),2<i.length&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&"object"==typeof e&&"undefined"==typeof i&&"undefined"==typeof n)i=e,r=this.diff_text1(i);else if("string"==typeof e&&i&&"object"==typeof i&&"undefined"==typeof n)r=e;else{if("string"!=typeof e||"string"!=typeof i||!n||"object"!=typeof n)throw Error("Unknown call format to patch_make.");r=e,i=n}if(0===i.length)return[];n=[],e=new t.patch_obj;for(var o=0,s=0,a=0,l=r,h=0;h<i.length;h++){var c=i[h][0],u=i[h][1];
switch(!o&&0!==c&&(e.start1=s,e.start2=a),c){case 1:e.diffs[o++]=i[h],e.length2+=u.length,r=r.substring(0,a)+u+r.substring(a);break;case-1:e.length1+=u.length,e.diffs[o++]=i[h],r=r.substring(0,a)+r.substring(a+u.length);break;case 0:u.length<=2*this.Patch_Margin&&o&&i.length!=h+1?(e.diffs[o++]=i[h],e.length1+=u.length,e.length2+=u.length):u.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(e,l),n.push(e),e=new t.patch_obj,o=0,l=r,s=a)}1!==c&&(s+=u.length),-1!==c&&(a+=u.length)}return o&&(this.patch_addContext_(e,l),n.push(e)),n},t.prototype.patch_deepCopy=function(e){for(var i=[],n=0;n<e.length;n++){var r=e[n],o=new t.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=r.diffs[s].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,i[n]=o}return i},t.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var n=0,r=[],o=0;o<t.length;o++){var s,a=t[o].start2+n,l=this.diff_text1(t[o].diffs),h=-1;if(l.length>this.Match_MaxBits?(s=this.match_main(e,l.substring(0,this.Match_MaxBits),a),-1!=s&&(h=this.match_main(e,l.substring(l.length-this.Match_MaxBits),a+l.length-this.Match_MaxBits),-1==h||s>=h)&&(s=-1)):s=this.match_main(e,l,a),-1==s)r[o]=!1,n-=t[o].length2-t[o].length1;else if(r[o]=!0,n=s-a,a=-1==h?e.substring(s,s+l.length):e.substring(s,h+this.Match_MaxBits),l==a)e=e.substring(0,s)+this.diff_text2(t[o].diffs)+e.substring(s+l.length);else if(a=this.diff_main(l,a,!1),l.length>this.Match_MaxBits&&this.diff_levenshtein(a)/l.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(a);for(var c,l=0,h=0;h<t[o].diffs.length;h++){var u=t[o].diffs[h];0!==u[0]&&(c=this.diff_xIndex(a,l)),1===u[0]?e=e.substring(0,s+c)+u[1]+e.substring(s+c):-1===u[0]&&(e=e.substring(0,s+c)+e.substring(s+this.diff_xIndex(a,l+u[1].length))),-1!==u[0]&&(l+=u[1].length)}}}return e=e.substring(i.length,e.length-i.length),[e,r]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,i="",n=1;e>=n;n++)i+=String.fromCharCode(n);for(n=0;n<t.length;n++)t[n].start1+=e,t[n].start2+=e;var n=t[0],r=n.diffs;if(0==r.length||0!=r[0][0])r.unshift([0,i]),n.start1-=e,n.start2-=e,n.length1+=e,n.length2+=e;else if(e>r[0][1].length){var o=e-r[0][1].length;r[0][1]=i.substring(r[0][1].length)+r[0][1],n.start1-=o,n.start2-=o,n.length1+=o,n.length2+=o}return n=t[t.length-1],r=n.diffs,0==r.length||0!=r[r.length-1][0]?(r.push([0,i]),n.length1+=e,n.length2+=e):e>r[r.length-1][1].length&&(o=e-r[r.length-1][1].length,r[r.length-1][1]+=i.substring(0,o),n.length1+=o,n.length2+=o),i},t.prototype.patch_splitMax=function(e){for(var i=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=i)){var r=e[n];e.splice(n--,1);for(var o=r.start1,s=r.start2,a="";0!==r.diffs.length;){var l=new t.patch_obj,h=!0;for(l.start1=o-a.length,l.start2=s-a.length,""!==a&&(l.length1=l.length2=a.length,l.diffs.push([0,a]));0!==r.diffs.length&&l.length1<i-this.Patch_Margin;){var a=r.diffs[0][0],c=r.diffs[0][1];1===a?(l.length2+=c.length,s+=c.length,l.diffs.push(r.diffs.shift()),h=!1):-1===a&&1==l.diffs.length&&0==l.diffs[0][0]&&c.length>2*i?(l.length1+=c.length,o+=c.length,h=!1,l.diffs.push([a,c]),r.diffs.shift()):(c=c.substring(0,i-l.length1-this.Patch_Margin),l.length1+=c.length,o+=c.length,0===a?(l.length2+=c.length,s+=c.length):h=!1,l.diffs.push([a,c]),c==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(c.length))}a=this.diff_text2(l.diffs),a=a.substring(a.length-this.Patch_Margin),c=this.diff_text1(r.diffs).substring(0,this.Patch_Margin),""!==c&&(l.length1+=c.length,l.length2+=c.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=c:l.diffs.push([0,c])),h||e.splice(++n,0,l)}}},t.prototype.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},t.prototype.patch_fromText=function(e){var i=[];if(!e)return i;e=e.split("\n");for(var n=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<e.length;){var o=e[n].match(r);if(!o)throw Error("Invalid patch string: "+e[n]);var s=new t.patch_obj;for(i.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"==o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"==o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),n++;n<e.length;){o=e[n].charAt(0);try{var a=decodeURI(e[n].substring(1))}catch(l){throw Error("Illegal escape in patch_fromText: "+a)}if("-"==o)s.diffs.push([-1,a]);else if("+"==o)s.diffs.push([1,a]);else if(" "==o)s.diffs.push([0,a]);else{if("@"==o)break;if(""!==o)throw Error('Invalid patch mode "'+o+'" in: '+a)}n++}}return i},t.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},t.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,t=["@@ -"+t+" +"+e+" @@\n"];var i;for(e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case 1:i="+";break;case-1:i="-";break;case 0:i=" "}t[e+1]=i+encodeURI(this.diffs[e][1])+"\n"}return t.join("").replace(/%20/g," ")},this.diff_match_patch=t,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0}(),/*! jQuery UI - v1.8.24 - 2012-09-28
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.effects.core.js, jquery.effects.blind.js, jquery.effects.bounce.js, jquery.effects.clip.js, jquery.effects.drop.js, jquery.effects.explode.js, jquery.effects.fade.js, jquery.effects.fold.js, jquery.effects.highlight.js, jquery.effects.pulsate.js, jquery.effects.scale.js, jquery.effects.shake.js, jquery.effects.slide.js, jquery.effects.transfer.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
function(t,e){function i(e,i){var r=e.nodeName.toLowerCase();if("area"===r){var o,s=e.parentNode,a=s.name;return e.href&&a&&"map"===s.nodeName.toLowerCase()?(o=t("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1}return(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"==r?e.href||i:i)&&n(e)}function n(e){return!t(e).parents().andSelf().filter(function(){return"hidden"===t.curCSS(this,"visibility")||t.expr.filters.hidden(this)}).length}t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),t.fn.extend({propAttr:t.fn.prop||t.fn.attr,_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.curCSS(this,"position",1))&&/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,r,o=t(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function r(e,i,n,r){return t.each(o,function(){i-=parseFloat(t.curCSS(e,"padding"+this,!0))||0,n&&(i-=parseFloat(t.curCSS(e,"border"+this+"Width",!0))||0),r&&(i-=parseFloat(t.curCSS(e,"margin"+this,!0))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(s,r(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(s,r(this,e,!0,i)+"px")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(e,!r)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));i.offsetHeight,t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t.curCSS||(t.curCSS=t.css),t.extend(t.ui,{plugin:{add:function(e,i,n){var r=t.ui[e].prototype;for(var o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(t,e,i){var n=t.plugins[e];if(n&&t.element[0].parentNode)for(var r=0;r<n.length;r++)t.options[n[r][0]]&&n[r][1].apply(t.element,i)}},contains:function(t,e){return document.compareDocumentPosition?16&t.compareDocumentPosition(e):t!==e&&t.contains(e)},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return e[n]>0?!0:(e[n]=1,r=e[n]>0,e[n]=0,r)},isOverAxis:function(t,e,i){return t>e&&e+i>t},isOver:function(e,i,n,r,o,s){return t.ui.isOverAxis(e,n,o)&&t.ui.isOverAxis(i,r,s)}}))}(jQuery),function(t,e){if(t.cleanData){var i=t.cleanData;t.cleanData=function(e){for(var n,r=0;null!=(n=e[r]);r++)try{t(n).triggerHandler("remove")}catch(o){}i(e)}}else{var n=t.fn.remove;t.fn.remove=function(e,i){return this.each(function(){return i||(!e||t.filter(e,[this]).length)&&t("*",this).add([this]).each(function(){try{t(this).triggerHandler("remove")}catch(e){}}),n.call(t(this),e,i)})}}t.widget=function(e,i,n){var r,o=e.split(".")[0];e=e.split(".")[1],r=o+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][r]=function(i){return!!t.data(i,e)},t[o]=t[o]||{},t[o][e]=function(t,e){arguments.length&&this._createWidget(t,e)};var s=new i;s.options=t.extend(!0,{},s.options),t[o][e].prototype=t.extend(!0,s,{namespace:o,widgetName:e,widgetEventPrefix:t[o][e].prototype.widgetEventPrefix||e,widgetBaseClass:r},n),t.widget.bridge(e,t[o][e])},t.widget.bridge=function(i,n){t.fn[i]=function(r){var o="string"==typeof r,s=Array.prototype.slice.call(arguments,1),a=this;return r=!o&&s.length?t.extend.apply(null,[!0,r].concat(s)):r,o&&"_"===r.charAt(0)?a:(o?this.each(function(){var n=t.data(this,i),o=n&&t.isFunction(n[r])?n[r].apply(n,s):n;return o!==n&&o!==e?(a=o,!1):void 0}):this.each(function(){var e=t.data(this,i);e?e.option(r||{})._init():t.data(this,i,new n(r,this))}),a)}},t.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(e,i){t.data(i,this.widgetName,this),this.element=t(i),this.options=t.extend(!0,{},this.options,this._getCreateOptions(),e);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(i,n){var r=i;if(0===arguments.length)return t.extend({},this.options);if("string"==typeof i){if(n===e)return this.options[i];r={},r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var i=this;return t.each(e,function(t,e){i._setOption(t,e)}),this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(e,i,n){var r,o,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(t.isFunction(s)&&s.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1==i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return!t.browser.msie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target==this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(e),this.handle?(i.iframeFix&&t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],r=!1;n&&(n=n.parentNode);)n==document&&(r=!0);if(!r&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var o=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){o._trigger("stop",e)!==!1&&o._clear()})}else this._trigger("stop",e)!==!1&&this._clear();return!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=this.options.handle&&t(this.options.handle,this.element).length?!1:!0;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(i=!0)}),i},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(e.containment),n=i[0];if(!n)return;i.offset();var r="hidden"!=t(n).css("overflow");this.containment=[(parseInt(t(n).css("borderLeftWidth"),10)||0)+(parseInt(t(n).css("paddingLeft"),10)||0),(parseInt(t(n).css("borderTopWidth"),10)||0)+(parseInt(t(n).css("paddingTop"),10)||0),(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t(n).css("borderLeftWidth"),10)||0)-(parseInt(t(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t(n).css("borderTopWidth"),10)||0)-(parseInt(t(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n)}},_generatePosition:function(e){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName),o=e.pageX,s=e.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;e.pageX-this.offset.click.left<a[0]&&(o=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(s=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(o=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(s=a[3]+this.offset.click.top)}if(i.grid){var h=i.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;s=a?h-this.offset.click.top<a[1]||h-this.offset.click.top>a[3]?h-this.offset.click.top<a[1]?h+i.grid[1]:h-i.grid[1]:h:h;var c=i.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;o=a?c-this.offset.click.left<a[0]||c-this.offset.click.left>a[2]?c-this.offset.click.left<a[0]?c+i.grid[0]:c-i.grid[0]:c:c}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.extend(t.ui.draggable,{version:"1.8.24"}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("draggable"),r=n.options,o=t.extend({},i,{item:n.element});n.sortables=[],t(r.connectToSortable).each(function(){var i=t.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var n=t(this).data("draggable"),r=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,i){var n=t(this).data("draggable"),r=this;t.each(n.sortables,function(){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),r=t(this).data("draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(e,i){var n=t(this).data("draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("draggable"),n=i.options,r=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){for(var n=t(this).data("draggable"),r=n.options,o=r.snapTolerance,s=i.offset.left,a=s+n.helperProportions.width,l=i.offset.top,h=l+n.helperProportions.height,c=n.snapElements.length-1;c>=0;c--){var u=n.snapElements[c].left,d=u+n.snapElements[c].width,p=n.snapElements[c].top,f=p+n.snapElements[c].height;if(s>u-o&&d+o>s&&l>p-o&&f+o>l||s>u-o&&d+o>s&&h>p-o&&f+o>h||a>u-o&&d+o>a&&l>p-o&&f+o>l||a>u-o&&d+o>a&&h>p-o&&f+o>h){if("inner"!=r.snapMode){var g=Math.abs(p-h)<=o,m=Math.abs(f-l)<=o,v=Math.abs(u-a)<=o,b=Math.abs(d-s)<=o;g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left)}var y=g||m||v||b;if("outer"!=r.snapMode){var g=Math.abs(p-l)<=o,m=Math.abs(f-h)<=o,v=Math.abs(u-s)<=o,b=Math.abs(d-a)<=o;g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[c].snapping&&(g||m||v||b||y)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=g||m||v||b||y}else n.snapElements[c].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(){var e=t(this).data("draggable").options,i=t.makeArray(t(e.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;t(i).each(function(t){this.style.zIndex=n+t}),this[0].style.zIndex=n+i.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),r=t(this).data("draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(e,i){var n=t(this).data("draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t){t.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,i=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var e=t.ui.ddmanager.droppables[this.options.scope],i=0;i<e.length;i++)e[i]==this&&e.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(e,i){"accept"==e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope==n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.extend(t.ui.droppable,{version:"1.8.24"}),t.ui.intersect=function(e,i,n){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left,o=r+e.helperProportions.width,s=(e.positionAbs||e.position.absolute).top,a=s+e.helperProportions.height,l=i.offset.left,h=l+i.proportions.width,c=i.offset.top,u=c+i.proportions.height;switch(n){case"fit":return r>=l&&h>=o&&s>=c&&u>=a;case"intersect":return l<r+e.helperProportions.width/2&&o-e.helperProportions.width/2<h&&c<s+e.helperProportions.height/2&&a-e.helperProportions.height/2<u;case"pointer":var d=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,f=t.ui.isOver(p,d,c,l,i.proportions.height,i.proportions.width);return f;case"touch":return(s>=c&&u>=s||a>=c&&u>=a||c>s&&a>u)&&(r>=l&&h>=r||o>=l&&h>=o||l>r&&o>h);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,o=(e.currentItem||e.element).find(":data(droppable)").andSelf();t:for(var s=0;s<n.length;s++)if(!(n[s].options.disabled||e&&!n[s].accept.call(n[s].element[0],e.currentItem||e.element))){for(var a=0;a<o.length;a++)if(o[a]==n[s].element[0]){n[s].proportions.height=0;continue t}n[s].visible="none"!=n[s].element.css("display"),n[s].visible&&("mousedown"==r&&n[s]._activate.call(n[s],i),n[s].offset=n[s].element.offset(),n[s].proportions={width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight})}},drop:function(e,i){var n=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))
}),n},dragStart:function(e,i){e.element.parents(":not(body,html)").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=t.ui.intersect(e,this,this.options.tolerance),r=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(r){var o;if(this.options.greedy){var s=this.options.scope,a=this.element.parents(":data(droppable)").filter(function(){return t.data(this,"droppable").options.scope===s});a.length&&(o=t.data(a[0],"droppable"),o.greedyChild="isover"==r?1:0)}o&&"isover"==r&&(o.isover=0,o.isout=1,o._out.call(o,i)),this[r]=1,this["isout"==r?"isover":"isout"]=0,this["isover"==r?"_over":"_out"].call(this,i),o&&"isout"==r&&(o.isout=0,o.isover=1,o._over.call(o,i))}}})},dragStop:function(e,i){e.element.parents(":not(body,html)").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){t.widget("ui.resizable",t.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,i=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var r=0;r<n.length;r++){var o=t.trim(n[r]),s="ui-resizable-"+o,a=t('<div class="ui-resizable-handle '+s+'"></div>');a.css({zIndex:i.zIndex}),"se"==o&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(a)}}this._renderAxis=function(e){e=e||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=t(this.handles[i],this.element),r=0;r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(o,r),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").hover(function(){i.disabled||(t(this).removeClass("ui-resizable-autohide"),e._handles.show())},function(){i.disabled||e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var i=!1;for(var n in this.handles)t(this.handles[n])[0]==e.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var n=this.options,r=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy();var s=e(this.helper.css("left")),a=e(this.helper.css("top"));n.containment&&(s+=t(n.containment).scrollLeft()||0,a+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:a},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:s,top:a},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==l?this.axis+"-resize":l),o.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i=this.helper,n=(this.options,this.originalMousePosition),r=this.axis,o=e.pageX-n.left||0,s=e.pageY-n.top||0,a=this._change[r];if(!a)return!1;var l=a.apply(this,[e,o,s]);return t.browser.msie&&t.browser.version<7,this.sizeDiff,this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(l=this._updateRatio(l,e)),l=this._respectSize(l,e),this._propagate("resize",e),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,n=this;if(this._helper){var r=this._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&t.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.helper.width()-a,height:n.helper.height()-s},h=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(t.extend(l,{top:c,left:h})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,n,r,o,s,a=this.options;s={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),r>s.minHeight&&(s.minHeight=r),n<s.maxWidth&&(s.maxWidth=n),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(t){this.options,this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=(this.options,this.position),n=this.size,r=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==r&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"==r&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t,e){var n=(this.helper,this._vBoundaries),r=(this._aspectRatio||e.shiftKey,this.axis),o=i(t.width)&&n.maxWidth&&n.maxWidth<t.width,s=i(t.height)&&n.maxHeight&&n.maxHeight<t.height,a=i(t.width)&&n.minWidth&&n.minWidth>t.width,l=i(t.height)&&n.minHeight&&n.minHeight>t.height;a&&(t.width=n.minWidth),l&&(t.height=n.minHeight),o&&(t.width=n.maxWidth),s&&(t.height=n.maxHeight);var h=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(r),d=/nw|ne|n/.test(r);a&&u&&(t.left=h-n.minWidth),o&&u&&(t.left=h-n.maxWidth),l&&d&&(t.top=c-n.minHeight),s&&d&&(t.top=c-n.maxHeight);var p=!t.width&&!t.height;return p&&!t.left&&t.top?t.top=null:p&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],o=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=t.map(r,function(t,e){var i=parseInt(t,10)||0,n=parseInt(o[e],10)||0;return i+n})}t.browser.msie&&(t(e).is(":hidden")||t(e).parents(":hidden").length)||n.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var n=t.browser.msie&&t.browser.version<7,r=n?1:0,o=n?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=(this.options,this.originalSize),r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.extend(t.ui.resizable,{version:"1.8.24"}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):t.each(i.alsoResize,function(t){n(t)})},resize:function(e,i){var n=t(this).data("resizable"),r=n.options,o=n.originalSize,s=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(e,n){t(e).each(function(){var e=t(this),r=t(this).data("resizable-alsoresize"),o={},s=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var i=(r[e]||0)+(a[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),n=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&t.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&t(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i=t(this).data("resizable"),n=i.options,r=i.element,o=n.containment,s=o instanceof t?o.get(0):/parent/.test(o)?r.parent().get(0):o;if(s)if(i.containerElement=t(s),/document/.test(o)||o==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var a=t(s),l=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){l[t]=e(a.css("padding"+i))}),i.containerOffset=a.offset(),i.containerPosition=a.position(),i.containerSize={height:a.innerHeight()-l[3],width:a.innerWidth()-l[1]};var h=i.containerOffset,c=i.containerSize.height,u=i.containerSize.width,d=t.ui.hasScroll(s,"left")?s.scrollWidth:u,p=t.ui.hasScroll(s)?s.scrollHeight:c;i.parentData={element:s,left:h.left,top:h.top,width:d,height:p}}},resize:function(e){var i=t(this).data("resizable"),n=i.options,r=(i.containerSize,i.containerOffset),o=(i.size,i.position),s=i._aspectRatio||e.shiftKey,a={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(a=r),o.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-a.left),s&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=n.helper?r.left:0),o.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),s&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?r.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var h=Math.abs((i._helper?i.offset.left-a.left:i.offset.left-a.left)+i.sizeDiff.width),c=Math.abs((i._helper?i.offset.top-a.top:i.offset.top-r.top)+i.sizeDiff.height),u=i.containerElement.get(0)==i.element.parent().get(0),d=/relative|absolute/.test(i.containerElement.css("position"));u&&d&&(h-=i.parentData.left),h+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-h,s&&(i.size.height=i.size.width/i.aspectRatio)),c+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-c,s&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,n=(e.position,e.containerOffset),r=e.containerPosition,o=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,h=s.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:h})}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e){var i=t(this).data("resizable"),n=i.options,r=i.size,o=i.originalSize,s=i.originalPosition,a=i.axis;n._aspectRatio||e.shiftKey,n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;var l=Math.round((r.width-o.width)/(n.grid[0]||1))*(n.grid[0]||1),h=Math.round((r.height-o.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(a)?(i.size.width=o.width+l,i.size.height=o.height+h):/^(ne)$/.test(a)?(i.size.width=o.width+l,i.size.height=o.height+h,i.position.top=s.top-h):/^(sw)$/.test(a)?(i.size.width=o.width+l,i.size.height=o.height+h,i.position.left=s.left-l):(i.size.width=o.width+l,i.size.height=o.height+h,i.position.top=s.top-h,i.position.left=s.left-l)}});var e=function(t){return parseInt(t,10)||0},i=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=t(e.options.filter,e.element[0]),i.addClass("ui-selectee"),i.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(e){var i=this;if(this.opos=[e.pageX,e.pageY],!this.options.disabled){var n=this.options;this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().andSelf().each(function(){var n=t.data(this,"selectable-item");if(n){var r=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),n.unselecting=!r,n.selecting=r,n.selected=r,r?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1}})}},_mouseDrag:function(e){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,r=this.opos[0],o=this.opos[1],s=e.pageX,a=e.pageY;if(r>s){var l=s;s=r,r=l}if(o>a){var l=a;a=o,o=l}return this.helper.css({left:r,top:o,width:s-r,height:a-o}),this.selectees.each(function(){var l=t.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var h=!1;"touch"==n.tolerance?h=!(l.left>s||l.right<r||l.top>a||l.bottom<o):"fit"==n.tolerance&&(h=l.left>r&&l.right<s&&l.top>o&&l.bottom<a),h?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",e,{selecting:l.element}))):(l.selecting&&((e.metaKey||e.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",e,{unselecting:l.element}))),l.selected&&(e.metaKey||e.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",e,{unselecting:l.element}))))}}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,this.options,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.extend(t.ui.selectable,{version:"1.8.24"})}(jQuery),function(t){t.widget("ui.sortable",t.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){t.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var r=null,o=this;if(t(e.target).parents().each(function(){return t.data(this,n.widgetName+"-item")==o?(r=t(this),!1):void 0}),t.data(e.target,n.widgetName+"-item")==o&&(r=t(e.target)),!r)return!1;if(this.options.handle&&!i){var s=!1;if(t(this.options.handle,r).find("*").andSelf().each(function(){this==e.target&&(s=!0)}),!s)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,i,n){var r=this.options,o=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,o._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed))),n!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var o=this.items[r],s=o.item[0],a=this._intersectsWithPointer(o);if(a&&o.instance===this.currentContainer&&s!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=s&&!t.ui.contains(this.placeholder[0],s)&&("semi-dynamic"==this.options.type?!t.ui.contains(this.element[0],s):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(e,o),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,r=n.placeholder.offset();n.reverting=!0,t(this.helper).animate({left:r.left-this.offset.parent.left-n.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-n.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){var e=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,e._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,e._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left,u=n+h>a&&l>n+h&&e+c>o&&s>e+c;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=i&&n,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"==s||"down"==o?2:1:o&&("down"==o?2:1):!1},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&n||"left"==o&&!n:r&&("down"==r&&i||"up"==r&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],n=[],r=this._connectWith();if(r&&e)for(var o=r.length-1;o>=0;o--)for(var s=t(r[o]),a=s.length-1;a>=0;a--){var l=t.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([t.isFunction(l.options.items)?l.options.items.call(l.element):t(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=n.length-1;o>=0;o--)n[o][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){for(var t=this.currentItem.find(":data("+this.widgetName+"-item)"),e=0;e<this.items.length;e++)for(var i=0;i<t.length;i++)t[i]==this.items[e].item[0]&&this.items.splice(e,1)
},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,n=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var o=r.length-1;o>=0;o--)for(var s=t(r[o]),a=s.length-1;a>=0;a--){var l=t.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([t.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):t(l.options.items,l.element),l]),this.containers.push(l))}for(var o=n.length-1;o>=0;o--)for(var h=n[o][1],c=n[o][0],a=0,u=c.length;u>a;a++){var d=t(c[a]);d.data(this.widgetName+"-item",h),i.push({item:d,instance:h,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item;e||(n.width=r.outerWidth(),n.height=r.outerHeight());var o=r.offset();n.left=o.left,n.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var o=this.containers[i].element.offset();this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){var i=e||this,n=i.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var e=t(document.createElement(i.currentItem[0].nodeName)).addClass(r||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(e.style.visibility="hidden"),e},update:function(t,e){(!r||n.forcePlaceholderSize)&&(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=t(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_contactContainers:function(e){for(var i=null,n=null,r=this.containers.length-1;r>=0;r--)if(!t.ui.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(i&&t.ui.contains(this.containers[r].element[0],i.element[0]))continue;i=this.containers[r],n=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",e,this._uiHash(this)),this.containers[r].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",e,this._uiHash(this)),this.containers[n].containerCache.over=1;else if(this.currentContainer!=this.containers[n]){for(var o=1e4,s=null,a=this.positionAbs[this.containers[n].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(t.ui.contains(this.containers[n].element[0],this.items[l].item[0])){var h=this.containers[n].floating?this.items[l].item.offset().left:this.items[l].item.offset().top;Math.abs(h-a)<o&&(o=Math.abs(h-a),s=this.items[l],this.direction=h-a>0?"down":"up")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],s?this._rearrange(e,s,null,!0):this._rearrange(e,null,this.containers[n].element,!0),this._trigger("change",e,this._uiHash()),this.containers[n]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",e,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],n=t(e.containment).offset(),r="hidden"!=t(i).css("overflow");this.containment=[n.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n)}},_generatePosition:function(e){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=e.pageX,s=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a:a;var l=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this,o=this.counter;window.setTimeout(function(){o==r.counter&&r.refreshPositions(!n)},0)},_clear:function(e,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(i||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))));for(var r=this.containers.length-1;r>=0;r--)i||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var r=0;r<n.length;r++)n[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var r=0;r<n.length;r++)n[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.ui.sortable,{version:"1.8.24"})}(jQuery),jQuery.effects||function(t,e){function i(e){var i;return e&&e.constructor==Array&&3==e.length?e:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:(i=/rgba\(0, 0, 0, 0\)/.exec(e))?h.transparent:h[t.trim(e).toLowerCase()]}function n(e,n){var r;do{if(r=(t.curCSS||t.css)(e,n),""!=r&&"transparent"!=r||t.nodeName(e,"body"))break;n="backgroundColor"}while(e=e.parentNode);return i(r)}function r(){var t,e,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(var r=i.length;r--;)t=i[r],"string"==typeof i[t]&&(e=t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),n[e]=i[t]);else for(t in i)"string"==typeof i[t]&&(n[t]=i[t]);return n}function o(e){var i,n;for(i in e)n=e[i],(null==n||t.isFunction(n)||i in u||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(n)))&&delete e[i];return e}function s(t,e){var i,n={_:0};for(i in e)t[i]!=e[i]&&(n[i]=e[i]);return n}function a(e,i,n,r){return"object"==typeof e&&(r=i,n=null,i=e,e=i.effect),t.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(r=n,n=i,i={}),t.isFunction(n)&&(r=n,n=null),i=i||{},n=n||i.duration,n=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,r=r||i.complete,[e,i,n,r]}function l(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects[e]?!1:!0}t.effects={},t.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(e,r){t.fx.step[r]=function(t){t.colorInit||(t.start=n(t.elem,r),t.end=i(t.end),t.colorInit=!0),t.elem.style[r]="rgb("+Math.max(Math.min(parseInt(t.pos*(t.end[0]-t.start[0])+t.start[0],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[1]-t.start[1])+t.start[1],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[2]-t.start[2])+t.start[2],10),255),0)+")"}});var h={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},c=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.effects.animateClass=function(e,i,n,a){return t.isFunction(n)&&(a=n,n=null),this.queue(function(){var l,h=t(this),u=h.attr("style")||" ",d=o(r.call(this)),p=h.attr("class")||"";t.each(c,function(t,i){e[i]&&h[i+"Class"](e[i])}),l=o(r.call(this)),h.attr("class",p),h.animate(s(d,l),{queue:!1,duration:i,easing:n,complete:function(){t.each(c,function(t,i){e[i]&&h[i+"Class"](e[i])}),"object"==typeof h.attr("style")?(h.attr("style").cssText="",h.attr("style").cssText=u):h.attr("style",u),a&&a.apply(this,arguments),t.dequeue(this)}})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,n,r){return i?t.effects.animateClass.apply(this,[{add:e},i,n,r]):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,n,r){return i?t.effects.animateClass.apply(this,[{remove:e},i,n,r]):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,n,r,o,s){return"boolean"==typeof n||n===e?r?t.effects.animateClass.apply(this,[n?{add:i}:{remove:i},r,o,s]):this._toggleClass(i,n):t.effects.animateClass.apply(this,[{toggle:i},n,r,o])},switchClass:function(e,i,n,r,o){return t.effects.animateClass.apply(this,[{add:i,remove:e},n,r,o])}}),t.extend(t.effects,{version:"1.8.24",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data("ec.storage."+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.css(e[i],t.data("ec.storage."+e[i]))},setMode:function(t,e){return"toggle"==e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r=document.activeElement;try{r.id}catch(o){r=document.body}return e.wrap(n),(e[0]===r||t.contains(e[0],r))&&t(r).focus(),n=e.parent(),"static"==e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(i).show()},removeWrapper:function(e){var i,n=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(i=e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).focus(),i):e},setTransition:function(e,i,n,r){return r=r||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(r[i]=o[0]*n+o[1])}),r}}),t.fn.extend({effect:function(e){var i=a.apply(this,arguments),n={options:i[1],duration:i[2],callback:i[3]},r=n.options.mode,o=t.effects[e];return t.fx.off||!o?r?this[r](n.duration,n.callback):this.each(function(){n.callback&&n.callback.call(this)}):o.call(this,n)},_show:t.fn.show,show:function(t){if(l(t))return this._show.apply(this,arguments);var e=a.apply(this,arguments);return e[1].mode="show",this.effect.apply(this,e)},_hide:t.fn.hide,hide:function(t){if(l(t))return this._hide.apply(this,arguments);var e=a.apply(this,arguments);return e[1].mode="hide",this.effect.apply(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(l(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=a.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}});var d={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,e){d[e]=function(e){return Math.pow(e,t+2)}}),t.extend(d,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(d,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:i(-2*t+2)/-2+1}})}(jQuery),function(t){t.effects.blind=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right"],r=t.effects.setMode(i,e.options.mode||"hide"),o=e.options.direction||"vertical";t.effects.save(i,n),i.show();var s=t.effects.createWrapper(i).css({overflow:"hidden"}),a="vertical"==o?"height":"width",l="vertical"==o?s.height():s.width();"show"==r&&s.css(a,0);var h={};h[a]="show"==r?l:0,s.animate(h,e.duration,e.options.easing,function(){"hide"==r&&i.hide(),t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(t){t.effects.bounce=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right"],r=t.effects.setMode(i,e.options.mode||"effect"),o=e.options.direction||"up",s=e.options.distance||20,a=e.options.times||5,l=e.duration||250;/show|hide/.test(r)&&n.push("opacity"),t.effects.save(i,n),i.show(),t.effects.createWrapper(i);var h="up"==o||"down"==o?"top":"left",c="up"==o||"left"==o?"pos":"neg",s=e.options.distance||("top"==h?i.outerHeight(!0)/3:i.outerWidth(!0)/3);if("show"==r&&i.css("opacity",0).css(h,"pos"==c?-s:s),"hide"==r&&(s/=2*a),"hide"!=r&&a--,"show"==r){var u={opacity:1};u[h]=("pos"==c?"+=":"-=")+s,i.animate(u,l/2,e.options.easing),s/=2,a--}for(var d=0;a>d;d++){var p={},f={};p[h]=("pos"==c?"-=":"+=")+s,f[h]=("pos"==c?"+=":"-=")+s,i.animate(p,l/2,e.options.easing).animate(f,l/2,e.options.easing),s="hide"==r?2*s:s/2}if("hide"==r){var u={opacity:0};u[h]=("pos"==c?"-=":"+=")+s,i.animate(u,l/2,e.options.easing,function(){i.hide(),t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments)})}else{var p={},f={};p[h]=("pos"==c?"-=":"+=")+s,f[h]=("pos"==c?"+=":"-=")+s,i.animate(p,l/2,e.options.easing).animate(f,l/2,e.options.easing,function(){t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments)})}i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(t){t.effects.clip=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(i,e.options.mode||"hide"),o=e.options.direction||"vertical";t.effects.save(i,n),i.show();var s=t.effects.createWrapper(i).css({overflow:"hidden"}),a="IMG"==i[0].tagName?s:i,l={size:"vertical"==o?"height":"width",position:"vertical"==o?"top":"left"},h="vertical"==o?a.height():a.width();"show"==r&&(a.css(l.size,0),a.css(l.position,h/2));var c={};c[l.size]="show"==r?h:0,c[l.position]="show"==r?0:h/2,a.animate(c,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==r&&i.hide(),t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.drop=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right","opacity"],r=t.effects.setMode(i,e.options.mode||"hide"),o=e.options.direction||"left";t.effects.save(i,n),i.show(),t.effects.createWrapper(i);var s="up"==o||"down"==o?"top":"left",a="up"==o||"left"==o?"pos":"neg",l=e.options.distance||("top"==s?i.outerHeight(!0)/2:i.outerWidth(!0)/2);"show"==r&&i.css("opacity",0).css(s,"pos"==a?-l:l);var h={opacity:"show"==r?1:0};h[s]=("show"==r?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,i.animate(h,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==r&&i.hide(),t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.explode=function(e){return this.queue(function(){var i=e.options.pieces?Math.round(Math.sqrt(e.options.pieces)):3,n=e.options.pieces?Math.round(Math.sqrt(e.options.pieces)):3;e.options.mode="toggle"==e.options.mode?t(this).is(":visible")?"hide":"show":e.options.mode;var r=t(this).show().css("visibility","hidden"),o=r.offset();o.top-=parseInt(r.css("marginTop"),10)||0,o.left-=parseInt(r.css("marginLeft"),10)||0;for(var s=r.outerWidth(!0),a=r.outerHeight(!0),l=0;i>l;l++)for(var h=0;n>h;h++)r.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-h*(s/n),top:-l*(a/i)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s/n,height:a/i,left:o.left+h*(s/n)+("show"==e.options.mode?(h-Math.floor(n/2))*(s/n):0),top:o.top+l*(a/i)+("show"==e.options.mode?(l-Math.floor(i/2))*(a/i):0),opacity:"show"==e.options.mode?0:1}).animate({left:o.left+h*(s/n)+("show"==e.options.mode?0:(h-Math.floor(n/2))*(s/n)),top:o.top+l*(a/i)+("show"==e.options.mode?0:(l-Math.floor(i/2))*(a/i)),opacity:"show"==e.options.mode?1:0},e.duration||500);setTimeout(function(){"show"==e.options.mode?r.css({visibility:"visible"}):r.css({visibility:"visible"}).hide(),e.callback&&e.callback.apply(r[0]),r.dequeue(),t("div.ui-effects-explode").remove()},e.duration||500)})}}(jQuery),function(t){t.effects.fade=function(e){return this.queue(function(){var i=t(this),n=t.effects.setMode(i,e.options.mode||"hide");i.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.fold=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right"],r=t.effects.setMode(i,e.options.mode||"hide"),o=e.options.size||15,s=!!e.options.horizFirst,a=e.duration?e.duration/2:t.fx.speeds._default/2;t.effects.save(i,n),i.show();var l=t.effects.createWrapper(i).css({overflow:"hidden"}),h="show"==r!=s,c=h?["width","height"]:["height","width"],u=h?[l.width(),l.height()]:[l.height(),l.width()],d=/([0-9]+)%/.exec(o);d&&(o=parseInt(d[1],10)/100*u["hide"==r?0:1]),"show"==r&&l.css(s?{height:0,width:o}:{height:o,width:0});var p={},f={};p[c[0]]="show"==r?u[0]:o,f[c[1]]="show"==r?u[1]:0,l.animate(p,a,e.options.easing).animate(f,a,e.options.easing,function(){"hide"==r&&i.hide(),t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(t){t.effects.highlight=function(e){return this.queue(function(){var i=t(this),n=["backgroundImage","backgroundColor","opacity"],r=t.effects.setMode(i,e.options.mode||"show"),o={backgroundColor:i.css("backgroundColor")};"hide"==r&&(o.opacity=0),t.effects.save(i,n),i.show().css({backgroundImage:"none",backgroundColor:e.options.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==r&&i.hide(),t.effects.restore(i,n),"show"==r&&!t.support.opacity&&this.style.removeAttribute("filter"),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.pulsate=function(e){return this.queue(function(){var i=t(this),n=t.effects.setMode(i,e.options.mode||"show"),r=2*(e.options.times||5)-1,o=e.duration?e.duration/2:t.fx.speeds._default/2,s=i.is(":visible"),a=0;s||(i.css("opacity",0).show(),a=1),("hide"==n&&s||"show"==n&&!s)&&r--;for(var l=0;r>l;l++)i.animate({opacity:a},o,e.options.easing),a=(a+1)%2;i.animate({opacity:a},o,e.options.easing,function(){0==a&&i.hide(),e.callback&&e.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),function(t){t.effects.puff=function(e){return this.queue(function(){var i=t(this),n=t.effects.setMode(i,e.options.mode||"hide"),r=parseInt(e.options.percent,10)||150,o=r/100,s={height:i.height(),width:i.width()};t.extend(e.options,{fade:!0,mode:n,percent:"hide"==n?r:100,from:"hide"==n?s:{height:s.height*o,width:s.width*o}}),i.effect("scale",e.options,e.duration,e.callback),i.dequeue()})},t.effects.scale=function(e){return this.queue(function(){var i=t(this),n=t.extend(!0,{},e.options),r=t.effects.setMode(i,e.options.mode||"effect"),o=parseInt(e.options.percent,10)||(0==parseInt(e.options.percent,10)?0:"hide"==r?0:100),s=e.options.direction||"both",a=e.options.origin;"effect"!=r&&(n.origin=a||["middle","center"],n.restore=!0);var l={height:i.height(),width:i.width()};i.from=e.options.from||("show"==r?{height:0,width:0}:l);var h={y:"horizontal"!=s?o/100:1,x:"vertical"!=s?o/100:1};i.to={height:l.height*h.y,width:l.width*h.x},e.options.fade&&("show"==r&&(i.from.opacity=0,i.to.opacity=1),"hide"==r&&(i.from.opacity=1,i.to.opacity=0)),n.from=i.from,n.to=i.to,n.mode=r,i.effect("size",n,e.duration,e.callback),i.dequeue()})},t.effects.size=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right","width","height","overflow","opacity"],r=["position","top","bottom","left","right","overflow","opacity"],o=["width","height","overflow"],s=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=t.effects.setMode(i,e.options.mode||"effect"),c=e.options.restore||!1,u=e.options.scale||"both",d=e.options.origin,p={height:i.height(),width:i.width()};if(i.from=e.options.from||p,i.to=e.options.to||p,d){var f=t.effects.getBaseline(d,p);i.from.top=(p.height-i.from.height)*f.y,i.from.left=(p.width-i.from.width)*f.x,i.to.top=(p.height-i.to.height)*f.y,i.to.left=(p.width-i.to.width)*f.x}var g={from:{y:i.from.height/p.height,x:i.from.width/p.width},to:{y:i.to.height/p.height,x:i.to.width/p.width}};("box"==u||"both"==u)&&(g.from.y!=g.to.y&&(n=n.concat(a),i.from=t.effects.setTransition(i,a,g.from.y,i.from),i.to=t.effects.setTransition(i,a,g.to.y,i.to)),g.from.x!=g.to.x&&(n=n.concat(l),i.from=t.effects.setTransition(i,l,g.from.x,i.from),i.to=t.effects.setTransition(i,l,g.to.x,i.to))),("content"==u||"both"==u)&&g.from.y!=g.to.y&&(n=n.concat(s),i.from=t.effects.setTransition(i,s,g.from.y,i.from),i.to=t.effects.setTransition(i,s,g.to.y,i.to)),t.effects.save(i,c?n:r),i.show(),t.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),("content"==u||"both"==u)&&(a=a.concat(["marginTop","marginBottom"]).concat(s),l=l.concat(["marginLeft","marginRight"]),o=n.concat(a).concat(l),i.find("*[width]").each(function(){var i=t(this);c&&t.effects.save(i,o);var n={height:i.height(),width:i.width()};i.from={height:n.height*g.from.y,width:n.width*g.from.x},i.to={height:n.height*g.to.y,width:n.width*g.to.x},g.from.y!=g.to.y&&(i.from=t.effects.setTransition(i,a,g.from.y,i.from),i.to=t.effects.setTransition(i,a,g.to.y,i.to)),g.from.x!=g.to.x&&(i.from=t.effects.setTransition(i,l,g.from.x,i.from),i.to=t.effects.setTransition(i,l,g.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.options.easing,function(){c&&t.effects.restore(i,o)})})),i.animate(i.to,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==h&&i.hide(),t.effects.restore(i,c?n:r),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.shake=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right"];t.effects.setMode(i,e.options.mode||"effect");var r=e.options.direction||"left",o=e.options.distance||20,s=e.options.times||3,a=e.duration||e.options.duration||140;t.effects.save(i,n),i.show(),t.effects.createWrapper(i);var l="up"==r||"down"==r?"top":"left",h="up"==r||"left"==r?"pos":"neg",c={},u={},d={};c[l]=("pos"==h?"-=":"+=")+o,u[l]=("pos"==h?"+=":"-=")+2*o,d[l]=("pos"==h?"-=":"+=")+2*o,i.animate(c,a,e.options.easing);for(var p=1;s>p;p++)i.animate(u,a,e.options.easing).animate(d,a,e.options.easing);i.animate(u,a,e.options.easing).animate(c,a/2,e.options.easing,function(){t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(t){t.effects.slide=function(e){return this.queue(function(){var i=t(this),n=["position","top","bottom","left","right"],r=t.effects.setMode(i,e.options.mode||"show"),o=e.options.direction||"left";t.effects.save(i,n),i.show(),t.effects.createWrapper(i).css({overflow:"hidden"});
var s="up"==o||"down"==o?"top":"left",a="up"==o||"left"==o?"pos":"neg",l=e.options.distance||("top"==s?i.outerHeight(!0):i.outerWidth(!0));"show"==r&&i.css(s,"pos"==a?isNaN(l)?"-"+l:-l:l);var h={};h[s]=("show"==r?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,i.animate(h,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){"hide"==r&&i.hide(),t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(t){t.effects.transfer=function(e){return this.queue(function(){var i=t(this),n=t(e.options.to),r=n.offset(),o={top:r.top,left:r.left,height:n.innerHeight(),width:n.innerWidth()},s=i.offset(),a=t('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.options.className).css({top:s.top,left:s.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(o,e.duration,e.options.easing,function(){a.remove(),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(t){t.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var e=this,i=e.options;if(e.running=0,e.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),e.headers=e.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||t(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){i.disabled||t(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||t(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||t(this).removeClass("ui-state-focus")}),e.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var n=e.element.find("a").filter(i.navigationFilter).eq(0);if(n.length){var r=n.closest(".ui-accordion-header");e.active=r.length?r:n.closest(".ui-accordion-content").prev()}}e.active=e._findActive(e.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),e.active.next().addClass("ui-accordion-content-active"),e._createIcons(),e.resize(),e.element.attr("role","tablist"),e.headers.attr("role","tab").bind("keydown.accordion",function(t){return e._keydown(t)}).next().attr("role","tabpanel"),e.headers.not(e.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),e.active.length?e.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):e.headers.eq(0).attr("tabIndex",0),t.browser.safari||e.headers.find("a").attr("tabIndex",-1),i.event&&e.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(t){e._clickHandler.call(e,t,this),t.preventDefault()})},_createIcons:function(){var e=this.options;e.icons&&(t("<span></span>").addClass("ui-icon "+e.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(e.icons.header).toggleClass(e.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var e=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(e.autoHeight||e.fillHeight)&&i.css("height",""),t.Widget.prototype.destroy.call(this)},_setOption:function(e,i){t.Widget.prototype._setOption.apply(this,arguments),"active"==e&&this.activate(i),"icons"==e&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==e&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(e){if(!(this.options.disabled||e.altKey||e.ctrlKey)){var i=t.ui.keyCode,n=this.headers.length,r=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._clickHandler({target:e.target},e.target),e.preventDefault()}return o?(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),!1):!0}},resize:function(){var e,i=this.options;if(i.fillSpace){if(t.browser.msie){var n=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}e=this.element.parent().height(),t.browser.msie&&this.element.parent().css("overflow",n),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")}else i.autoHeight&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).height("").height())}).height(e));return this},activate:function(t){this.options.active=t;var e=this._findActive(t)[0];return this._clickHandler({target:e},e),this},_findActive:function(e){return e?"number"==typeof e?this.headers.filter(":eq("+e+")"):this.headers.not(this.headers.not(e)):e===!1?t([]):this.headers.filter(":eq(0)")},_clickHandler:function(e,i){var n=this.options;if(!n.disabled){if(!e.target){if(!n.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),this.active.next().addClass("ui-accordion-content-active");var r=this.active.next(),o={options:n,newHeader:t([]),oldHeader:n.active,newContent:t([]),oldContent:r},s=this.active=t([]);return this._toggle(s,r,o),void 0}var a=t(e.currentTarget||i),l=a[0]===this.active[0];if(n.active=n.collapsible&&l?!1:this.headers.index(a),!(this.running||!n.collapsible&&l)){var h=this.active,s=a.next(),r=this.active.next(),o={options:n,newHeader:l&&n.collapsible?t([]):a,oldHeader:this.active,newContent:l&&n.collapsible?t([]):s,oldContent:r},c=this.headers.index(this.active[0])>this.headers.index(a[0]);this.active=l?t([]):a,this._toggle(s,r,o,l,c),h.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),l||(a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(n.icons.header).addClass(n.icons.headerSelected),a.next().addClass("ui-accordion-content-active"))}}},_toggle:function(e,i,n,r,o){var s=this,a=s.options;s.toShow=e,s.toHide=i,s.data=n;var l=function(){return s?s._completed.apply(s,arguments):void 0};if(s._trigger("changestart",null,s.data),s.running=0===i.size()?e.size():i.size(),a.animated){var h={};h=a.collapsible&&r?{toShow:t([]),toHide:i,complete:l,down:o,autoHeight:a.autoHeight||a.fillSpace}:{toShow:e,toHide:i,complete:l,down:o,autoHeight:a.autoHeight||a.fillSpace},a.proxied||(a.proxied=a.animated),a.proxiedDuration||(a.proxiedDuration=a.duration),a.animated=t.isFunction(a.proxied)?a.proxied(h):a.proxied,a.duration=t.isFunction(a.proxiedDuration)?a.proxiedDuration(h):a.proxiedDuration;var c=t.ui.accordion.animations,u=a.duration,d=a.animated;!d||c[d]||t.easing[d]||(d="slide"),c[d]||(c[d]=function(t){this.slide(t,{easing:d,duration:u||700})}),c[d](h)}else a.collapsible&&r?e.toggle():(i.hide(),e.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),e.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(t){this.running=t?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),t.extend(t.ui.accordion,{version:"1.8.24",animations:{slide:function(e,i){if(e=t.extend({easing:"swing",duration:300},e,i),!e.toHide.size())return e.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},e),void 0;if(!e.toShow.size())return e.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},e),void 0;var n,r=e.toShow.css("overflow"),o=0,s={},a={},l=["height","paddingTop","paddingBottom"],h=e.toShow;n=h[0].style.width,h.width(h.parent().width()-parseFloat(h.css("paddingLeft"))-parseFloat(h.css("paddingRight"))-(parseFloat(h.css("borderLeftWidth"))||0)-(parseFloat(h.css("borderRightWidth"))||0)),t.each(l,function(i,n){a[n]="hide";var r=(""+t.css(e.toShow[0],n)).match(/^([\d+-.]+)(.*)$/);s[n]={value:r[1],unit:r[2]||"px"}}),e.toShow.css({height:0,overflow:"hidden"}).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").animate(a,{step:function(t,i){"height"==i.prop&&(o=0===i.end-i.start?0:(i.now-i.start)/(i.end-i.start)),e.toShow[0].style[i.prop]=o*s[i.prop].value+s[i.prop].unit},duration:e.duration,easing:e.easing,complete:function(){e.autoHeight||e.toShow.css("height",""),e.toShow.css({width:n,overflow:r}),e.complete()}})},bounceslide:function(t){this.slide(t,{easing:t.down?"easeOutBounce":"swing",duration:t.down?1e3:200})}}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var e,i=this,n=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(!i.options.disabled&&!i.element.propAttr("readOnly")){e=!1;var r=t.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:i._move("previousPage",n);break;case r.PAGE_DOWN:i._move("nextPage",n);break;case r.UP:i._keyEvent("previous",n);break;case r.DOWN:i._keyEvent("next",n);break;case r.ENTER:case r.NUMPAD_ENTER:i.menu.active&&(e=!0,n.preventDefault());case r.TAB:if(!i.menu.active)return;i.menu.select(n);break;case r.ESCAPE:i.element.val(i.term),i.close(n);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,n))},i.options.delay)}}}).bind("keypress.autocomplete",function(t){e&&(e=!1,t.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(t){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(t),i._change(t)},150))}),this._initSource(),this.menu=t("<ul></ul>").addClass("ui-autocomplete").appendTo(t(this.options.appendTo||"body",n)[0]).mousedown(function(e){var n=i.menu.element[0];t(e.target).closest(".ui-menu-item").length||setTimeout(function(){t(document).one("mousedown",function(e){e.target===i.element[0]||e.target===n||t.ui.contains(n,e.target)||i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(t,e){var n=e.item.data("item.autocomplete");!1!==i._trigger("focus",t,{item:n})&&/^key/.test(t.originalEvent.type)&&i.element.val(n.value)},selected:function(t,e){var r=e.item.data("item.autocomplete"),o=i.previous;i.element[0]!==n.activeElement&&(i.element.focus(),i.previous=o,setTimeout(function(){i.previous=o,i.selectedItem=r},1)),!1!==i._trigger("select",t,{item:r})&&i.element.val(r.value),i.term=i.element.val(),i.close(t),i.selectedItem=r},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),t.fn.bgiframe&&this.menu.element.bgiframe(),i.beforeunloadHandler=function(){i.element.removeAttr("autocomplete")},t(window).bind("beforeunload",i.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),t(window).unbind("beforeunload",this.beforeunloadHandler),t.Widget.prototype.destroy.call(this)},_setOption:function(e,i){t.Widget.prototype._setOption.apply(this,arguments),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(t(i||"body",this.element[0].ownerDocument)[0]),"disabled"===e&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,r){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},search:function(t,e){return t=null!=t?t:this.element.val(),this.term=this.element.val(),t.length<this.options.minLength?this.close(e):(clearTimeout(this.closing),this._trigger("search",e)!==!1?this._search(t):void 0)},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(n){i===e&&t.__response(n),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){!this.options.disabled&&t&&t.length?(t=this._normalize(t),this._suggest(t),this._trigger("open")):this.close()},close:function(t){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",t))},_change:function(t){this.previous!==this.element.val()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,e),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new t.Event("mouseover"))},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItem(e,i)})},_renderItem:function(e,i){return t("<li></li>").data("item.autocomplete",i).append(t("<a></a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(t)||this.menu.last()&&/^next/.test(t)?(this.element.val(this.term),this.menu.deactivate(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}})}(jQuery),/*
 * jQuery UI Menu (not officially released)
 * 
 * This widget isn't yet finished and the API is subject to change. We plan to finish
 * it for the next release. You're welcome to give it a try anyway and give us feedback,
 * as long as you're okay with migrating your code later on. We can help with that, too.
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Menu
 *
 * Depends:
 *	jquery.ui.core.js
 *  jquery.ui.widget.js
 */
function(t){t.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){t(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),e.select(i))}),this.refresh()},refresh:function(){var e=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){e.activate(i,t(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(t,e){if(this.deactivate(),this.hasScroll()){var i=e.offset().top-this.element.offset().top,n=this.element.scrollTop(),r=this.element.height();0>i?this.element.scrollTop(n+i):i>=r&&this.element.scrollTop(n+i-r+e.height())}this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",t,{item:e})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(t){this.move("next",".ui-menu-item:first",t)},previous:function(t){this.move("prev",".ui-menu-item:last",t)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(t,e,i){if(!this.active)return this.activate(i,this.element.children(e)),void 0;var n=this.active[t+"All"](".ui-menu-item").eq(0);n.length?this.activate(i,n):this.activate(i,this.element.children(e))},nextPage:function(e){if(this.hasScroll()){if(!this.active||this.last())return this.activate(e,this.element.children(".ui-menu-item:first")),void 0;var i=this.active.offset().top,n=this.element.height(),r=this.element.children(".ui-menu-item").filter(function(){var e=t(this).offset().top-i-n+t(this).height();return 10>e&&e>-10});r.length||(r=this.element.children(".ui-menu-item:last")),this.activate(e,r)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(e){if(this.hasScroll()){if(!this.active||this.first())return this.activate(e,this.element.children(".ui-menu-item:last")),void 0;var i=this.active.offset().top,n=this.element.height(),r=this.element.children(".ui-menu-item").filter(function(){var e=t(this).offset().top-i+n-t(this).height();return 10>e&&e>-10});r.length||(r=this.element.children(".ui-menu-item:first")),this.activate(e,r)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[t.fn.prop?"prop":"attr"]("scrollHeight")},select:function(t){this._trigger("selected",t,{item:this.active})}})}(jQuery),function(t,e){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var e=this,n=e.options,r=n.title||"&#160;",o=t.ui.dialog.getTitleId(e.element),s=(e.uiDialog=t("<div></div>")).appendTo(document.body).hide().addClass(i+n.dialogClass).css({zIndex:n.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){n.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===t.ui.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(t){e.moveToTop(!1,t)}),a=(e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),(e.uiDialogTitlebar=t("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(s)),l=t('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(t){return e.close(t),!1}).appendTo(a);(e.uiDialogTitlebarCloseText=t("<span></span>")).addClass("ui-icon ui-icon-closethick").text(n.closeText).appendTo(l),t("<span></span>").addClass("ui-dialog-title").attr("id",o).html(r).prependTo(a),t.isFunction(n.beforeclose)&&!t.isFunction(n.beforeClose)&&(n.beforeClose=n.beforeclose),a.find("*").add(a).disableSelection(),n.draggable&&t.fn.draggable&&e._makeDraggable(),n.resizable&&t.fn.resizable&&e._makeResizable(),e._createButtons(n.buttons),e._isOpen=!1,t.fn.bgiframe&&s.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var t=this;return t.overlay&&t.overlay.destroy(),t.uiDialog.hide(),t.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),t.uiDialog.remove(),t.originalTitle&&t.element.attr("title",t.originalTitle),t},widget:function(){return this.uiDialog},close:function(e){var i,n,r=this;if(!1!==r._trigger("beforeClose",e))return r.overlay&&r.overlay.destroy(),r.uiDialog.unbind("keypress.ui-dialog"),r._isOpen=!1,r.options.hide?r.uiDialog.hide(r.options.hide,function(){r._trigger("close",e)}):(r.uiDialog.hide(),r._trigger("close",e)),t.ui.dialog.overlay.resize(),r.options.modal&&(i=0,t(".ui-dialog").each(function(){this!==r.uiDialog[0]&&(n=t(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),t.ui.dialog.maxZ=i),r},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var n,r=this,o=r.options;return o.modal&&!e||!o.stack&&!o.modal?r._trigger("focus",i):(o.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=o.zIndex),r.overlay&&(t.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",t.ui.dialog.overlay.maxZ=t.ui.dialog.maxZ)),n={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},t.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",t.ui.dialog.maxZ),r.element.attr(n),r._trigger("focus",i),r)},open:function(){if(!this._isOpen){var e=this,i=e.options,n=e.uiDialog;return e.overlay=i.modal?new t.ui.dialog.overlay(e):null,e._size(),e._position(i.position),n.show(i.show),e.moveToTop(!0),i.modal&&n.bind("keydown.ui-dialog",function(e){if(e.keyCode===t.ui.keyCode.TAB){var i=t(":tabbable",this),n=i.filter(":first"),r=i.filter(":last");return e.target!==r[0]||e.shiftKey?e.target===n[0]&&e.shiftKey?(r.focus(1),!1):void 0:(n.focus(1),!1)}}),t(e.element.find(":tabbable").get().concat(n.find(".ui-dialog-buttonpane :tabbable").get().concat(n.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e}},_createButtons:function(e){var i=this,n=!1,r=t("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=t("<div></div>").addClass("ui-dialog-buttonset").appendTo(r);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof e&&null!==e&&t.each(e,function(){return!(n=!0)}),n&&(t.each(e,function(e,n){n=t.isFunction(n)?{click:n,text:e}:n;var r=t('<button type="button"></button>').click(function(){n.click.apply(i.element[0],arguments)}).appendTo(o);t.each(n,function(t,e){"click"!==t&&(t in r?r[t](e):r.attr(t,e))}),t.fn.button&&r.button()}),r.appendTo(i.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i,n=this,r=n.options,o=t(document);n.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(o,s){i="auto"===r.height?"auto":t(this).height(),t(this).height(t(this).height()).addClass("ui-dialog-dragging"),n._trigger("dragStart",o,e(s))},drag:function(t,i){n._trigger("drag",t,e(i))},stop:function(s,a){r.position=[a.position.left-o.scrollLeft(),a.position.top-o.scrollTop()],t(this).removeClass("ui-dialog-dragging").height(i),n._trigger("dragStop",s,e(a)),t.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}i=i===e?this.options.resizable:i;var r=this,o=r.options,s=r.uiDialog.css("position"),a="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:r.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:r._minHeight(),handles:a,start:function(e,i){t(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",e,n(i))},resize:function(t,e){r._trigger("resize",t,n(e))},stop:function(e,i){t(this).removeClass("ui-dialog-resizing"),o.height=t(this).height(),o.width=t(this).width(),r._trigger("resizeStop",e,n(i)),t.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,n=[],r=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(n=e.split?e.split(" "):[e[0],e[1]],1===n.length&&(n[1]=n[0]),t.each(["left","top"],function(t,e){+n[t]===n[t]&&(r[t]=n[t],n[t]=e)}),e={my:n.join(" "),at:n.join(" "),offset:r.join(" ")}),e=t.extend({},t.ui.dialog.prototype.options.position,e)):e=t.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(t.extend({of:window},e)),i||this.uiDialog.hide()},_setOptions:function(e){var i=this,o={},s=!1;t.each(e,function(t,e){i._setOption(t,e),t in n&&(s=!0),t in r&&(o[t]=e)}),s&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,n){var r=this,o=r.uiDialog;switch(e){case"beforeclose":e="beforeClose";break;case"buttons":r._createButtons(n);break;case"closeText":r.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":o.removeClass(r.options.dialogClass).addClass(i+n);break;case"disabled":n?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":var s=o.is(":data(draggable)");s&&!n&&o.draggable("destroy"),!s&&n&&r._makeDraggable();break;case"position":r._position(n);break;case"resizable":var a=o.is(":data(resizable)");a&&!n&&o.resizable("destroy"),a&&"string"==typeof n&&o.resizable("option","handles",n),a||n===!1||r._makeResizable(n);break;case"title":t(".ui-dialog-title",r.uiDialogTitlebar).html(""+(n||"&#160;"))}t.Widget.prototype._setOption.apply(r,arguments)},_size:function(){var e,i,n=this.options,r=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).height(),i=Math.max(0,n.minHeight-e),"auto"===n.height)if(t.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var o=this.element.css("height","auto").height();r||this.uiDialog.hide(),this.element.height(Math.max(o,i))}else this.element.height(Math.max(n.height-e,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),t.extend(t.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.ui.dialog.overlay.create(e)}}),t.extend(t.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(e){return t(e.target).zIndex()<t.ui.dialog.overlay.maxZ?!1:void 0})},1),t(document).bind("keydown.dialog-overlay",function(i){e.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===t.ui.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||t("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return t.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(e){var i=t.inArray(e,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.remove();var n=0;t.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var e,i;return t.browser.msie&&t.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>e?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,i;return t.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>e?t(window).width()+"px":e+"px"):t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.ui.dialog.overlay.width(),height:t.ui.dialog.overlay.height()})}}),t.extend(t.ui.dialog.overlay.prototype,{destroy:function(){t.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(t){t.ui=t.ui||{};var e=/left|center|right/,i=/top|center|bottom/,n="center",r={},o=t.fn.position,s=t.fn.offset;t.fn.position=function(s){if(!s||!s.of)return o.apply(this,arguments);s=t.extend({},s);var a,l,h,c=t(s.of),u=c[0],d=(s.collision||"flip").split(" "),p=s.offset?s.offset.split(" "):[0,0];return 9===u.nodeType?(a=c.width(),l=c.height(),h={top:0,left:0}):u.setTimeout?(a=c.width(),l=c.height(),h={top:c.scrollTop(),left:c.scrollLeft()}):u.preventDefault?(s.at="left top",a=l=0,h={top:s.of.pageY,left:s.of.pageX}):(a=c.outerWidth(),l=c.outerHeight(),h=c.offset()),t.each(["my","at"],function(){var t=(s[this]||"").split(" ");1===t.length&&(t=e.test(t[0])?t.concat([n]):i.test(t[0])?[n].concat(t):[n,n]),t[0]=e.test(t[0])?t[0]:n,t[1]=i.test(t[1])?t[1]:n,s[this]=t}),1===d.length&&(d[1]=d[0]),p[0]=parseInt(p[0],10)||0,1===p.length&&(p[1]=p[0]),p[1]=parseInt(p[1],10)||0,"right"===s.at[0]?h.left+=a:s.at[0]===n&&(h.left+=a/2),"bottom"===s.at[1]?h.top+=l:s.at[1]===n&&(h.top+=l/2),h.left+=p[0],h.top+=p[1],this.each(function(){var e,i=t(this),o=i.outerWidth(),c=i.outerHeight(),u=parseInt(t.curCSS(this,"marginLeft",!0))||0,f=parseInt(t.curCSS(this,"marginTop",!0))||0,g=o+u+(parseInt(t.curCSS(this,"marginRight",!0))||0),m=c+f+(parseInt(t.curCSS(this,"marginBottom",!0))||0),v=t.extend({},h);"right"===s.my[0]?v.left-=o:s.my[0]===n&&(v.left-=o/2),"bottom"===s.my[1]?v.top-=c:s.my[1]===n&&(v.top-=c/2),r.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),e={left:v.left-u,top:v.top-f},t.each(["left","top"],function(i,n){t.ui.position[d[i]]&&t.ui.position[d[i]][n](v,{targetWidth:a,targetHeight:l,elemWidth:o,elemHeight:c,collisionPosition:e,collisionWidth:g,collisionHeight:m,offset:p,my:s.my,at:s.at})}),t.fn.bgiframe&&i.bgiframe(),i.offset(t.extend(v,{using:s.using}))})},t.ui.position={fit:{left:function(e,i){var n=t(window),r=i.collisionPosition.left+i.collisionWidth-n.width()-n.scrollLeft();e.left=r>0?e.left-r:Math.max(e.left-i.collisionPosition.left,e.left)},top:function(e,i){var n=t(window),r=i.collisionPosition.top+i.collisionHeight-n.height()-n.scrollTop();e.top=r>0?e.top-r:Math.max(e.top-i.collisionPosition.top,e.top)}},flip:{left:function(e,i){if(i.at[0]!==n){var r=t(window),o=i.collisionPosition.left+i.collisionWidth-r.width()-r.scrollLeft(),s="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,a="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];e.left+=i.collisionPosition.left<0?s+a+l:o>0?s+a+l:0}},top:function(e,i){if(i.at[1]!==n){var r=t(window),o=i.collisionPosition.top+i.collisionHeight-r.height()-r.scrollTop(),s="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,a="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];e.top+=i.collisionPosition.top<0?s+a+l:o>0?s+a+l:0}}}},t.offset.setOffset||(t.offset.setOffset=function(e,i){/static/.test(t.curCSS(e,"position"))&&(e.style.position="relative");var n=t(e),r=n.offset(),o=parseInt(t.curCSS(e,"top",!0),10)||0,s=parseInt(t.curCSS(e,"left",!0),10)||0,a={top:i.top-r.top+o,left:i.left-r.left+s};"using"in i?i.using.call(e,a):n.css(a)},t.fn.offset=function(e){var i=this[0];return i&&i.ownerDocument?e?t.isFunction(e)?this.each(function(i){t(this).offset(e.call(this,i,t(this).offset()))}):this.each(function(){t.offset.setOffset(this,e)}):s.call(this):null}),t.curCSS||(t.curCSS=t.css),function(){var e,i,n,o,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(var h in n)e.style[h]=n[h];e.appendChild(l),i=a||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",o=t(l).offset(function(t,e){return e}).offset(),e.innerHTML="",i.removeChild(e),s=o.top+o.left+(a?2e3:0),r.fractions=s>21&&22>s}()}(jQuery),function(t,e){t.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),t.Widget.prototype.destroy.apply(this,arguments)},value:function(t){return t===e?this._value():(this._setOption("value",t),this)},_setOption:function(e,i){"value"===e&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),t.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var t=this.options.value;return"number"!=typeof t&&(t=0),Math.min(this.options.max,Math.max(this.min,t))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var t=this.value(),e=this._percentage();this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),this.valueDiv.toggle(t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",t)}}),t.extend(t.ui.progressbar,{version:"1.8.24"})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i=this,n=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=n.values&&n.values.length||1,a=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),n.range&&(n.range===!0&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:"")));for(var l=r.length;s>l;l+=1)a.push(o);this.handles=r.add(t(a.join("")).appendTo(i.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).hover(function(){n.disabled||t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("index.ui-slider-handle",e)}),this.handles.keydown(function(n){var r,o,s,a,l=t(this).data("index.ui-slider-handle");if(!i.options.disabled){switch(n.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n.preventDefault(),!i._keySliding&&(i._keySliding=!0,t(this).addClass("ui-state-active"),r=i._start(n,l),r===!1))return}switch(a=i.options.step,o=s=i.options.values&&i.options.values.length?i.values(l):i.value(),n.keyCode){case t.ui.keyCode.HOME:s=i._valueMin();break;case t.ui.keyCode.END:s=i._valueMax();break;case t.ui.keyCode.PAGE_UP:s=i._trimAlignValue(o+(i._valueMax()-i._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:s=i._trimAlignValue(o-(i._valueMax()-i._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(o===i._valueMax())return;s=i._trimAlignValue(o+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(o===i._valueMin())return;s=i._trimAlignValue(o-a)}i._slide(n,l,s)}}).keyup(function(e){var n=t(this).data("index.ui-slider-handle");i._keySliding&&(i._keySliding=!1,i._stop(e,n),i._change(e,n),t(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(e){var i,n,r,o,s,a,l,h,c,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,s=this,this.handles.each(function(e){var i=Math.abs(n-s.values(e));r>i&&(r=i,o=t(this),a=e)}),u.range===!0&&this.values(1)===u.min&&(a+=1,o=t(this.handles[a])),l=this._start(e,a),l===!1?!1:(this._mouseSliding=!0,s._handleIndex=a,o.addClass("ui-state-active").focus(),h=o.offset(),c=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,r,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),o=this._valueMin()+n*r,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,r,o;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(r=this.values(),r[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:r}),n=this.values(e?0:1),o!==!1&&this.values(e,i,!0))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var n,r,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,r=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,r=0;switch(t.isArray(this.options.values)&&(r=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;r>n;n+=1)this._change(null,n);this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,r,o,s=this.options.range,a=this.options,l=this,h=this._animateOff?!1:a.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){e=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=e+"%",t(this).stop(1,1)[h?"animate":"css"](c,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[h?"animate":"css"]({left:e+"%"},a.animate),1===n&&l.range[h?"animate":"css"]({width:e-i+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[h?"animate":"css"]({bottom:e+"%"},a.animate),1===n&&l.range[h?"animate":"css"]({height:e-i+"%"},{queue:!1,duration:a.animate}))),i=e}):(n=this.value(),r=this._valueMin(),o=this._valueMax(),e=o!==r?100*((n-r)/(o-r)):0,c["horizontal"===l.orientation?"left":"bottom"]=e+"%",this.handle.stop(1,1)[h?"animate":"css"](c,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:e+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-e+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:e+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:a.animate}))}}),t.extend(t.ui.slider,{version:"1.8.24"})}(jQuery),function(t,e){function i(){return++r}function n(){return++o}var r=0,o=0;t.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(t,e){if("selected"==t){if(this.options.collapsible&&e==this.options.selected)return;this.select(e)}else this.options[t]=e,this._tabify()},_tabId:function(t){return t.title&&t.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+i()},_sanitizeSelector:function(t){return t.replace(/:/g,"\\:")},_cookie:function(){var e=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+n());return t.cookie.apply(null,[e].concat(t.makeArray(arguments)))},_ui:function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var e=t(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){function n(e,i){e.css("display",""),!t.support.opacity&&i.opacity&&e[0].style.removeAttribute("filter")}var r=this,o=this.options,s=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=t(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return t("a",this)[0]}),this.panels=t([]),this.anchors.each(function(e,i){var n,a=t(i).attr("href"),l=a.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(n=t("base")[0])&&l===n.href)&&(a=i.hash,i.href=a),s.test(a))r.panels=r.panels.add(r.element.find(r._sanitizeSelector(a)));else if(a&&"#"!==a){t.data(i,"href.tabs",a),t.data(i,"load.tabs",a.replace(/#.*$/,""));var h=r._tabId(i);i.href="#"+h;var c=r.element.find("#"+h);c.length||(c=t(o.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[e-1]||r.list),c.data("destroy.tabs",!0)),r.panels=r.panels.add(c)}else o.disabled.push(e)}),i?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),o.selected===e?(location.hash&&this.anchors.each(function(t,e){return e.hash==location.hash?(o.selected=t,!1):void 0}),"number"!=typeof o.selected&&o.cookie&&(o.selected=parseInt(r._cookie(),10)),"number"!=typeof o.selected&&this.lis.filter(".ui-tabs-selected").length&&(o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),o.selected=o.selected||(this.lis.length?0:-1)):null===o.selected&&(o.selected=-1),o.selected=o.selected>=0&&this.anchors[o.selected]||o.selected<0?o.selected:0,o.disabled=t.unique(o.disabled.concat(t.map(this.lis.filter(".ui-state-disabled"),function(t){return r.lis.index(t)}))).sort(),-1!=t.inArray(o.selected,o.disabled)&&o.disabled.splice(t.inArray(o.selected,o.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),o.selected>=0&&this.anchors.length&&(r.element.find(r._sanitizeSelector(r.anchors[o.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[o.selected],r.element.find(r._sanitizeSelector(r.anchors[o.selected].hash))[0]))}),this.load(o.selected)),t(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})):o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[o.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),o.cookie&&this._cookie(o.selected,o.cookie);
for(var a,l=0;a=this.lis[l];l++)t(a)[-1==t.inArray(l,o.disabled)||t(a).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(o.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==o.event){var h=function(t,e){e.is(":not(.ui-state-disabled)")&&e.addClass("ui-state-"+t)},c=function(t,e){e.removeClass("ui-state-"+t)};this.lis.bind("mouseover.tabs",function(){h("hover",t(this))}),this.lis.bind("mouseout.tabs",function(){c("hover",t(this))}),this.anchors.bind("focus.tabs",function(){h("focus",t(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){c("focus",t(this).closest("li"))})}var u,d;o.fx&&(t.isArray(o.fx)?(u=o.fx[0],d=o.fx[1]):u=d=o.fx);var p=d?function(e,i){t(e).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(d,d.duration||"normal",function(){n(i,d),r._trigger("show",null,r._ui(e,i[0]))})}:function(e,i){t(e).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),r._trigger("show",null,r._ui(e,i[0]))},f=u?function(t,e){e.animate(u,u.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),n(e,u),r.element.dequeue("tabs")})}:function(t,e){r.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),r.element.dequeue("tabs")};this.anchors.bind(o.event+".tabs",function(){var e=this,i=t(e).closest("li"),n=r.panels.filter(":not(.ui-tabs-hide)"),s=r.element.find(r._sanitizeSelector(e.hash));if(i.hasClass("ui-tabs-selected")&&!o.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||r.panels.filter(":animated").length||r._trigger("select",null,r._ui(this,s[0]))===!1)return this.blur(),!1;if(o.selected=r.anchors.index(this),r.abort(),o.collapsible){if(i.hasClass("ui-tabs-selected"))return o.selected=-1,o.cookie&&r._cookie(o.selected,o.cookie),r.element.queue("tabs",function(){f(e,n)}).dequeue("tabs"),this.blur(),!1;if(!n.length)return o.cookie&&r._cookie(o.selected,o.cookie),r.element.queue("tabs",function(){p(e,s)}),r.load(r.anchors.index(this)),this.blur(),!1}if(o.cookie&&r._cookie(o.selected,o.cookie),!s.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";n.length&&r.element.queue("tabs",function(){f(e,n)}),r.element.queue("tabs",function(){p(e,s)}),r.load(r.anchors.index(this)),t.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},destroy:function(){var e=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var e=t.data(this,"href.tabs");e&&(this.href=e);var i=t(this).unbind(".tabs");t.each(["href","load","cache"],function(t,e){i.removeData(e+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){t.data(this,"destroy.tabs")?t(this).remove():t(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),e.cookie&&this._cookie(null,e.cookie),this},add:function(i,n,r){r===e&&(r=this.anchors.length);var o=this,s=this.options,a=t(s.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),l=i.indexOf("#")?this._tabId(t("a",a)[0]):i.replace("#","");a.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var h=o.element.find("#"+l);return h.length||(h=t(s.panelTemplate).attr("id",l).data("destroy.tabs",!0)),h.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),r>=this.lis.length?(a.appendTo(this.list),h.appendTo(this.list[0].parentNode)):(a.insertBefore(this.lis[r]),h.insertBefore(this.panels[r])),s.disabled=t.map(s.disabled,function(t){return t>=r?++t:t}),this._tabify(),1==this.anchors.length&&(s.selected=0,a.addClass("ui-tabs-selected ui-state-active"),h.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[0],o.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r])),this},remove:function(e){e=this._getIndex(e);var i=this.options,n=this.lis.eq(e).remove(),r=this.panels.eq(e).remove();return n.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(e+(e+1<this.anchors.length?1:-1)),i.disabled=t.map(t.grep(i.disabled,function(t){return t!=e}),function(t){return t>=e?--t:t}),this._tabify(),this._trigger("remove",null,this._ui(n.find("a")[0],r[0])),this},enable:function(e){e=this._getIndex(e);var i=this.options;if(-1!=t.inArray(e,i.disabled))return this.lis.eq(e).removeClass("ui-state-disabled"),i.disabled=t.grep(i.disabled,function(t){return t!=e}),this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e])),this},disable:function(t){t=this._getIndex(t);var e=this.options;return t!=e.selected&&(this.lis.eq(t).addClass("ui-state-disabled"),e.disabled.push(t),e.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))),this},select:function(t){if(t=this._getIndex(t),-1==t){if(!this.options.collapsible||-1==this.options.selected)return this;t=this.options.selected}return this.anchors.eq(t).trigger(this.options.event+".tabs"),this},load:function(e){e=this._getIndex(e);var i=this,n=this.options,r=this.anchors.eq(e)[0],o=t.data(r,"load.tabs");if(this.abort(),!o||0!==this.element.queue("tabs").length&&t.data(r,"cache.tabs"))return this.element.dequeue("tabs"),void 0;if(this.lis.eq(e).addClass("ui-state-processing"),n.spinner){var s=t("span",r);s.data("label.tabs",s.html()).html(n.spinner)}return this.xhr=t.ajax(t.extend({},n.ajaxOptions,{url:o,success:function(o,s){i.element.find(i._sanitizeSelector(r.hash)).html(o),i._cleanup(),n.cache&&t.data(r,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[e],i.panels[e]));try{n.ajaxOptions.success(o,s)}catch(a){}},error:function(t,o){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[e],i.panels[e]));try{n.ajaxOptions.error(t,o,e,r)}catch(s){}}})),i.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(t,e){return this.anchors.eq(t).removeData("cache.tabs").data("load.tabs",e),this},length:function(){return this.anchors.length}}),t.extend(t.ui.tabs,{version:"1.8.24"}),t.extend(t.ui.tabs.prototype,{rotation:null,rotate:function(t,e){var i=this,n=this.options,r=i._rotate||(i._rotate=function(e){clearTimeout(i.rotation),i.rotation=setTimeout(function(){var t=n.selected;i.select(++t<i.anchors.length?t:0)},t),e&&e.stopPropagation()}),o=i._unrotate||(i._unrotate=e?function(){r()}:function(t){t.clientX&&i.rotate(null)});return t?(this.element.bind("tabsshow",r),this.anchors.bind(n.event+".tabs",o),r()):(clearTimeout(i.rotation),this.element.unbind("tabsshow",r),this.anchors.unbind(n.event+".tabs",o),delete this._rotate,delete this._unrotate),this}})}(jQuery);